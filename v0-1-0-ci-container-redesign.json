{"version":3,"kind":"Article","sha256":"3e8c37e5cfff3d71e559920d92f2c8fcbb9a302baa19fcb1989b5f6b03e5e9fd","slug":"v0-1-0-ci-container-redesign","location":"/developer-guide/06-roadmap/v0.1.0-ci-container-redesign.md","dependencies":[],"frontmatter":{"title":"v0.1.0 CI/Container Redesign Proposal","label":"devflow.developer-guide.roadmap.v010-ci-container-redesign","content_includes_title":false,"authors":[{"nameParsed":{"literal":"Soft Mentor","given":"Soft","family":"Mentor"},"name":"Soft Mentor","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/softmentor/devflow","abbreviations":{"ADR":"Architecture Decision Record.","API":"Application Programming Interface.","CI":"Continuous Integration.","CLI":"Command Line Interface.","DAG":"Directed Acyclic Graph.","GHCR":"GitHub Container Registry.","PR":"Pull Request."},"numbering":{"title":{"offset":2}},"source_url":"https://github.com/softmentor/devflow/blob/main/docs/developer-guide/06-roadmap/v0.1.0-ci-container-redesign.md","edit_url":"https://github.com/softmentor/devflow/edit/main/docs/developer-guide/06-roadmap/v0.1.0-ci-container-redesign.md","exports":[{"format":"md","filename":"v0.1.0-ci-container-redesign.md","url":"/devflow/build/v0.1.0-ci-container--a4a94299b88522323344531c987697f6.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Purpose","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"Iwa1wfH6Rs"}],"identifier":"purpose","label":"Purpose","html_id":"purpose","implicit":true,"key":"i9mfoRSL3C"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Define a reproducible, modular, and cache-efficient developer/","key":"FYTqz9LSM9"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"UxJOrUbE5x"}],"key":"YLVf18cczX"},{"type":"text","value":" model for the v0.1.0 refactor so local macOS development and GitHub Actions execute the same verification logic with the same container identity.","key":"WUyHO945Aw"}],"key":"XQZ1AJSeiN"},{"type":"heading","depth":2,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Executive Summary","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"cKJySsvJFR"}],"identifier":"executive-summary","label":"Executive Summary","html_id":"executive-summary","implicit":true,"key":"fz641iB06F"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep the current fingerprinted ","key":"dINEOu3erh"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"FScgmVyzfb"}],"key":"bVmDGJHCNg"},{"type":"text","value":" image strategy and expand it into a single canonical cache architecture.","key":"OUni0gPo62"}],"key":"JKi2X1ROsw"}],"key":"aS6KBtK7sJ"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Use a configurable cache root for local container runs (default: ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"ELwmiQKpuz"},{"type":"inlineCode","value":".cargo-cache/","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"FGt82DW9Xw"},{"type":"text","value":") with explicit volume mounts for registry, git, ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"fqZIlZhXlI"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"P2HsNaRQBc"},{"type":"text","value":", and target outputs.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"SNkNHVUTh0"}],"key":"VerAWIYrJH"}],"key":"hU2saqZIvS"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep one source of truth for commands in Make targets and scripts; GitHub Actions should only orchestrate those targets.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"sHD1zsNa26"}],"key":"wMr60cU2KB"}],"key":"epuMXGQX5H"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Use ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"Hk9nlF6K81"},{"type":"inlineCode","value":"cargo nextest","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"C6385bYm46"},{"type":"text","value":" as the default ","key":"gWOLl1vzTN"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"QWvBsyirGp"}],"key":"DmtOcY4gBs"},{"type":"text","value":" test runner, with test tiers split by change risk (minimal ","key":"RhNIbmEbEf"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"WT0HaJQ3uB"}],"key":"OaZAx8LMzK"},{"type":"text","value":" gate vs full verification on push/main).","key":"ExKqgbyo13"}],"key":"x9u64tXkRk"}],"key":"qyk9GE9QEq"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Preserve granular ","key":"ZAVehMo27D"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"Lvxbw3BCmc"}],"key":"acvN3wquTU"},{"type":"text","value":" visibility (","key":"oPu0x8hx15"},{"type":"inlineCode","value":"fmt","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"kWylZ6MjQG"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"uZoThvfKvb"},{"type":"inlineCode","value":"clippy","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"hESn9xSKTm"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"YSLShy6Pmg"},{"type":"inlineCode","value":"compile","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"WsfM6uk5Ib"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"aXuljsJnqK"},{"type":"inlineCode","value":"test","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"ssQbUFmirb"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"M0DCYAozE9"},{"type":"inlineCode","value":"smoke","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"g8rQMLt4CZ"},{"type":"text","value":") as separate required checks.","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"rzHusxaCSq"}],"key":"d8nf2AMTbA"}],"key":"TbJtXgvlZ8"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"ric1oMpoWC"},{"type":"inlineCode","value":"build","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"xRWz4CSZhb"},{"type":"text","value":" and ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"Ns3c7Zko1t"},{"type":"inlineCode","value":"verify","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"qPH9JwXJhX"},{"type":"text","value":" execution inside the containerized ","key":"ry2xkvrgOg"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"ouTDZZw03I"}],"key":"IkgJLuM3VM"},{"type":"text","value":" image to preserve environment parity with local repro.","key":"KOdWPLrxa4"}],"key":"k56Ykc9mK7"}],"key":"PsKh4nzaBM"}],"key":"uKPbrlslAJ"},{"type":"heading","depth":2,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Current-State Evaluation","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"ls8VPZ4fYG"}],"identifier":"current-state-evaluation","label":"Current-State Evaluation","html_id":"current-state-evaluation","implicit":true,"key":"xINkGZ8gUf"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"This repository already has strong foundations:","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"TfXNbHY2KK"}],"key":"J8z18iqMhA"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":25,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Content-addressed image fingerprinting (","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"WrUoSejovv"},{"type":"inlineCode","value":"Dockerfile","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"BV3qhmq9LI"},{"type":"text","value":" hash) and ","key":"uqjVK5J8fY"},{"type":"abbreviation","title":"GitHub Container Registry.","children":[{"type":"text","value":"GHCR","key":"mti2UPXt04"}],"key":"OLNeqJno3g"},{"type":"text","value":"-backed ","key":"SqA7qmJ4yU"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"uobbZmDpOX"}],"key":"IlonL6FPTR"},{"type":"text","value":" image identity.","key":"tjA79ScPuU"}],"key":"t27sqwkjK3"}],"key":"wgWHGsDXAE"},{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Containerized local reproducibility via ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"xOSSCbunFH"},{"type":"inlineCode","value":"./dflow ci-verify","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"L6yrOKvy6G"},{"type":"text","value":".","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"f2SuDXXPX3"}],"key":"oXoTr5xNix"}],"key":"qQqdmmb6JI"},{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Shared cache directories for containerized runs: ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"lhXL9lrV6p"},{"type":"inlineCode","value":".cargo-cache/{registry,git,sccache}","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"PGXgRfj4z7"},{"type":"text","value":" and ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"UxBXvnJx3y"},{"type":"inlineCode","value":"target/ci","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"Q62ZFJIDOv"},{"type":"text","value":".","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"rcNUW1ev4q"}],"key":"nYfp1HnzWa"}],"key":"NevqasheTq"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"nextest","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"LanRp0lsmr"},{"type":"text","value":" already used in ","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"cavpClc3bA"},{"type":"inlineCode","value":"test-ci","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"WPrNOousYn"},{"type":"text","value":".","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"eni8OHkMQ5"}],"key":"wnvEN9iAT5"}],"key":"nHruQN8TtD"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Granular status reporting via ","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"cWsKaBazLZ"},{"type":"inlineCode","value":"gh-check-wrapper.sh","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"G7drtVI1Rm"},{"type":"text","value":".","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"qDDkJIAFmQ"}],"key":"X44ALvTkmB"}],"key":"VH1vXlb0da"}],"key":"IXr4GZcA5X"},{"type":"paragraph","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Primary gaps to address for v0.1.0:","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"mtUjFJGiIK"}],"key":"BTPj00H11P"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":33,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Fingerprint scope drift: docs/scripts currently state broader fingerprint inputs, while ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"WZiRqO1iSr"},{"type":"inlineCode","value":"vars.mk","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"yDIuhjgSfj"},{"type":"text","value":" hashes only ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"nkl9DHbgDG"},{"type":"inlineCode","value":"Dockerfile","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"bLIGIJhnx2"},{"type":"text","value":".","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"uDMWYuPPJb"}],"key":"SlwRzmX8O1"}],"key":"HMPqri6Ekf"},{"type":"listItem","spread":true,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cache root is not fully standardized/configurable as one top-level contract for local + ","key":"r4Waiq26ff"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"eMmsEbSxFw"}],"key":"Wvx98Nl4NX"},{"type":"text","value":".","key":"mrIoMWUwVn"}],"key":"Z8xWvxmvYH"}],"key":"z6xHlymevN"},{"type":"listItem","spread":true,"position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"sa3M2GjLs6"}],"key":"YUv9OA5Z9H"},{"type":"text","value":" check topology is efficient but still tightly coupled to shell backgrounding in one step; explicit check job contracts can improve maintainability.","key":"VUkRhXAwvB"}],"key":"yda8XEiwCA"}],"key":"NtmacSzIdT"},{"type":"listItem","spread":true,"position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"ofX91qTJfE"}],"key":"ajAoxBfh9A"},{"type":"text","value":" gating tiers are not explicitly documented as “minimal gate” vs “full verification”.","key":"v7AgkueOou"}],"key":"ec2BiVLatq"}],"key":"GvrXw0sjGf"},{"type":"listItem","spread":true,"position":{"start":{"line":37,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The design is highly optimized for this Rust repository but is not yet framed as a reusable cross-stack platform.","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"UXLIvZ78eK"}],"key":"UAC5qZGqbZ"}],"key":"A5T43hQaUQ"}],"key":"adq5917yVb"},{"type":"heading","depth":2,"position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"text","value":"Target Design","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"Xma3EeCnQR"}],"identifier":"target-design","label":"Target Design","html_id":"target-design","implicit":true,"key":"fJNExELOi9"},{"type":"heading","depth":3,"position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"1) Canonical Build Identity","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"IVgPwJNGe8"}],"identifier":"id-1-canonical-build-identity","label":"1) Canonical Build Identity","html_id":"id-1-canonical-build-identity","implicit":true,"key":"So80sx938d"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":43,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep image fingerprinting as the environment identity key.","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"PWSBZr5qMV"}],"key":"chIAIdFXyG"}],"key":"JPpuCYJvcA"},{"type":"listItem","spread":true,"position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Expand fingerprint inputs to match policy: ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"W0OjyrzJGx"},{"type":"inlineCode","value":"Dockerfile","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"FGG0U2unvl"},{"type":"text","value":", ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"Viy01sMkEe"},{"type":"inlineCode","value":"Makefile","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"X5JEDjySOh"},{"type":"text","value":", ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"dInMKL4yhs"},{"type":"inlineCode","value":"install.sh","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"QLKyNYPLBK"},{"type":"text","value":", ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"OTnZpbrmGV"},{"type":"inlineCode","value":"src-scripts/**","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"UIY54FJ8pp"},{"type":"text","value":", and ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"VAwbT5u5CR"},{"type":"inlineCode","value":"rust-toolchain.toml","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"wTX4g6s0zX"},{"type":"text","value":".","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"OtcCMqhagl"}],"key":"XZQEnZBguZ"}],"key":"dPSreNBfH6"},{"type":"listItem","spread":true,"position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Publish ","key":"a3jG0ROgTn"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"mnyPHoYR16"}],"key":"ZfEQrBslbu"},{"type":"text","value":" image as ","key":"SY2eLOXep4"},{"type":"inlineCode","value":"ghcr.io/<repo>-ci:<fingerprint>","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"GrNHIAeeeX"},{"type":"text","value":" and keep ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"oKz0wrTFQl"},{"type":"inlineCode","value":":latest","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"msGxWk7AxZ"},{"type":"text","value":" as convenience only.","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"XH8Lx5uZlc"}],"key":"NhiaMupwsG"}],"key":"Vg7UKMot26"},{"type":"listItem","spread":true,"position":{"start":{"line":46,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Use immutable digest pinning in ","key":"zlbkP4zmjq"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"Ta7C6tLxlj"}],"key":"rRSMh2lXk9"},{"type":"text","value":" job container declarations when practical.","key":"B3YbMQnFQy"}],"key":"C5tmwW0nBk"}],"key":"Gt0su5EOnF"}],"key":"H6mjbnbVeN"},{"type":"heading","depth":3,"position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"text","value":"2) Unified Cache Contract","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"U8noTYKobo"}],"identifier":"id-2-unified-cache-contract","label":"2) Unified Cache Contract","html_id":"id-2-unified-cache-contract","implicit":true,"key":"abFrYbAdYm"},{"type":"paragraph","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"text","value":"Define one configurable cache root:","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"lz6wHxtr5i"}],"key":"ga6dd0omkw"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":52,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"zgNDg7EOLr"},{"type":"text","value":" (default ","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"kL2vDSIzTA"},{"type":"inlineCode","value":".cargo-cache","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"cGZ1kUygev"},{"type":"text","value":")","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"cXvFhIg57k"}],"key":"kiHYjNDGUZ"}],"key":"Nw0UE5qIcZ"},{"type":"listItem","spread":true,"position":{"start":{"line":53,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Subdirs:","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"z67u1k83Nw"}],"key":"lCfuavbnLZ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":54,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/registry","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"BBDkmf3gen"}],"key":"aZcFJ4XMHE"}],"key":"XnREUtsLLG"},{"type":"listItem","spread":true,"position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/git","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"T8GXJxOfoT"}],"key":"s87LKfhZq5"}],"key":"CUQzYPXEL4"},{"type":"listItem","spread":true,"position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/sccache","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"PaROVif6Jq"}],"key":"Whokairjqc"}],"key":"MwGhGZiuAH"},{"type":"listItem","spread":true,"position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/target-ci","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"pF88Ftr4gR"}],"key":"GulEaJlrIj"}],"key":"KDYm9NJFcE"},{"type":"listItem","spread":true,"position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/image-tar","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"d6McnCa4eA"}],"key":"erw4HmzJG7"}],"key":"ZkAGfHejng"},{"type":"listItem","spread":true,"position":{"start":{"line":59,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/buildx","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"WMVpgGTuR7"}],"key":"UkVOAgMCLF"}],"key":"Szg7TS2vUl"}],"key":"QNoFKhgccG"}],"key":"ylQNHugkYl"}],"key":"QkFhZyncb4"},{"type":"paragraph","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"text","value":"Local container mounts:","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"JoR6cDTlR0"}],"key":"bdfQggCETS"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":63,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cargo registry/git -> mounted from ","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"EGrYtkoKmx"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"l69UMoERzw"},{"type":"text","value":".","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"lM7FZQF0QQ"}],"key":"ZsqDSO4JZN"}],"key":"BJpyuVgBpZ"},{"type":"listItem","spread":true,"position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"SCCACHE_DIR","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"tULlDHvvv1"},{"type":"text","value":" -> mounted from ","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"TtPPCV0Utu"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT/sccache","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"jqzd70gSV7"},{"type":"text","value":".","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"tKxhqOf12D"}],"key":"L9nqYAdOWO"}],"key":"EdOuEa1dtw"},{"type":"listItem","spread":true,"position":{"start":{"line":65,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"CARGO_TARGET_DIR","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"Vgm0XmeSzZ"},{"type":"text","value":" -> mounted from ","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"G6IZo0VAlD"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT/target-ci","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"CtHD3ub6T1"},{"type":"text","value":".","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"kdeVcqYpps"}],"key":"GbSxZZISGR"}],"key":"KerkHki7Ca"}],"key":"LeAKFHtT4V"},{"type":"paragraph","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"text","value":"Guidance:","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"key":"Ndo8PavQ6w"}],"key":"jxW0YuFfCZ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":69,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Do not mount host ","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"pgwQ6n9beL"},{"type":"inlineCode","value":"~/.cargo","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"Xw3fQ8Q6Aj"},{"type":"text","value":" directly by default; use project-scoped cache roots for reproducibility and isolation.","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"i3ELiEVF3w"}],"key":"y5ggo25POv"}],"key":"JmAHuN7W9g"},{"type":"listItem","spread":true,"position":{"start":{"line":70,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep target caches scoped by Rust version + fingerprint + feature set to avoid artifact poisoning.","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"SzRyXzMyvC"}],"key":"Czf1Td2ZJX"}],"key":"J7cVFKxGUF"}],"key":"khPOic8uLj"},{"type":"paragraph","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"children":[{"type":"text","value":"Environment nuance impact:","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"key":"L76n1u7Krn"}],"key":"AL8VazjZJN"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":74,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"A standardized cache root does not remove environment-specific capability differences (kernel, filesystem semantics, CPU arch, cgroup limits, sandboxing).","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"hcLe1sUOJR"}],"key":"Rh9JvnYssn"}],"key":"BvYevT0CiD"},{"type":"listItem","spread":true,"position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The container image and run flags define behavior parity; the cache root only standardizes persisted artifacts and speeds reruns.","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"WHRn71kwuV"}],"key":"k2SdAJAYsO"}],"key":"AjCS6uN6Gy"},{"type":"listItem","spread":true,"position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cache key dimensions should include ","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"XMH3PhkVip"},{"type":"inlineCode","value":"os/arch","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"OS9ADss1PO"},{"type":"text","value":" and runtime profile (for example Linux amd64 container vs local native macOS) to avoid cross-environment contamination.","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"D3YxE3af2x"}],"key":"QFxXsH9d1V"}],"key":"vtoowKWrFE"},{"type":"listItem","spread":true,"position":{"start":{"line":77,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"For deterministic ","key":"Z8lXeQmhPF"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"PbVjg4u4Cx"}],"key":"wnOmzZ5CU5"},{"type":"text","value":", treat cache as an optimization only; correctness must not depend on cache hits.","key":"ZXpUdsX70m"}],"key":"bqn6xYXhwO"}],"key":"GNkPcTsO8i"}],"key":"ESSfudERpk"},{"type":"heading","depth":3,"position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"text","value":"3) GitHub Actions Cache Layers","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"qIOif22OXz"}],"identifier":"id-3-github-actions-cache-layers","label":"3) GitHub Actions Cache Layers","html_id":"id-3-github-actions-cache-layers","implicit":true,"key":"UpZXmdQGYH"},{"type":"paragraph","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"text","value":"Use layered caching, ordered by ROI:","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"wRibtVqSiV"}],"key":"NFZAgc0lj3"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":83,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"ylNlpkQPRn"}],"key":"HGmnsdASN2"},{"type":"text","value":" image reuse from ","key":"dZDUa6qTjZ"},{"type":"abbreviation","title":"GitHub Container Registry.","children":[{"type":"text","value":"GHCR","key":"JJCae2ndkQ"}],"key":"u59fu70Vro"},{"type":"text","value":" by fingerprint.","key":"RJfyqWzeSY"}],"key":"qm4yOKVInH"}],"key":"pAc23zdM0D"},{"type":"listItem","spread":true,"position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Optional image tar cache (","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"rDKJjLALwz"},{"type":"inlineCode","value":"actions/cache","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"vUKo06XLpI"},{"type":"text","value":") for fast same-runner restore.","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"g4Wr2P0lrW"}],"key":"UhbYhbppVX"}],"key":"ozJXp7GEQr"},{"type":"listItem","spread":true,"position":{"start":{"line":85,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cargo + sccache cache (","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"gwTgOlgWDe"},{"type":"inlineCode","value":"registry","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"JTtAq1E5Fn"},{"type":"text","value":", ","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"MRgmc4tKeE"},{"type":"inlineCode","value":"git","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"taS8NPDZHj"},{"type":"text","value":", ","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"AKYqtptkM7"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"cyOB2DHMCh"},{"type":"text","value":", ","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"Jc8oZHkgbC"},{"type":"inlineCode","value":"target-ci","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"ghpbEVuQ4V"},{"type":"text","value":") keyed by:","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"ROUpPsTwtc"}],"key":"DLcYHRQWqs"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":86,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"runner.os","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"nyiSU5FMcB"}],"key":"oabcBx78SJ"}],"key":"iapUcv3gXE"},{"type":"listItem","spread":true,"position":{"start":{"line":87,"column":1},"end":{"line":87,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"image fingerprint","position":{"start":{"line":87,"column":1},"end":{"line":87,"column":1}},"key":"QTAAzfihmZ"}],"key":"YR3wtW8hkp"}],"key":"hQgJQPDn2s"},{"type":"listItem","spread":true,"position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"hash(Cargo.lock, rust-toolchain.toml)","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"key":"SgKyIlDEgR"}],"key":"ppOGrSlIVl"}],"key":"hjmOy6Cvje"},{"type":"listItem","spread":true,"position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cargo feature mode (for example ","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"q6FNh5Tgqh"},{"type":"inlineCode","value":"native-browser","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"qE98rWx8zT"},{"type":"text","value":" vs lean)","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"d6e6o18vJ0"}],"key":"WfTxwwhTwd"}],"key":"fQQWcUSrdh"}],"key":"fBgkHnxNZI"}],"key":"r0S1HgnDKI"},{"type":"listItem","spread":true,"position":{"start":{"line":90,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"BuildKit cache for image builds (","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"dM6ErhUaZA"},{"type":"inlineCode","value":"cache-from/cache-to","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"dwJsvrkbBj"},{"type":"text","value":" gha, optionally registry cache manifest).","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"YIde5XzlRn"}],"key":"kRSCgwCkFZ"}],"key":"ge6ebWy6SE"}],"key":"DAwO3ebEBX"},{"type":"heading","depth":3,"position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"children":[{"type":"text","value":"4) Workflow Modularity and Check Visibility","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"key":"EwhBaJJeiB"}],"identifier":"id-4-workflow-modularity-and-check-visibility","label":"4) Workflow Modularity and Check Visibility","html_id":"id-4-workflow-modularity-and-check-visibility","implicit":true,"key":"wJkUC6Hb58"},{"type":"paragraph","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"text","value":"Single ","key":"GTW0UzkRu8"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"k8X3OAgWLb"}],"key":"Bb52ljUqGO"},{"type":"text","value":" workflow file (","key":"Op3zc7b8WC"},{"type":"inlineCode","value":".github/workflows/ci.yml","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"GehHAdG4Vq"},{"type":"text","value":") for ","key":"RBAyerXPZD"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"dBvaAO1x4z"}],"key":"M9eZLiUaLf"},{"type":"text","value":"/push on ","key":"uwfkb9Xn87"},{"type":"inlineCode","value":"main","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"x7I85496Id"},{"type":"text","value":" and ","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"FNjebVnvQm"},{"type":"inlineCode","value":"develop","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"IIiUMen8mc"},{"type":"text","value":".","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"ExVpbrA0jZ"}],"key":"pgPC2juWLV"},{"type":"paragraph","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"children":[{"type":"text","value":"Job topology:","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"key":"MwezNJpeoq"}],"key":"CWss4uBZow"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":98,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"prep","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"KY1vX1NdX0"},{"type":"text","value":": resolve fingerprint + image, restore image tar cache, emit outputs (runner job, no compile/test logic).","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"FM2EVBU6XC"}],"key":"nHkaBJEgZE"}],"key":"wxv94Wa2Xx"},{"type":"listItem","spread":true,"position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"build","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"nKYLhpg7NZ"},{"type":"text","value":": compile once (","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"XkSzFKwqVn"},{"type":"inlineCode","value":"make build-ci","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"PZcgx7FoCC"},{"type":"text","value":") and save cargo/sccache cache (","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"w6OSpA7C7R"},{"type":"strong","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"text","value":"runs inside the ","key":"JpoDqEyL03"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"Q6H5bPpXTo"}],"key":"d7vDhY93Mx"},{"type":"text","value":" container image","key":"lgBIpVoMUp"}],"key":"IqqqK8DyDB"},{"type":"text","value":").","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"S9n2O6pu8e"}],"key":"PYR7TZcudX"}],"key":"cdHLVe1TUK"},{"type":"listItem","spread":true,"position":{"start":{"line":100,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Parallel verify jobs (granular reviewer visibility):","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"key":"crb3i11oKQ"}],"key":"o5Nz0ITzjO"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":101,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"fmt","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"eiTwmRpIiG"},{"type":"text","value":" -> ","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"a2RuzO5c34"},{"type":"inlineCode","value":"make fmt-check","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"P4XLUTRWAt"},{"type":"text","value":" (or ","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"JBLTnTgghC"},{"type":"inlineCode","value":"cargo fmt --check","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"nfZd9qs3fJ"},{"type":"text","value":")","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"ESQVv5p4nU"}],"key":"abCoOlesk1"}],"key":"IW2tAbCyPh"},{"type":"listItem","spread":true,"position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"clippy","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"H0GJFmjtgO"},{"type":"text","value":" -> ","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"PtaWybGHTC"},{"type":"inlineCode","value":"make lint-clippy","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"ItbDxZKste"}],"key":"uADuxR1pyD"}],"key":"lU49mQAeL3"},{"type":"listItem","spread":true,"position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"test","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"Xtz8gN23lB"},{"type":"text","value":" -> ","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"GnewmqomdZ"},{"type":"inlineCode","value":"make test-ci","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"Gid2wbou9a"},{"type":"text","value":" (","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"WwFvcYFA5t"},{"type":"inlineCode","value":"cargo nextest run","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"bsWzXxx9rh"},{"type":"text","value":")","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"i1baFoHIMs"}],"key":"Pud7NxbmVH"}],"key":"klKlOgPc82"},{"type":"listItem","spread":true,"position":{"start":{"line":104,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"smoke","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"XgMle7TUyg"},{"type":"text","value":" -> ","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"CLynXvSI9j"},{"type":"inlineCode","value":"make smoke-test","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"w5sjiFusUr"}],"key":"d9jp3wdzMv"}],"key":"jsQyubpiDo"}],"key":"VmUsGs2XHH"}],"key":"Ld9eS3jbX8"}],"key":"PA1DRCA6Mz"},{"type":"paragraph","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"children":[{"type":"text","value":"All verify jobs:","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"key":"arq8ujr85I"}],"key":"VWNwa2t5ZL"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":108,"column":1},"end":{"line":111,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Run in the same fingerprinted ","key":"Z7MAnTtmbm"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"hUx2cp7Lf2"}],"key":"rTwpuDMajo"},{"type":"text","value":" container image as ","key":"h3Z0CKhEbA"},{"type":"inlineCode","value":"build","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"T7jDux9n3s"},{"type":"text","value":".","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"iLPofCABpp"}],"key":"UNU4gctuPd"}],"key":"IPkEduBt6A"},{"type":"listItem","spread":true,"position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Restore caches read-only.","position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"key":"ktJNJ7Qsn9"}],"key":"qTNR486oNt"}],"key":"cICLLYSgVW"},{"type":"listItem","spread":true,"position":{"start":{"line":110,"column":1},"end":{"line":111,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Avoid duplicate compilation by relying on warmed cache from ","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"ZltM5L72jX"},{"type":"inlineCode","value":"build","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"Du7eZ02qno"},{"type":"text","value":".","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"B4mgFe0zgC"}],"key":"PNUEGNSV1P"}],"key":"Hsi8UMZ6FC"}],"key":"t4FLC97mOJ"},{"type":"heading","depth":3,"position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"children":[{"type":"text","value":"5) Test Tiering Policy","position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"key":"BjAVi2jXQ4"}],"identifier":"id-5-test-tiering-policy","label":"5) Test Tiering Policy","html_id":"id-5-test-tiering-policy","implicit":true,"key":"pkmYceY9dz"},{"type":"paragraph","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"children":[{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"CnL5ipm9u4"}],"key":"WBUxB0OaXE"},{"type":"text","value":" minimal gate:","key":"HBLH7thjM1"}],"key":"AMnS71NaZM"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":116,"column":1},"end":{"line":117,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":116,"column":1},"end":{"line":117,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"fmt","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"hY5cuLFZIV"},{"type":"text","value":", ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"LdZDnrrBYp"},{"type":"inlineCode","value":"clippy","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"K3QkCqL1Uq"},{"type":"text","value":", ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"WsJCE15fge"},{"type":"inlineCode","value":"build-ci","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"seibP8kTFo"},{"type":"text","value":", ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"UX5psEebZk"},{"type":"inlineCode","value":"nextest","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"xCdKaIG0WM"},{"type":"text","value":" (default profile), ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"n8haIMtCDQ"},{"type":"inlineCode","value":"smoke","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"adLJBW1iaO"},{"type":"text","value":".","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"FOfFDLn0eL"}],"key":"mS5aCfxFuP"}],"key":"mG3Zfns51r"}],"key":"MMk8NGb3ox"},{"type":"paragraph","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"children":[{"type":"text","value":"Push to ","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"x7rdCOJdq0"},{"type":"inlineCode","value":"main/develop","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"Fbeu2M7lN0"},{"type":"text","value":" full verification:","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"XGr1nmyHri"}],"key":"llRKjcWk97"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":120,"column":1},"end":{"line":121,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":120,"column":1},"end":{"line":121,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Includes security/load/integration-heavy suites and packaging validation.","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"YfFzb6wIfK"}],"key":"TyzahRMfx6"}],"key":"CZMQBatlrW"}],"key":"j60k0OTcXv"},{"type":"paragraph","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"children":[{"type":"text","value":"Implementation note:","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"fe1ZOZ4cOw"}],"key":"zac7JdSsgc"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":124,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":124,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Encode tiers as explicit make targets (","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"CAN1plTViq"},{"type":"inlineCode","value":"test-pr","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"EJkd6oIxrn"},{"type":"text","value":", ","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"WAOHTVTO7w"},{"type":"inlineCode","value":"test-full","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"Bt3VXgsol2"},{"type":"text","value":") to keep local and ","key":"L4aNvfSMIK"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"VImvZ1qjIe"}],"key":"Ujs3e3HwM8"},{"type":"text","value":" behavior identical.","key":"sam6hFzvmU"}],"key":"e9vpjOxWO8"}],"key":"LD56FMxUh2"}],"key":"vvGXMs2oRr"},{"type":"heading","depth":3,"position":{"start":{"line":126,"column":1},"end":{"line":126,"column":1}},"children":[{"type":"text","value":"6) Local/","key":"X2DuWVVEsz"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"ET2gyZ58J9"}],"key":"UsnVZ0fFdJ"},{"type":"text","value":" Command Parity","key":"j8im0ktcyK"}],"identifier":"id-6-local-ci-command-parity","label":"6) Local/CI Command Parity","html_id":"id-6-local-ci-command-parity","implicit":true,"key":"GiULFDZEoi"},{"type":"paragraph","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"children":[{"type":"text","value":"Entrypoints:","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"egDPkweM66"}],"key":"hQ6cJqmOq5"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":130,"column":1},"end":{"line":132,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Local: ","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"key":"Y9hyVNWS5w"},{"type":"inlineCode","value":"./dflow ci-verify <target>","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"key":"BvbmX7Drvh"}],"key":"gJvSMDqkY0"}],"key":"nnnDBg5t4p"},{"type":"listItem","spread":true,"position":{"start":{"line":131,"column":1},"end":{"line":132,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"rTRe5mFP3M"}],"key":"krcEgNcfaQ"},{"type":"text","value":": ","key":"sTRW0Ihdwa"},{"type":"inlineCode","value":"make <target>","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"aXIsCwo08I"},{"type":"text","value":" from inside container job","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"pI3ahkWujT"}],"key":"VmjyZKr0WV"}],"key":"AkaAtu5WtI"}],"key":"mdS3MPZxQw"},{"type":"paragraph","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"children":[{"type":"text","value":"Rule:","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"isDWXBOXdk"}],"key":"sZqW23fFu9"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":135,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"No business logic in workflow YAML; logic lives in ","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"a8bilBIHre"},{"type":"inlineCode","value":"Makefile","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"sRtyFRMgrx"},{"type":"text","value":" and ","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"Z70dS0Gn9P"},{"type":"inlineCode","value":"src-scripts/","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"FmehPdaTod"},{"type":"text","value":".","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"wuWExnTZ3x"}],"key":"qnt6BtUcQz"}],"key":"qFGuuFo616"},{"type":"listItem","spread":true,"position":{"start":{"line":136,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"YAML only wires triggers, permissions, cache restore/save, and target invocation.","position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"key":"Tfd97IcA5G"}],"key":"VpvoYn0WJD"}],"key":"gDlTXFwe6z"}],"key":"MCaQM31jud"},{"type":"heading","depth":3,"position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"children":[{"type":"text","value":"7) Impact of Multi-Surface Refactor","position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"key":"gBG7Zi3BOU"}],"identifier":"id-7-impact-of-multi-surface-refactor","label":"7) Impact of Multi-Surface Refactor","html_id":"id-7-impact-of-multi-surface-refactor","implicit":true,"key":"KFcfyWACrz"},{"type":"paragraph","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"children":[{"type":"text","value":"If Kroki-rs adopts the multi-surface architecture (core/interface/transport/adapters), ","key":"FsYfES3ZUL"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"QZqZ3ng9jA"}],"key":"xOpOJt6rbP"},{"type":"text","value":"/container strategy should shift from a single-project pipeline to a contract-oriented workspace pipeline.","key":"oXnYrjDyEM"}],"key":"fHRsqcRo45"},{"type":"paragraph","position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"children":[{"type":"text","value":"Changes to consider:","position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"key":"Vt1bswtEgv"}],"key":"rQnHzN1Vmg"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":144,"column":1},"end":{"line":154,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":144,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Split ","key":"DkcXIKxJy8"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"EacCg2wo0J"}],"key":"Gel8YFuDv8"},{"type":"text","value":" targets by layer:","key":"m81TvVIzmB"}],"key":"eJgFz8PF0o"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":145,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"core","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"rcebbf0uAD"},{"type":"text","value":" (pure Rust, fastest checks)","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"SMACU8yv59"}],"key":"TAE5lgaKGq"}],"key":"s9qrTPJQCO"},{"type":"listItem","spread":true,"position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"interface/contracts","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"key":"IPyEhh9htp"},{"type":"text","value":" (schema compatibility checks)","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"key":"wo9iRFpTCj"}],"key":"OExBnaZjLH"}],"key":"v6OyZn4SWN"},{"type":"listItem","spread":true,"position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"transport/adapters","position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"key":"xu5bFizVAM"},{"type":"text","value":" (HTTP, ","key":"TUxDypEQdO"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"pecgp2szZI"}],"key":"yIw7LnExoe"},{"type":"text","value":", plugin integration checks)","key":"AUyLTOO0uG"}],"key":"NiG9X38TSK"}],"key":"IxGRzDHPSO"}],"key":"jVGD2RmY8T"}],"key":"RKyJnGmXhL"},{"type":"listItem","spread":true,"position":{"start":{"line":148,"column":1},"end":{"line":151,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add contract compatibility gates:","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"key":"PbIpnMvY7Y"}],"key":"dneUByHs1D"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":149,"column":1},"end":{"line":151,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"schema diff checks","position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"key":"Q3ON2jNisW"}],"key":"kgsgoEP11p"}],"key":"TBNvWexpDg"},{"type":"listItem","spread":true,"position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"backward-compatibility policy enforcement","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"key":"nCNy17RmJR"}],"key":"A6YuYL4k6M"}],"key":"hmr04olzQZ"},{"type":"listItem","spread":true,"position":{"start":{"line":151,"column":1},"end":{"line":151,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"generated type/","key":"w6SmZzfO1X"},{"type":"abbreviation","title":"Application Programming Interface.","children":[{"type":"text","value":"API","key":"WLbl3Mo8nH"}],"key":"B0tKZgvil3"},{"type":"text","value":" conformance tests","key":"FLz9gHZmfT"}],"key":"LT6eA8ThkA"}],"key":"mpPvLsdEhI"}],"key":"yfcIzFV687"}],"key":"ciWy5R2I3H"},{"type":"listItem","spread":true,"position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Partition caches by crate group and feature profile to avoid unnecessary invalidation.","position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"key":"lttwrt2Z1g"}],"key":"GlfqPtFVMa"}],"key":"nHig2vB4s0"},{"type":"listItem","spread":true,"position":{"start":{"line":153,"column":1},"end":{"line":154,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep one shared base ","key":"kmbDVIP8DW"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"rgQ3MUEOyA"}],"key":"dTZhxVzcbp"},{"type":"text","value":" image, but allow optional adapter extension images for stack-specific dependencies.","key":"Cr93cqlbL3"}],"key":"OB3U4tXy4Q"}],"key":"fiDox5Vykm"}],"key":"Ij2Mdo3QUb"},{"type":"heading","depth":3,"position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"children":[{"type":"text","value":"8) Generic Platform Model (Beyond This Repo)","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"key":"KHHPNNobQ5"}],"identifier":"id-8-generic-platform-model-beyond-this-repo","label":"8) Generic Platform Model (Beyond This Repo)","html_id":"id-8-generic-platform-model-beyond-this-repo","implicit":true,"key":"wImalzyapH"},{"type":"paragraph","position":{"start":{"line":157,"column":1},"end":{"line":157,"column":1}},"children":[{"type":"text","value":"This proposal can be generalized into a reusable ","key":"PWgl782Njd"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"upN0Uqw8nq"}],"key":"KIwFTkS4jK"},{"type":"text","value":"/dev orchestration model with stack extensions.","key":"JQHiQ6YpVh"}],"key":"vHCxRMOJDK"},{"type":"paragraph","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"children":[{"type":"text","value":"Platform core (generic):","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"key":"fZxMu4A7Md"}],"key":"vsvmLlpjU0"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":161,"column":1},"end":{"line":166,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":161,"column":1},"end":{"line":161,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Fingerprinted container identity","position":{"start":{"line":161,"column":1},"end":{"line":161,"column":1}},"key":"br27Rxzasm"}],"key":"E8QrjcV7X1"}],"key":"eI0balhmJE"},{"type":"listItem","spread":true,"position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Standard cache root contract","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"Q3c3u6nRXk"}],"key":"Fj8elyfgA2"}],"key":"N2X9NOhHaT"},{"type":"listItem","spread":true,"position":{"start":{"line":163,"column":1},"end":{"line":163,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Canonical command graph (setup/build/lint/test/package/release)","position":{"start":{"line":163,"column":1},"end":{"line":163,"column":1}},"key":"k2RjU84Apg"}],"key":"pxTEVI6k9N"}],"key":"yONx3LLPvB"},{"type":"listItem","spread":true,"position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Provider-agnostic check reporting and status mapping","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"key":"a4Y6hlO0Fe"}],"key":"A2Cs0pUJKV"}],"key":"spXeFti9y6"},{"type":"listItem","spread":true,"position":{"start":{"line":165,"column":1},"end":{"line":166,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Policy engine for ","key":"dGsq3Fn2jB"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"JwpOUPC3iN"}],"key":"I7ZQVuszOP"},{"type":"text","value":" gate tiers and branch protection contracts","key":"k5NtCwCEbp"}],"key":"Xh94x5xYvF"}],"key":"U5eh2By9cB"}],"key":"gOHsjkV7CL"},{"type":"paragraph","position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"children":[{"type":"text","value":"Stack extensions (examples):","position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"key":"OvZrgx5L0a"}],"key":"vKdlXz8axk"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":169,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":169,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Rust:","position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"key":"u54qa8QBk3"}],"key":"nmVKF3JAzx"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":170,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"cargo","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"yHg4ez5X8w"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"fFC3DSZK0M"},{"type":"inlineCode","value":"nextest","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"bLif7DxgCL"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"UMkL1KHuBq"},{"type":"inlineCode","value":"clippy","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"CntF9ZiZOx"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"BLHRyHSMFF"},{"type":"inlineCode","value":"rustfmt","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"DoZnekeRYB"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"fHGNn5cykI"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"XKD35xrJRQ"}],"key":"xgz4E60jr1"}],"key":"ZJILu7QVnW"},{"type":"listItem","spread":true,"position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"optional workspace-aware cache slicing by crate","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"key":"s5VvEa6l7h"}],"key":"YAfWGdcLdt"}],"key":"dyFlujdUrh"}],"key":"lXkBTjA8mV"}],"key":"W3DooIdO63"},{"type":"listItem","spread":true,"position":{"start":{"line":172,"column":1},"end":{"line":174,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Node.js/TypeScript:","position":{"start":{"line":172,"column":1},"end":{"line":172,"column":1}},"key":"N4LjSKMc2q"}],"key":"dzEbsxtW6n"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":173,"column":1},"end":{"line":174,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"pnpm","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"yggtx0Qj2v"},{"type":"text","value":"/","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"hK04aYdm7J"},{"type":"inlineCode","value":"npm","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"kP8xlsRcv2"},{"type":"text","value":" cache, lockfile-aware install, ","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"RQ0mAkaodI"},{"type":"inlineCode","value":"tsc --noEmit","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"h9GjJXxQJL"},{"type":"text","value":", eslint, vitest/jest","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"wvPOFJS21l"}],"key":"CTXjkroLn4"}],"key":"zodaFzy55n"},{"type":"listItem","spread":true,"position":{"start":{"line":174,"column":1},"end":{"line":174,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cache keys include package manager + lockfile + Node version","position":{"start":{"line":174,"column":1},"end":{"line":174,"column":1}},"key":"PThg55BP7q"}],"key":"gyCwdVt14n"}],"key":"RydyUKjzub"}],"key":"TvxK31jPvN"}],"key":"UtOrCoLthZ"},{"type":"listItem","spread":true,"position":{"start":{"line":175,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"React/Lit front-end:","position":{"start":{"line":175,"column":1},"end":{"line":175,"column":1}},"key":"gbQqAdBxe4"}],"key":"ZXcteBStrs"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":176,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"build/test/lint plus storybook/e2e extension gates","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"key":"BHHga1oBbQ"}],"key":"lZ6QfeyfWI"}],"key":"eLLtMVU5sf"},{"type":"listItem","spread":true,"position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"optional browser test container profile","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"N275WHJ9JO"}],"key":"kjCu8Rgvu2"}],"key":"DpqoSolUGe"}],"key":"LB8iWogzbR"}],"key":"qmL5TgxscH"},{"type":"listItem","spread":true,"position":{"start":{"line":178,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"VS Code extension:","position":{"start":{"line":178,"column":1},"end":{"line":178,"column":1}},"key":"ZLO13GhuwX"}],"key":"mYEQSLpgVK"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"vsce","position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"key":"UuWDo6WIA5"},{"type":"text","value":" packaging, extension host tests, ","key":"DnMLPtOenf"},{"type":"abbreviation","title":"Application Programming Interface.","children":[{"type":"text","value":"API","key":"umxcg756A6"}],"key":"OMio9CcuEF"},{"type":"text","value":" compatibility checks","key":"W7nDLemqPU"}],"key":"pgAZwP5YTq"}],"key":"EfGwDkAS2O"}],"key":"EUMWbPooCg"}],"key":"OZtx5eYRwX"},{"type":"listItem","spread":true,"position":{"start":{"line":180,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Tauri:","position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"key":"k7D4Gsfyhu"}],"key":"scnxOSA8lw"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":181,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":181,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"host OS dependency profiles, frontend + Rust dual cache strategy, bundling/signing stages","position":{"start":{"line":181,"column":1},"end":{"line":181,"column":1}},"key":"sPEyxZhrcD"}],"key":"oH76sAsqbb"}],"key":"aaMuJCQNOx"}],"key":"DGg90s5OfK"}],"key":"MbV3YGSiYl"}],"key":"ELRJdCP8Vl"},{"type":"paragraph","position":{"start":{"line":183,"column":1},"end":{"line":183,"column":1}},"children":[{"type":"text","value":"Principle:","position":{"start":{"line":183,"column":1},"end":{"line":183,"column":1}},"key":"bWCq0NmoJI"}],"key":"TFXd8GKEGD"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":185,"column":1},"end":{"line":186,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":185,"column":1},"end":{"line":186,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep 85-90% behavior in the core orchestrator; implement stack-specific logic as plugins/extensions.","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"key":"Muw07zVvOm"}],"key":"RJ0AafQ9Cf"}],"key":"qUd1ozCbgT"}],"key":"Q2Ln6almvY"},{"type":"heading","depth":3,"position":{"start":{"line":187,"column":1},"end":{"line":187,"column":1}},"children":[{"type":"text","value":"9) Generic ","key":"dp8FRvrO3f"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"DD4E6V7v46"}],"key":"Upf6NKkWyI"},{"type":"text","value":" Tool Design (Installable via Homebrew)","key":"sqnpB3uxHa"}],"identifier":"id-9-generic-cli-tool-design-installable-via-homebrew","label":"9) Generic CLI Tool Design (Installable via Homebrew)","html_id":"id-9-generic-cli-tool-design-installable-via-homebrew","implicit":true,"key":"jXfOWfqzkY"},{"type":"paragraph","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"children":[{"type":"text","value":"Proposed tool concept: a standalone Rust ","key":"OpbsVybial"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"KQybowG78k"}],"key":"TOpCc3skWM"},{"type":"text","value":" named ","key":"iBbe9QqurZ"},{"type":"inlineCode","value":"devflow","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"ddKFBTKnrB"},{"type":"text","value":" (alias ","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"vXLOaoOt1e"},{"type":"inlineCode","value":"dwf","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"Z9ImsyN440"},{"type":"text","value":") that abstracts ","key":"JwniUjVkQj"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"FM4hak7AhQ"}],"key":"etcJQqXFjD"},{"type":"text","value":"/container/caching complexity while preserving local developer UX.","key":"hKres4Gq5C"}],"key":"q48ocZ9N9x"},{"type":"paragraph","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"children":[{"type":"text","value":"Design goals:","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"key":"sNThZMXAqv"}],"key":"FIElcN4hAl"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":193,"column":1},"end":{"line":197,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"One command surface across projects (","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"W7o7zvPi2b"},{"type":"inlineCode","value":"devflow setup","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"ylqJg8Nn8u"},{"type":"text","value":", ","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"Vb4KBu8q3G"},{"type":"inlineCode","value":"devflow verify","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"EQeFJVRrY0"},{"type":"text","value":", ","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"VlobDyjBu3"},{"type":"inlineCode","value":"devflow ci plan","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"gjgVmbltg5"},{"type":"text","value":", ","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"xrNPfAcVVw"},{"type":"inlineCode","value":"devflow release","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"zhn1lAFfSs"},{"type":"text","value":").","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"ijI8SNGzbj"}],"key":"tP4nUCB2Zd"}],"key":"xdB4DoJwC4"},{"type":"listItem","spread":true,"position":{"start":{"line":194,"column":1},"end":{"line":194,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Project-level config with minimal required fields and optional extensions.","position":{"start":{"line":194,"column":1},"end":{"line":194,"column":1}},"key":"YJVfkxlh4n"}],"key":"dZXp7ldAHj"}],"key":"HDfJ02IRfd"},{"type":"listItem","spread":true,"position":{"start":{"line":195,"column":1},"end":{"line":195,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Deterministic container-first workflows with portable local fallback.","position":{"start":{"line":195,"column":1},"end":{"line":195,"column":1}},"key":"DPOXEBRvzN"}],"key":"oYgRq1II1d"}],"key":"I3yrdXpskS"},{"type":"listItem","spread":true,"position":{"start":{"line":196,"column":1},"end":{"line":197,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Native integration with GitHub Actions generation and validation.","position":{"start":{"line":196,"column":1},"end":{"line":196,"column":1}},"key":"QdDgcAtw8C"}],"key":"lSUPLgt8RI"}],"key":"NfRExj2fvk"}],"key":"OT4Fooc8cI"},{"type":"paragraph","position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"children":[{"type":"text","value":"Canonical command interface:","position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"key":"ca6igFo52O"}],"key":"QxomGeybhh"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":200,"column":1},"end":{"line":203,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Long form: ","position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"key":"x6BPD6MSgz"},{"type":"inlineCode","value":"devflow <command>","position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"key":"C0IzPyt7NZ"}],"key":"Jw3q2HmooW"}],"key":"Jag7OJAKnF"},{"type":"listItem","spread":true,"position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Short alias: ","position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"key":"w9tPUxI5MN"},{"type":"inlineCode","value":"dwf <command>","position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"key":"VovrCm7znq"}],"key":"a15MPGZSHw"}],"key":"Za39JxqRMo"},{"type":"listItem","spread":true,"position":{"start":{"line":202,"column":1},"end":{"line":203,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Examples: ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"DrdLb4cwqF"},{"type":"inlineCode","value":"dwf setup","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"W3B5YjafPE"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"dF8SN5ozhV"},{"type":"inlineCode","value":"dwf lint","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"ANP7gAdZXb"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"MPei9N5CVy"},{"type":"inlineCode","value":"dwf test","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"IE0HgXw86I"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"ziR1sYI7GN"},{"type":"inlineCode","value":"dwf verify","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"HHiNLpU7Ts"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"FkcozLtdQ1"},{"type":"inlineCode","value":"dwf ci generate","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"yFvJcIYaFV"}],"key":"WU61l6La8K"}],"key":"JDI4ZgCI3F"}],"key":"UObk8YZ3CI"},{"type":"paragraph","position":{"start":{"line":204,"column":1},"end":{"line":204,"column":1}},"children":[{"type":"text","value":"High-level architecture:","position":{"start":{"line":204,"column":1},"end":{"line":204,"column":1}},"key":"GJarNBprwz"}],"key":"eBaERIL0za"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":206,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":206,"column":1},"end":{"line":210,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-core","position":{"start":{"line":206,"column":1},"end":{"line":206,"column":1}},"key":"MR5o5iyMIt"},{"type":"text","value":":","position":{"start":{"line":206,"column":1},"end":{"line":206,"column":1}},"key":"pwYsA0FDwZ"}],"key":"YdEolgh5ol"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":207,"column":1},"end":{"line":210,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":207,"column":1},"end":{"line":207,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Directed Acyclic Graph.","children":[{"type":"text","value":"DAG","key":"mSJ1ZSX9qS"}],"key":"EbIAn4wbh0"},{"type":"text","value":"/task executor","key":"m86B4FRm2T"}],"key":"RcHVPUJvZ0"}],"key":"btxiGZrfeB"},{"type":"listItem","spread":true,"position":{"start":{"line":208,"column":1},"end":{"line":208,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cache key builder","position":{"start":{"line":208,"column":1},"end":{"line":208,"column":1}},"key":"SjCK28spLS"}],"key":"NHqQK90Ejh"}],"key":"IcGUinqk4S"},{"type":"listItem","spread":true,"position":{"start":{"line":209,"column":1},"end":{"line":209,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"container resolver (local daemon, ","key":"BEeUhqY6Y7"},{"type":"abbreviation","title":"GitHub Container Registry.","children":[{"type":"text","value":"GHCR","key":"twpUutGcVB"}],"key":"uBTh1fcoEZ"},{"type":"text","value":")","key":"CLokeM5b1e"}],"key":"gyUV2tnidd"}],"key":"WK3lLYk0Zl"},{"type":"listItem","spread":true,"position":{"start":{"line":210,"column":1},"end":{"line":210,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"status/check emitter abstraction","position":{"start":{"line":210,"column":1},"end":{"line":210,"column":1}},"key":"dcjAuXaRy2"}],"key":"ticBzu0IC2"}],"key":"blo4pavArG"}],"key":"IlpJb0HY1n"}],"key":"h1PaJrB488"},{"type":"listItem","spread":true,"position":{"start":{"line":211,"column":1},"end":{"line":217,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-ext-*","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"b1p24kpsws"},{"type":"text","value":":","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"s0y3GRGb6a"}],"key":"I1Ux2N1Jgg"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":212,"column":1},"end":{"line":217,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":212,"column":1},"end":{"line":212,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-rust","position":{"start":{"line":212,"column":1},"end":{"line":212,"column":1}},"key":"WruXcv1sBE"}],"key":"wTRe8Nnz3x"}],"key":"odOKsCre7a"},{"type":"listItem","spread":true,"position":{"start":{"line":213,"column":1},"end":{"line":213,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-node","position":{"start":{"line":213,"column":1},"end":{"line":213,"column":1}},"key":"CLxzkgxUFb"}],"key":"YAsT24kv6s"}],"key":"Xdc4oIRLib"},{"type":"listItem","spread":true,"position":{"start":{"line":214,"column":1},"end":{"line":214,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-frontend-react","position":{"start":{"line":214,"column":1},"end":{"line":214,"column":1}},"key":"MJtr0GHBUV"}],"key":"hsPF6G69D9"}],"key":"PHsS0MDHdK"},{"type":"listItem","spread":true,"position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-frontend-lit","position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"key":"BeDUsl8R5Q"}],"key":"IeeF3UpFiB"}],"key":"QtOgwn20zV"},{"type":"listItem","spread":true,"position":{"start":{"line":216,"column":1},"end":{"line":216,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-vscode","position":{"start":{"line":216,"column":1},"end":{"line":216,"column":1}},"key":"f1Xu3gsVV8"}],"key":"ArKm8wrnoG"}],"key":"lFbzCuPb9L"},{"type":"listItem","spread":true,"position":{"start":{"line":217,"column":1},"end":{"line":217,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-tauri","position":{"start":{"line":217,"column":1},"end":{"line":217,"column":1}},"key":"uZATcZMkpe"}],"key":"FYtRrkROaf"}],"key":"rHYzEF2fDu"}],"key":"fA9kLgf0FI"}],"key":"O5U2OsvMcE"},{"type":"listItem","spread":true,"position":{"start":{"line":218,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-gh","position":{"start":{"line":218,"column":1},"end":{"line":218,"column":1}},"key":"CIYpotXkrM"},{"type":"text","value":":","position":{"start":{"line":218,"column":1},"end":{"line":218,"column":1}},"key":"Ywknnqp83h"}],"key":"CMMBKCwozW"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"workflow templating, required-check contract generation, cache strategy synthesis","position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"key":"CAcYS7c6rx"}],"key":"UIHaJ1BKTZ"}],"key":"x3nT6jsNcD"}],"key":"gDuu192zAn"}],"key":"RImLq4VJhk"},{"type":"listItem","spread":true,"position":{"start":{"line":220,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-policy","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"HyMwGFd1Jk"},{"type":"text","value":":","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"AWav7CnlPZ"}],"key":"cSkCfdUBxf"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":221,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":221,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"branch rules, ","key":"CIruP2LjOg"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"WMIXFQYgWK"}],"key":"Rnzqacap5Z"},{"type":"text","value":" gates, release constraints, environment matrix policy","key":"upeV8oGE1J"}],"key":"aArasiKf3G"}],"key":"x1l9rm4bYH"}],"key":"fdqwzm4NaC"}],"key":"LcvqTtCabd"}],"key":"kJRmE7Dgxi"},{"type":"paragraph","position":{"start":{"line":223,"column":1},"end":{"line":223,"column":1}},"children":[{"type":"text","value":"Configuration model (example):","position":{"start":{"line":223,"column":1},"end":{"line":223,"column":1}},"key":"ZArJW8jnAv"}],"key":"l6AY4xJcl2"},{"type":"code","lang":"toml","value":"[project]\nname = \"kroki-rs\"\nstack = [\"rust\"]\n\n[container]\nimage = \"ghcr.io/org/repo-ci\"\nfingerprint_inputs = [\"Dockerfile\", \"Makefile\", \"src-scripts/**\", \"rust-toolchain.toml\"]\n\n[cache]\nroot = \".cache/devflow\"\nstrategy = \"layered\"\n\n[targets]\npr = [\"fmt\", \"lint\", \"build\", \"test\"]\nmain = [\"fmt\", \"lint\", \"build\", \"test\", \"smoke\", \"security\"]\n\n[extensions.rust]\nfeatures = [\"native-browser\"]\ntest_runner = \"nextest\"","position":{"start":{"line":225,"column":1},"end":{"line":245,"column":1}},"key":"NDX6RBSMPS"},{"type":"paragraph","position":{"start":{"line":247,"column":1},"end":{"line":247,"column":1}},"children":[{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"XKHXhmqfDm"}],"key":"aqYFUv2x47"},{"type":"text","value":" capabilities:","key":"ZB53kpVx23"}],"key":"Ljid77JYis"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":249,"column":1},"end":{"line":255,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"init","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"APZidLFQtP"},{"type":"text","value":": detect stack and scaffold config + make targets + workflow skeleton.","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"hJQBHW9Ymn"}],"key":"Mt8DsiIDhG"}],"key":"PK7q7oo1VW"},{"type":"listItem","spread":true,"position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"doctor","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"key":"sSrx2l9I71"},{"type":"text","value":": validate container engine, cache root permissions, toolchain drift.","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"key":"AyOR2idvEo"}],"key":"dMxXpxT5vW"}],"key":"v9eJ47nGNk"},{"type":"listItem","spread":true,"position":{"start":{"line":251,"column":1},"end":{"line":251,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"verify","position":{"start":{"line":251,"column":1},"end":{"line":251,"column":1}},"key":"j4XmCIEAvt"},{"type":"text","value":": run the canonical local containerized pipeline.","position":{"start":{"line":251,"column":1},"end":{"line":251,"column":1}},"key":"r8N7N3A1pi"}],"key":"jQGDHeHjBK"}],"key":"Be7XIFfmKR"},{"type":"listItem","spread":true,"position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ci generate","position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"key":"oKgBQCDwzg"},{"type":"text","value":": generate/update GitHub Actions workflow from config.","position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"key":"kKw0B9JL8p"}],"key":"OFFotdeHCD"}],"key":"TK8Bnq8WyM"},{"type":"listItem","spread":true,"position":{"start":{"line":253,"column":1},"end":{"line":253,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"cache stats/prune","position":{"start":{"line":253,"column":1},"end":{"line":253,"column":1}},"key":"cn5ytpYle4"},{"type":"text","value":": inspect and clean cache by scope/age.","position":{"start":{"line":253,"column":1},"end":{"line":253,"column":1}},"key":"RVFLz8z3lW"}],"key":"GK9oA0buek"}],"key":"F4j5Epqu2b"},{"type":"listItem","spread":true,"position":{"start":{"line":254,"column":1},"end":{"line":255,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"policy check","position":{"start":{"line":254,"column":1},"end":{"line":254,"column":1}},"key":"OaLeMKAssr"},{"type":"text","value":": ensure repo protections and required checks match config.","position":{"start":{"line":254,"column":1},"end":{"line":254,"column":1}},"key":"TSOo3rlhVO"}],"key":"QC3YJKVw0L"}],"key":"PGy549snd7"}],"key":"fom5HQp726"},{"type":"paragraph","position":{"start":{"line":256,"column":1},"end":{"line":256,"column":1}},"children":[{"type":"text","value":"Canonical command mapping by stack:","position":{"start":{"line":256,"column":1},"end":{"line":256,"column":1}},"key":"KnZJQ9e7xC"}],"key":"UozKRPtE6K"},{"type":"table","position":{"start":{"line":258,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Canonical command","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"Ms7JJWaKti"}],"key":"ZSI8O52a5B"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Rust stack","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"V1Q933xpBj"}],"key":"Ih78iMyg47"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Node/TypeScript (","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"tqmR62Dp3m"},{"type":"inlineCode","value":"pnpm","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"OgRw0CB4bg"},{"type":"text","value":")","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"HrEmIwskok"}],"key":"BSvZwNv8WZ"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"React/Lit frontend","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"zoXDZwiH3n"}],"key":"RcZqNxAlNU"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"VS Code extension","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"aDa9S2piTa"}],"key":"blXcAqLdVF"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Tauri","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"HL7AjxbuGg"}],"key":"NJUaqjqpyI"}],"key":"pDJKW2neQJ"},{"type":"tableRow","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"dwf setup","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"zJKG1rdwQl"}],"key":"tvmtqKBahB"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"rustup show","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"MflniT6k0p"},{"type":"text","value":", toolchain sync, container/image resolve","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"bIJnozfHN7"}],"key":"e7AY9mowLe"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"pnpm install --frozen-lockfile","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"UuT6YOK9eO"}],"key":"kulMs5HznC"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"pnpm install --frozen-lockfile","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"wj7amLgzf2"}],"key":"pZrGyCxwE0"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"pnpm install --frozen-lockfile","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"oarVHp6Bkd"}],"key":"LUegQmqaQJ"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"text","value":"Rust + ","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"ImijlodvAI"},{"type":"inlineCode","value":"pnpm install","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"hcty2xObaG"},{"type":"text","value":" + platform deps check","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"Qf5Q9k9K0v"}],"key":"dKQNRJQIrd"}],"key":"J7fPfpEau4"},{"type":"tableRow","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"dwf fmt","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"nol4aMFxY4"}],"key":"BFGGM6LhWv"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"pthvaJDyR6"}],"key":"aZ5St3a2b5"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -w .","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"EdfzOM9nUw"},{"type":"text","value":" (or repo formatter)","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"e3gpR5SRJK"}],"key":"ZxgJXaAsQt"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -w .","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"ahcKg1F9Rs"}],"key":"EAk8L5mZtj"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -w .","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"M6cfNb5izj"}],"key":"biOdlN3M6R"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"LgGVsSxWDp"},{"type":"text","value":" + frontend formatter","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"wJ5XuwX6tU"}],"key":"eRdrhEl6Ge"}],"key":"sr0z7TOOrd"},{"type":"tableRow","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"dwf fmt-check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"QSV4A9OHgy"}],"key":"rzoJPUe15D"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all -- --check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"fmpVtxgUu2"}],"key":"Wse7D4pY9M"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -c .","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"t7RDWnt0H9"}],"key":"TEOUxkDUv5"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -c .","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"KVRhQzPD74"}],"key":"PVMGpgiRDu"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -c .","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"qpY4aVri2Q"}],"key":"ff8sSPeKLE"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all -- --check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"jS9eF9fBFz"},{"type":"text","value":" + frontend fmt check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"DFIFzpcpAQ"}],"key":"m1c0G8bhcS"}],"key":"bXCWvSBOk3"},{"type":"tableRow","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"dwf lint","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"EWkOZFHk3f"}],"key":"uW55al9ngp"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"cargo clippy --all-targets -- -D warnings","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"vqVH9wPcbd"}],"key":"PFgAKxZLRL"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"pnpm eslint .","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"EMkr2n3hyQ"},{"type":"text","value":" + ","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"dzNE2zP38e"},{"type":"inlineCode","value":"pnpm tsc --noEmit","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"kbiWciQyEL"}],"key":"Hjqh6jEbkN"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"pnpm eslint .","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"XbpWnq6ziV"},{"type":"text","value":" + typecheck","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"g0kT2wlLbj"}],"key":"ZkKYsEn7Pc"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"pnpm eslint .","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"NNcdqG6mEr"},{"type":"text","value":" + extension typecheck","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"DvywfuCil2"}],"key":"v0n4tRyCvU"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"text","value":"Rust clippy + frontend eslint/typecheck","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"zrtsIrB0YE"}],"key":"txQrJy5GIg"}],"key":"aUeub3JUY9"},{"type":"tableRow","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"dwf build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"l8KjE9mLD5"}],"key":"Q9LRjeLYRk"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"cargo build --release","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"P73ZMIuE48"}],"key":"Un8KrnWytN"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"pnpm build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"tqYlB30Fnf"}],"key":"WzJcxYWsnM"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"pnpm build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"WOJYCNakKi"}],"key":"UDlepvNsnt"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"pnpm package","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"uB01w2jBdg"},{"type":"text","value":" / extension bundle","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"Avs1XvyExz"}],"key":"JbhEB4g8QT"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"cargo build --release","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"B0NJ6GdAZh"},{"type":"text","value":" + frontend build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"H46n2EHiAt"}],"key":"pR0VL2HHaI"}],"key":"ngMOzSzHfd"},{"type":"tableRow","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"dwf test","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"qzLiKDNV81"}],"key":"pTUhYQKbQw"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"cargo nextest run","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"ZJB0bn1It8"}],"key":"OvrxyfMKR8"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"pnpm test","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"anjpKhF7NA"},{"type":"text","value":" (vitest/jest)","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"d5D1D0eu1t"}],"key":"TZNpI8lH2m"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"pnpm test","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"jGyNkB2ZPg"}],"key":"apdQ3RboTU"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"text","value":"extension host tests","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"O0OXZI2Vop"}],"key":"cHDiEukoBM"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"cargo nextest run","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"lYOnEGOaHe"},{"type":"text","value":" + frontend tests","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"jNoiOabrtF"}],"key":"UAV20K9TQf"}],"key":"hgA1gTiAPj"},{"type":"tableRow","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"inlineCode","value":"dwf smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"fpcAJkD0iL"}],"key":"ajS1ytJsok"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"app health/","key":"xr9Tui22JV"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"tq9A5gRLLe"}],"key":"qdcjP39sDQ"},{"type":"text","value":" smoke script","key":"JQKbLBEP0D"}],"key":"hVfrz1CNSt"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"app startup + HTTP smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"WpOhQDRWrI"}],"key":"dQZ5jmlqKg"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"preview/build smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"vq1vJb25i4"}],"key":"lb4yUBaRvv"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"install/package smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"Ar6xSMCYUu"}],"key":"VzhB9BklX9"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"app startup/bundle smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"rJ44hDXAOR"}],"key":"rNtj3nl7lC"}],"key":"cgwH98lA4x"},{"type":"tableRow","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"inlineCode","value":"dwf verify","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"KOtP6ZQGtY"}],"key":"v5zvBleAsM"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"inlineCode","value":"fmt-check + lint + build + test + smoke","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"c9zMuFrI1z"}],"key":"CO0bznpTg1"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence mapped to JS toolchain","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"qQZt3mom3X"}],"key":"NTIsKPqQ1x"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"KRLkq5qHzP"}],"key":"iPUhmFwPWU"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"cizIJr5KFj"}],"key":"BiTxD88ker"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"n4dKzsjLS1"}],"key":"s6UNfHsIOj"}],"key":"iozp79Ew4O"},{"type":"tableRow","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"inlineCode","value":"dwf ci generate","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"wOO5nSVUdS"}],"key":"FCoIodtfpv"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"generate Rust-oriented ","key":"bSXA3wdKpD"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"MlvsfUC92o"}],"key":"x1XM44FqYt"},{"type":"text","value":" jobs/cache keys","key":"qTKZCgDRdN"}],"key":"unoITfx4lP"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"generate pnpm/node ","key":"WHDhqwq7bY"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"mRsFMhYeGL"}],"key":"nsMgWwX449"},{"type":"text","value":" jobs/cache keys","key":"U1YuPqyc87"}],"key":"o7N3HL8Tgh"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"add frontend/e2e job templates","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"FmqPRgwxnT"}],"key":"wS9vwxvVEo"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"add extension packaging jobs","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"Agl2d1sgso"}],"key":"g6I2GJ5ND1"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"add OS matrix + bundling/signing jobs","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"XUMusV9Um7"}],"key":"dVdk2F6BUq"}],"key":"Z9w7LW98Jo"}],"key":"M4xMdDp8qA"},{"type":"paragraph","position":{"start":{"line":270,"column":1},"end":{"line":270,"column":1}},"children":[{"type":"text","value":"Notes:","position":{"start":{"line":270,"column":1},"end":{"line":270,"column":1}},"key":"zzo8nBtKE8"}],"key":"acDpdKbnZ8"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":272,"column":1},"end":{"line":274,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":272,"column":1},"end":{"line":272,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The canonical command names are stable for developers; stack-specific executors are resolved from config extensions.","position":{"start":{"line":272,"column":1},"end":{"line":272,"column":1}},"key":"JS6527GUz4"}],"key":"jWLknUDVbQ"}],"key":"EbGLn0TgvS"},{"type":"listItem","spread":true,"position":{"start":{"line":273,"column":1},"end":{"line":274,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"dwf verify","position":{"start":{"line":273,"column":1},"end":{"line":273,"column":1}},"key":"qHos6kdxI5"},{"type":"text","value":" should always run inside the configured fingerprinted container in ","key":"li4gTzyEvR"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"h6ib7hYTeA"}],"key":"rFijm6Ocj4"},{"type":"text","value":", and optionally locally via containerized mode.","key":"j3VRCRGK0T"}],"key":"LuoOjT7XLi"}],"key":"UQ5eExqc88"}],"key":"QhQDMQ2CxJ"},{"type":"paragraph","position":{"start":{"line":275,"column":1},"end":{"line":275,"column":1}},"children":[{"type":"text","value":"Rollout path for this project:","position":{"start":{"line":275,"column":1},"end":{"line":275,"column":1}},"key":"Qx7swKxEyy"}],"key":"L7yKViWChE"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":277,"column":1},"end":{"line":280,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Phase A: treat current ","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"ci6QDwZ2j9"},{"type":"inlineCode","value":"dflow","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"L6OAUXawqz"},{"type":"text","value":" as compatibility facade and map it to ","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"NdAxhtwoZd"},{"type":"inlineCode","value":"devflow","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"qKZjeNlACz"},{"type":"text","value":"/","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"HGiZt9tRx9"},{"type":"inlineCode","value":"dwf","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"Mfgg6vm9KS"},{"type":"text","value":" commands.","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"zExK6H4Mha"}],"key":"Yr5fGUdMgB"}],"key":"fHYgPDaEUD"},{"type":"listItem","spread":true,"position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Phase B: move cache/image/check contracts into typed config.","position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"key":"LskyzbT4LT"}],"key":"tBYcxoCvAv"}],"key":"acNZ8rUpfj"},{"type":"listItem","spread":true,"position":{"start":{"line":279,"column":1},"end":{"line":280,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Phase C: keep project-specific extensions only for diagram-tool dependencies and release packaging nuances.","position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"key":"Ll1rcR5TVf"}],"key":"KDvfU4aMZB"}],"key":"YDOkjOJP6l"}],"key":"FgIJWl2W5l"},{"type":"heading","depth":2,"position":{"start":{"line":281,"column":1},"end":{"line":281,"column":1}},"children":[{"type":"text","value":"Required Repo Changes","position":{"start":{"line":281,"column":1},"end":{"line":281,"column":1}},"key":"ZbuJKHi38r"}],"identifier":"required-repo-changes","label":"Required Repo Changes","html_id":"required-repo-changes","implicit":true,"key":"IYAesGjTXd"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":283,"column":1},"end":{"line":298,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Standardize fingerprint algorithm docs + scripts to one input set.","position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"key":"Vu10eFd9h9"}],"key":"beE9iuwTNd"}],"key":"jOlQDP5MQz"},{"type":"listItem","spread":true,"position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Introduce ","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"Ms3ruOqofI"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"SRkZ8CZD94"},{"type":"text","value":" and replace hardcoded ","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"zd3krIwIVU"},{"type":"inlineCode","value":".cargo-cache","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"jkg43tF476"},{"type":"text","value":"/","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"jur307dcdE"},{"type":"inlineCode","value":"target/ci","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"uL8jHMzEJ3"},{"type":"text","value":" paths in scripts and make fragments.","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"O7FHU6WK3Y"}],"key":"HlnYvtHyVT"}],"key":"Os67M0wdsW"},{"type":"listItem","spread":true,"position":{"start":{"line":285,"column":1},"end":{"line":289,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add explicit ","key":"CTeYbR54ow"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"gZ5wnMm9Qb"}],"key":"CKaGbbhrg1"},{"type":"text","value":"-tier targets:","key":"EEIWGu47Ps"}],"key":"C7bJIBlyZc"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":286,"column":1},"end":{"line":289,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":286,"column":1},"end":{"line":286,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"fmt-check","position":{"start":{"line":286,"column":1},"end":{"line":286,"column":1}},"key":"npnpX77cY2"}],"key":"Hu9nph3RCC"}],"key":"ZOFg8b76xs"},{"type":"listItem","spread":true,"position":{"start":{"line":287,"column":1},"end":{"line":287,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"lint-clippy","position":{"start":{"line":287,"column":1},"end":{"line":287,"column":1}},"key":"wQuDaAzbU5"}],"key":"t8lnMxSJmH"}],"key":"OKjGtIhbUp"},{"type":"listItem","spread":true,"position":{"start":{"line":288,"column":1},"end":{"line":288,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"test-pr","position":{"start":{"line":288,"column":1},"end":{"line":288,"column":1}},"key":"fy35zFotCL"}],"key":"xWt1CR9aIH"}],"key":"PpBIezQq0X"},{"type":"listItem","spread":true,"position":{"start":{"line":289,"column":1},"end":{"line":289,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"test-full","position":{"start":{"line":289,"column":1},"end":{"line":289,"column":1}},"key":"jD9xXpzZx7"}],"key":"Y9SXlbi0B0"}],"key":"kIzTU6bOGL"}],"key":"bbJvOoeMBR"}],"key":"N8tPDatdam"},{"type":"listItem","spread":true,"position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Consolidate ","key":"KL3i7kQQ4H"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"dZZit0y8qH"}],"key":"oJfUsVjuwU"},{"type":"text","value":" triggers into one workflow (","key":"YY4MYypqui"},{"type":"inlineCode","value":"main","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"V5gaqiOLXE"},{"type":"text","value":", ","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"ue9Isfy6MI"},{"type":"inlineCode","value":"develop","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"Z3gJwE0nZA"},{"type":"text","value":") and keep release/package workflows separate.","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"Qd12YzswDx"}],"key":"qbkGvFfZPQ"}],"key":"NpTAdEvLYt"},{"type":"listItem","spread":true,"position":{"start":{"line":291,"column":1},"end":{"line":291,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add cache key normalization helper (script or make target) reused by both local diagnostics and GHA.","position":{"start":{"line":291,"column":1},"end":{"line":291,"column":1}},"key":"X9hDXgcSK1"}],"key":"KWcwejPXRU"}],"key":"NG5A7A6wqa"},{"type":"listItem","spread":true,"position":{"start":{"line":292,"column":1},"end":{"line":295,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add ","key":"tksQG51tM7"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"dFCTAjZUVt"}],"key":"G1a4myC04Z"},{"type":"text","value":" observability summary:","key":"LVDDxwIDRf"}],"key":"LhqnKqua8h"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":293,"column":1},"end":{"line":295,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":293,"column":1},"end":{"line":293,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"fingerprint used","position":{"start":{"line":293,"column":1},"end":{"line":293,"column":1}},"key":"NP2AgNSzHf"}],"key":"KteVlj4iMU"}],"key":"PY0U65ean8"},{"type":"listItem","spread":true,"position":{"start":{"line":294,"column":1},"end":{"line":294,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cache hit/miss stats","position":{"start":{"line":294,"column":1},"end":{"line":294,"column":1}},"key":"ZWcyHsAjO1"}],"key":"B83z3APOFr"}],"key":"I9cDMZhied"},{"type":"listItem","spread":true,"position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"sccache","position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"key":"b74hQE167f"},{"type":"text","value":" hit ratio per run","position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"key":"JXtkxNBRPS"}],"key":"PSl5k9v2KO"}],"key":"OqXo3qsTuB"}],"key":"Fcp91svs7I"}],"key":"ZOqsD2V2fr"},{"type":"listItem","spread":true,"position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add explicit note in workflow docs that ","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"XjbNVvjS38"},{"type":"inlineCode","value":"build","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"z3w748AWLC"},{"type":"text","value":" and all ","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"YmYxmSyH2g"},{"type":"inlineCode","value":"verify-*","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"AninQK8HFZ"},{"type":"text","value":" jobs execute in the fingerprinted ","key":"cfQVRL40wD"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"lkc88TLna3"}],"key":"wx4zGM39li"},{"type":"text","value":" container.","key":"pBKyxARSRP"}],"key":"gYdVRBzIWB"}],"key":"LrPgbgizpc"},{"type":"listItem","spread":true,"position":{"start":{"line":297,"column":1},"end":{"line":298,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add extension points in docs/config for future multi-surface and multi-stack orchestration.","position":{"start":{"line":297,"column":1},"end":{"line":297,"column":1}},"key":"ed1rWu24i5"}],"key":"uXo2DqNkaV"}],"key":"olL0putTQF"}],"key":"g78ituhi9Z"},{"type":"heading","depth":2,"position":{"start":{"line":299,"column":1},"end":{"line":299,"column":1}},"children":[{"type":"text","value":"Suggested Implementation Plan (v0.1.0)","position":{"start":{"line":299,"column":1},"end":{"line":299,"column":1}},"key":"Lrk6jVWkqd"}],"identifier":"suggested-implementation-plan-v0-1-0","label":"Suggested Implementation Plan (v0.1.0)","html_id":"suggested-implementation-plan-v0-1-0","implicit":true,"key":"DptrMoLbiI"},{"type":"heading","depth":3,"position":{"start":{"line":301,"column":1},"end":{"line":301,"column":1}},"children":[{"type":"text","value":"Phase 1: Cache Contract and Fingerprint Consistency","position":{"start":{"line":301,"column":1},"end":{"line":301,"column":1}},"key":"xWlmVvbftB"}],"identifier":"phase-1-cache-contract-and-fingerprint-consistency","label":"Phase 1: Cache Contract and Fingerprint Consistency","html_id":"phase-1-cache-contract-and-fingerprint-consistency","implicit":true,"key":"HK7Zk7Rwhy"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":303,"column":1},"end":{"line":306,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add ","position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"key":"MvHoXuYs9y"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"key":"jPw09AG25a"},{"type":"text","value":" contract and migrate mounts/env vars.","position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"key":"jMRTj8H52H"}],"key":"lU3d1LUFRr"}],"key":"iXUomX7TdS"},{"type":"listItem","spread":true,"position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Align fingerprint implementation and documentation.","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"key":"FsjWntm9H4"}],"key":"PKynIcbFkL"}],"key":"WChjszetlr"},{"type":"listItem","spread":true,"position":{"start":{"line":305,"column":1},"end":{"line":306,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Validate no regression in ","position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"key":"WQOM9GKWVn"},{"type":"inlineCode","value":"./dflow ci-verify","position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"key":"oEF042ZRkX"},{"type":"text","value":".","position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"key":"YWxrDtKkS6"}],"key":"fzUfRrLgZf"}],"key":"SDtnx8pJvc"}],"key":"eCD2zO2X5i"},{"type":"heading","depth":3,"position":{"start":{"line":307,"column":1},"end":{"line":307,"column":1}},"children":[{"type":"text","value":"Phase 2: ","key":"DYSojk8KIw"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"Dj1jMxiAtX"}],"key":"NPnve7ypWe"},{"type":"text","value":" Job Contract Refactor","key":"LE9HfR9MyJ"}],"identifier":"phase-2-ci-job-contract-refactor","label":"Phase 2: CI Job Contract Refactor","html_id":"phase-2-ci-job-contract-refactor","implicit":true,"key":"rORJYL36E5"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":309,"column":1},"end":{"line":312,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":309,"column":1},"end":{"line":309,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Create/adjust make targets for granular checks.","position":{"start":{"line":309,"column":1},"end":{"line":309,"column":1}},"key":"wrE0gcyFdF"}],"key":"YzWkCZmUDJ"}],"key":"lMqEfdqZbZ"},{"type":"listItem","spread":true,"position":{"start":{"line":310,"column":1},"end":{"line":310,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Refactor ","key":"fKDA4Af709"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"ktP9GbduVh"}],"key":"HVoXq949hg"},{"type":"text","value":" workflow into prep/build/parallel-verify jobs.","key":"JVB3vUhxpu"}],"key":"mpbRBeMCqa"}],"key":"DTZ5glENFM"},{"type":"listItem","spread":true,"position":{"start":{"line":311,"column":1},"end":{"line":312,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep required checks mapped to the same stable names.","position":{"start":{"line":311,"column":1},"end":{"line":311,"column":1}},"key":"F7M6uZ5lUK"}],"key":"OUBSn7AFWH"}],"key":"QAIj0jOvFr"}],"key":"nEhBa9fi0V"},{"type":"heading","depth":3,"position":{"start":{"line":313,"column":1},"end":{"line":313,"column":1}},"children":[{"type":"text","value":"Phase 3: Test Tiering + Runtime Optimization","position":{"start":{"line":313,"column":1},"end":{"line":313,"column":1}},"key":"N6K3h6UdcH"}],"identifier":"phase-3-test-tiering-runtime-optimization","label":"Phase 3: Test Tiering + Runtime Optimization","html_id":"phase-3-test-tiering-runtime-optimization","implicit":true,"key":"YCgPkt00Ux"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":315,"column":1},"end":{"line":318,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":315,"column":1},"end":{"line":315,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Formalize ","key":"UFxiQH3INu"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"DVbB0Veq6u"}],"key":"ZJx8kMeRgU"},{"type":"text","value":" vs full test tiers.","key":"Z5yZgBZ8im"}],"key":"jGQtrP6vLD"}],"key":"XFo606OAoD"},{"type":"listItem","spread":true,"position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Tune ","position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"key":"lGn1vc60F4"},{"type":"inlineCode","value":"nextest","position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"key":"bTqxH3kH9L"},{"type":"text","value":" profile and retries for flaky integration suites.","position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"key":"CJiw9o70Hx"}],"key":"QwtP6TRmuU"}],"key":"yDDoIDywnd"},{"type":"listItem","spread":true,"position":{"start":{"line":317,"column":1},"end":{"line":318,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add run summaries with cache and compile diagnostics.","position":{"start":{"line":317,"column":1},"end":{"line":317,"column":1}},"key":"owClmZAhy0"}],"key":"y6maGiWCY5"}],"key":"usrovfLPtK"}],"key":"Ltigvxplyw"},{"type":"heading","depth":3,"position":{"start":{"line":319,"column":1},"end":{"line":319,"column":1}},"children":[{"type":"text","value":"Phase 4: Hardening (Optional, Recommended)","position":{"start":{"line":319,"column":1},"end":{"line":319,"column":1}},"key":"oi8Zd5vNRw"}],"identifier":"phase-4-hardening-optional-recommended","label":"Phase 4: Hardening (Optional, Recommended)","html_id":"phase-4-hardening-optional-recommended","implicit":true,"key":"tQrE9qxV8c"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":321,"column":1},"end":{"line":324,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":321,"column":1},"end":{"line":321,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add SBOM + image scan gates.","position":{"start":{"line":321,"column":1},"end":{"line":321,"column":1}},"key":"DmDygB0k0y"}],"key":"Ac84Q7ghAa"}],"key":"ngd5h0VBl8"},{"type":"listItem","spread":true,"position":{"start":{"line":322,"column":1},"end":{"line":322,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add provenance/signing for release images.","position":{"start":{"line":322,"column":1},"end":{"line":322,"column":1}},"key":"QBDPxKz8SN"}],"key":"ylAp58c6ld"}],"key":"Oc97yfR8BE"},{"type":"listItem","spread":true,"position":{"start":{"line":323,"column":1},"end":{"line":324,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add periodic cache hygiene workflow.","position":{"start":{"line":323,"column":1},"end":{"line":323,"column":1}},"key":"bMH2JnoMqU"}],"key":"FVVi4zBy8V"}],"key":"kHmQ6zrQfo"}],"key":"Px2U8n3dIf"},{"type":"heading","depth":2,"position":{"start":{"line":325,"column":1},"end":{"line":325,"column":1}},"children":[{"type":"text","value":"Risks and Mitigations","position":{"start":{"line":325,"column":1},"end":{"line":325,"column":1}},"key":"SnpdKClnYg"}],"identifier":"risks-and-mitigations","label":"Risks and Mitigations","html_id":"risks-and-mitigations","implicit":true,"key":"BIVvte1L05"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":327,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":327,"column":1},"end":{"line":328,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Risk: over-broad target cache reuse can cause stale artifacts.","position":{"start":{"line":327,"column":1},"end":{"line":327,"column":1}},"key":"oZKKXuQqDS"}],"key":"qBWtjKn7Ls"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":328,"column":1},"end":{"line":328,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":328,"column":1},"end":{"line":328,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mitigation: include fingerprint + toolchain + feature mode in cache key.","position":{"start":{"line":328,"column":1},"end":{"line":328,"column":1}},"key":"AnOBzLfVYq"}],"key":"OJY9pI0H0c"}],"key":"HMp3EmHwe0"}],"key":"mA3HnY6MKG"}],"key":"nw8VhkdaZ3"},{"type":"listItem","spread":true,"position":{"start":{"line":329,"column":1},"end":{"line":330,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Risk: too many parallel jobs increase image pull overhead.","position":{"start":{"line":329,"column":1},"end":{"line":329,"column":1}},"key":"a5Qgqa6oD4"}],"key":"o9k2Q3JIyw"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":330,"column":1},"end":{"line":330,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":330,"column":1},"end":{"line":330,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mitigation: keep verify jobs lightweight and rely on prep/build warm cache.","position":{"start":{"line":330,"column":1},"end":{"line":330,"column":1}},"key":"Q9643BxuSU"}],"key":"AQ1EYjYPfW"}],"key":"wZbvkQ8ZLL"}],"key":"zVrzed1Yrf"}],"key":"iFOvsZKFp1"},{"type":"listItem","spread":true,"position":{"start":{"line":331,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Risk: local cache growth on macOS.","position":{"start":{"line":331,"column":1},"end":{"line":331,"column":1}},"key":"czsZMKIe3y"}],"key":"nFoS0XzzLe"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":332,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":332,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mitigation: configurable cache root + retention/prune targets.","position":{"start":{"line":332,"column":1},"end":{"line":332,"column":1}},"key":"XERfXCvwfs"}],"key":"oPyHZYHWwp"}],"key":"rfOOItzq5A"}],"key":"NnNpdJPao1"}],"key":"BIntjdIuLP"}],"key":"KQbMv8fGAF"},{"type":"heading","depth":2,"position":{"start":{"line":334,"column":1},"end":{"line":334,"column":1}},"children":[{"type":"text","value":"Decision Notes on Requested Strategies","position":{"start":{"line":334,"column":1},"end":{"line":334,"column":1}},"key":"avS4sUAikp"}],"identifier":"decision-notes-on-requested-strategies","label":"Decision Notes on Requested Strategies","html_id":"decision-notes-on-requested-strategies","implicit":true,"key":"IYYFzTsoQN"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":336,"column":1},"end":{"line":340,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":336,"column":1},"end":{"line":336,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mounting cargo registry/git/target caches is correct and should remain, with stronger key scoping and a configurable root.","position":{"start":{"line":336,"column":1},"end":{"line":336,"column":1}},"key":"VNjFulEoPs"}],"key":"XSOBEUW4xl"}],"key":"jvpY332tIB"},{"type":"listItem","spread":true,"position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"cargo nextest","position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"key":"VKDRgjYiMh"},{"type":"text","value":" is the right default for ","key":"hDihsBB66n"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"J8Yc6nkSdn"}],"key":"DqNZJ5veU6"},{"type":"text","value":"; keep it as the primary ","key":"CDqX1dYq1F"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"iW7YD3WmwR"}],"key":"v0yBIVqDxG"},{"type":"text","value":" test executor.","key":"oc0z5HhnUX"}],"key":"ksrVs2dDZm"}],"key":"zuVXSYjYS4"},{"type":"listItem","spread":true,"position":{"start":{"line":338,"column":1},"end":{"line":338,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Granular checks should remain visible as separate required statuses/check-runs.","position":{"start":{"line":338,"column":1},"end":{"line":338,"column":1}},"key":"md233jLGzg"}],"key":"ND4Nqp9inG"}],"key":"KTDs1CZgdM"},{"type":"listItem","spread":true,"position":{"start":{"line":339,"column":1},"end":{"line":340,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Single ","key":"cjdziwhjtW"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"D3ILJRtmPv"}],"key":"JLbPiLMwom"},{"type":"text","value":" workflow for ","key":"lOUuUXRq7z"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"DbkxCTSN1q"}],"key":"VGhAdFRaI8"},{"type":"text","value":"/push on ","key":"CqNNw365MI"},{"type":"inlineCode","value":"main","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"uZxSjOt018"},{"type":"text","value":" and ","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"CBKqeAfyYK"},{"type":"inlineCode","value":"develop","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"a0cH9mOAli"},{"type":"text","value":" is recommended; keep release/publish workflows independent.","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"IA40eXG7Vd"}],"key":"yOLMy2zFdv"}],"key":"q6JPRfjDiD"}],"key":"bmZ8yjfMop"},{"type":"heading","depth":2,"position":{"start":{"line":341,"column":1},"end":{"line":341,"column":1}},"children":[{"type":"text","value":"Success Criteria","position":{"start":{"line":341,"column":1},"end":{"line":341,"column":1}},"key":"C5vBZNiN4S"}],"identifier":"success-criteria","label":"Success Criteria","html_id":"success-criteria","implicit":true,"key":"eT0H32cL4K"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":343,"column":1},"end":{"line":346,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Local ","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"key":"NUwWQJRK3X"},{"type":"inlineCode","value":"./dflow ci-verify","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"key":"KzXTowMxOF"},{"type":"text","value":" and ","key":"Vk4Mnq8AqC"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"VGTl3Yl0ou"}],"key":"BO3pEYLjYT"},{"type":"text","value":" ","key":"lEYz2K3Yr4"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"VrOQWvHRMC"}],"key":"uv1vXovPpD"},{"type":"text","value":" run identical targets in the same image identity.","key":"Fdf5DQ8oGT"}],"key":"qF97b3gGKx"}],"key":"aAxmGiOGhu"},{"type":"listItem","spread":true,"position":{"start":{"line":344,"column":1},"end":{"line":344,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Warm ","key":"hqPj5aH53n"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"DA5rPnWCTz"}],"key":"Nwsrc8fbXD"},{"type":"text","value":" rerun latency significantly lower than cold runs, with measurable ","key":"BZNMU4UlWl"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":344,"column":1},"end":{"line":344,"column":1}},"key":"wSVqICWE0b"},{"type":"text","value":" and cache hit ratios.","position":{"start":{"line":344,"column":1},"end":{"line":344,"column":1}},"key":"DUAgQAOoKK"}],"key":"n51oajmKcu"}],"key":"e9418oTJn2"},{"type":"listItem","spread":true,"position":{"start":{"line":345,"column":1},"end":{"line":345,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Reviewers can identify failure domain immediately from independent check status names.","position":{"start":{"line":345,"column":1},"end":{"line":345,"column":1}},"key":"IRbl6n1ojm"}],"key":"AChW7igYwE"}],"key":"qTZw5GnvrB"},{"type":"listItem","spread":true,"position":{"start":{"line":346,"column":1},"end":{"line":346,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Pipeline logic remains modular and centralized in scripts/make targets, not duplicated in YAML.","position":{"start":{"line":346,"column":1},"end":{"line":346,"column":1}},"key":"sinEvZt0Z8"}],"key":"e6sJDnLs92"}],"key":"LE1e97f9Sq"}],"key":"cBXADqqlYO"}],"key":"i62HQt8BvE"}],"key":"z1MyhSM3We"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"v0.1.0 Implementation Execution Plan","url":"/v0-1-0-implementation-execution-plan","group":"06 Roadmap"},"next":{"title":"v0.1.0 Critical Architecture and Implementation Review","url":"/v0-1-0-critical-review","group":"06 Roadmap"}}},"domain":"http://localhost:3000"}