{"version":3,"kind":"Article","sha256":"3e8c37e5cfff3d71e559920d92f2c8fcbb9a302baa19fcb1989b5f6b03e5e9fd","slug":"v0-1-0-ci-container-redesign","location":"/developer-guide/06-roadmap/v0.1.0-ci-container-redesign.md","dependencies":[],"frontmatter":{"title":"v0.1.0 CI/Container Redesign Proposal","label":"devflow.developer-guide.roadmap.v010-ci-container-redesign","content_includes_title":false,"authors":[{"nameParsed":{"literal":"Soft Mentor","given":"Soft","family":"Mentor"},"name":"Soft Mentor","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/softmentor/devflow","abbreviations":{"ADR":"Architecture Decision Record.","API":"Application Programming Interface.","CI":"Continuous Integration.","CLI":"Command Line Interface.","DAG":"Directed Acyclic Graph.","GHCR":"GitHub Container Registry.","PR":"Pull Request."},"numbering":{"title":{"offset":2}},"source_url":"https://github.com/softmentor/devflow/blob/main/docs/developer-guide/06-roadmap/v0.1.0-ci-container-redesign.md","edit_url":"https://github.com/softmentor/devflow/edit/main/docs/developer-guide/06-roadmap/v0.1.0-ci-container-redesign.md","exports":[{"format":"md","filename":"v0.1.0-ci-container-redesign.md","url":"/devflow/build/v0.1.0-ci-container--123b81911abe937b970aaa1c5c032443.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Purpose","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"weDocbFfbt"}],"identifier":"purpose","label":"Purpose","html_id":"purpose","implicit":true,"key":"TrJGiC0Syk"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Define a reproducible, modular, and cache-efficient developer/","key":"CFbYZfLRkx"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"yOYm8EKVVt"}],"key":"qGHEtwOH26"},{"type":"text","value":" model for the v0.1.0 refactor so local macOS development and GitHub Actions execute the same verification logic with the same container identity.","key":"ERilBl06ss"}],"key":"Uxqixs3PgE"},{"type":"heading","depth":2,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Executive Summary","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"g3UNU9C8Au"}],"identifier":"executive-summary","label":"Executive Summary","html_id":"executive-summary","implicit":true,"key":"yIJ3Nk6OAY"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep the current fingerprinted ","key":"ZxjaOw6ujL"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"MiPO1QJE6k"}],"key":"JO3BpfComi"},{"type":"text","value":" image strategy and expand it into a single canonical cache architecture.","key":"nLRe9Pdp5C"}],"key":"TPCdJSOnnL"}],"key":"TYRFjgPQ0k"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Use a configurable cache root for local container runs (default: ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"G4MmugJl77"},{"type":"inlineCode","value":".cargo-cache/","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"DVMVBpNQyT"},{"type":"text","value":") with explicit volume mounts for registry, git, ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"HW1PzC3ttS"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"bbc7yCA2Ly"},{"type":"text","value":", and target outputs.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"PXjbimkLet"}],"key":"YPv4Da9diL"}],"key":"mWBK6y9gI5"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep one source of truth for commands in Make targets and scripts; GitHub Actions should only orchestrate those targets.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"stafXNWCnG"}],"key":"coEnaSe5Jq"}],"key":"RXPdMlApDz"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Use ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"Oe15WRvxck"},{"type":"inlineCode","value":"cargo nextest","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"wLkhaOriVu"},{"type":"text","value":" as the default ","key":"RSMV3Pi6f0"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"ZEFUSlVy0n"}],"key":"A9xHsCPlXG"},{"type":"text","value":" test runner, with test tiers split by change risk (minimal ","key":"I9vgj1jWHY"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"BV4BSKddWS"}],"key":"yLjr9n9QiH"},{"type":"text","value":" gate vs full verification on push/main).","key":"rkWfebJGal"}],"key":"yxaexuvVId"}],"key":"dCmc0zzidi"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Preserve granular ","key":"e7Ylivan25"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"MZKhWLHkqW"}],"key":"rCrv6fsbNO"},{"type":"text","value":" visibility (","key":"c3rpWCYs0W"},{"type":"inlineCode","value":"fmt","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"p263DONy5t"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"SqwePxcQMy"},{"type":"inlineCode","value":"clippy","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"okkYgeyAXc"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"tljCDRdXFn"},{"type":"inlineCode","value":"compile","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"pLzOyjOIpa"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"r5OG5Idf3e"},{"type":"inlineCode","value":"test","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"OhreU7tW05"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"YadIO1Yd8P"},{"type":"inlineCode","value":"smoke","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"xQDla1AFZz"},{"type":"text","value":") as separate required checks.","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"M7lNbe6Mth"}],"key":"G1tlankQf4"}],"key":"OgWwXwgpPf"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"cxCNakEzhG"},{"type":"inlineCode","value":"build","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"Ac3S5rasFD"},{"type":"text","value":" and ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"uIKP0W5qvQ"},{"type":"inlineCode","value":"verify","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"lwGmXbhI9D"},{"type":"text","value":" execution inside the containerized ","key":"ziNfnzxLsS"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"BwX1lffACo"}],"key":"Uf5yDzbhYt"},{"type":"text","value":" image to preserve environment parity with local repro.","key":"UX0rONI5oy"}],"key":"Ww1LLbYBX0"}],"key":"IWYHLooRy5"}],"key":"QynskpGW9F"},{"type":"heading","depth":2,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Current-State Evaluation","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"T1fzSaDojo"}],"identifier":"current-state-evaluation","label":"Current-State Evaluation","html_id":"current-state-evaluation","implicit":true,"key":"uMENesrW6W"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"This repository already has strong foundations:","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"S9zjLIzDsJ"}],"key":"YlkDfzwlna"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":25,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Content-addressed image fingerprinting (","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"thgo0jnNEt"},{"type":"inlineCode","value":"Dockerfile","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"p2OngxAtfs"},{"type":"text","value":" hash) and ","key":"v14OpuEePH"},{"type":"abbreviation","title":"GitHub Container Registry.","children":[{"type":"text","value":"GHCR","key":"hqq5sed9JO"}],"key":"cGFAhE0NzT"},{"type":"text","value":"-backed ","key":"PeTpKx9Q2Q"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"dIo5f25VgE"}],"key":"YRsXCdjORF"},{"type":"text","value":" image identity.","key":"CjvKlqzG6r"}],"key":"lgomqlgQPJ"}],"key":"ftx9aZn2zz"},{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Containerized local reproducibility via ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"XepLK12Od3"},{"type":"inlineCode","value":"./dflow ci-verify","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"qan7RcXvHC"},{"type":"text","value":".","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"ztFFN13GKL"}],"key":"Gx5389KLno"}],"key":"HR4X6f1fuD"},{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Shared cache directories for containerized runs: ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"fQsUb4bTWw"},{"type":"inlineCode","value":".cargo-cache/{registry,git,sccache}","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"RWgTkZIFjY"},{"type":"text","value":" and ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"ZzBORg1J3d"},{"type":"inlineCode","value":"target/ci","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"BRhrYrXSxG"},{"type":"text","value":".","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"g4EGd5hjT6"}],"key":"aTNXzIwVPO"}],"key":"YAR5ErUnWg"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"nextest","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"gLNuYSQE1x"},{"type":"text","value":" already used in ","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"z4SHWifl95"},{"type":"inlineCode","value":"test-ci","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"jbQKRDpNRL"},{"type":"text","value":".","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"BVVTCGqPzf"}],"key":"f264KEI8Ou"}],"key":"ab0Q4QFhNB"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Granular status reporting via ","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"C4g2NWyaiV"},{"type":"inlineCode","value":"gh-check-wrapper.sh","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"kWHZFbsm87"},{"type":"text","value":".","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"ZRGlfwoYnD"}],"key":"QJ4zO1etlo"}],"key":"FQ3nBuhYsY"}],"key":"w5b4xo2Ql0"},{"type":"paragraph","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Primary gaps to address for v0.1.0:","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"nT853DQTv8"}],"key":"HlRkue2uDX"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":33,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Fingerprint scope drift: docs/scripts currently state broader fingerprint inputs, while ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"pAQvA6tdgs"},{"type":"inlineCode","value":"vars.mk","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"t1shyHSAvQ"},{"type":"text","value":" hashes only ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"xyokOmr6qK"},{"type":"inlineCode","value":"Dockerfile","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"E0kXdzUjct"},{"type":"text","value":".","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"X56wnE5Czn"}],"key":"tTWqaaX6lS"}],"key":"hhj4GumqrR"},{"type":"listItem","spread":true,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cache root is not fully standardized/configurable as one top-level contract for local + ","key":"AxCJowT3Ow"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"ZgA0wbagB7"}],"key":"VhccdaOXfX"},{"type":"text","value":".","key":"UGRlEAT92q"}],"key":"XFCZ6xsh1a"}],"key":"pZZdLPMXAa"},{"type":"listItem","spread":true,"position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"CyfXLd6Yw6"}],"key":"jGXMINhw79"},{"type":"text","value":" check topology is efficient but still tightly coupled to shell backgrounding in one step; explicit check job contracts can improve maintainability.","key":"q2oi43vbKZ"}],"key":"Pl55TowDpx"}],"key":"DthRiSTJXD"},{"type":"listItem","spread":true,"position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"exCaYgJ1Nz"}],"key":"DFoofST1yq"},{"type":"text","value":" gating tiers are not explicitly documented as “minimal gate” vs “full verification”.","key":"FXafsA5UR7"}],"key":"R3udu2U3kq"}],"key":"ieWV2nCLxY"},{"type":"listItem","spread":true,"position":{"start":{"line":37,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The design is highly optimized for this Rust repository but is not yet framed as a reusable cross-stack platform.","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"UeZhZeXvFS"}],"key":"WZmQuvnYhq"}],"key":"q6SWVG1YEI"}],"key":"qbzhrIaqZL"},{"type":"heading","depth":2,"position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"text","value":"Target Design","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"bMEZA8e0ws"}],"identifier":"target-design","label":"Target Design","html_id":"target-design","implicit":true,"key":"TUfP7n1Qdp"},{"type":"heading","depth":3,"position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"1) Canonical Build Identity","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"hbjNm4BA0w"}],"identifier":"id-1-canonical-build-identity","label":"1) Canonical Build Identity","html_id":"id-1-canonical-build-identity","implicit":true,"key":"EGEAVYNlAL"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":43,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep image fingerprinting as the environment identity key.","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"xkosI2dXfo"}],"key":"FkRQTogmHc"}],"key":"PT5g656Z7f"},{"type":"listItem","spread":true,"position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Expand fingerprint inputs to match policy: ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"tT9QS4yT42"},{"type":"inlineCode","value":"Dockerfile","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"lYhlqLFe81"},{"type":"text","value":", ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"zgHLQcEVIZ"},{"type":"inlineCode","value":"Makefile","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"pxUwcFktia"},{"type":"text","value":", ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"ZCMmnduyZl"},{"type":"inlineCode","value":"install.sh","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"bzbBHzCTKC"},{"type":"text","value":", ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"szB8vSl2ha"},{"type":"inlineCode","value":"src-scripts/**","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"QlbIrcG6D3"},{"type":"text","value":", and ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"J3loBLXY0Q"},{"type":"inlineCode","value":"rust-toolchain.toml","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"eAp8Q6qrq1"},{"type":"text","value":".","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"AYynBmMLlX"}],"key":"W6NqAhf1zR"}],"key":"raQuWYMTTB"},{"type":"listItem","spread":true,"position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Publish ","key":"pf1qwTfu6u"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"LBvqd039UG"}],"key":"nMEAmNuPW0"},{"type":"text","value":" image as ","key":"xqtcUlkNRC"},{"type":"inlineCode","value":"ghcr.io/<repo>-ci:<fingerprint>","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"Gm2cF8O4F3"},{"type":"text","value":" and keep ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"wjQT5OokTv"},{"type":"inlineCode","value":":latest","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"oQxQ4oUrT1"},{"type":"text","value":" as convenience only.","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"SZU0ee7xMx"}],"key":"q1jvgniQV1"}],"key":"QruIiSYD80"},{"type":"listItem","spread":true,"position":{"start":{"line":46,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Use immutable digest pinning in ","key":"ImGr07UhUO"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"OyZUPIUQZf"}],"key":"Y1fBo9UXD4"},{"type":"text","value":" job container declarations when practical.","key":"XbVsczHTzg"}],"key":"MU4akoGhxw"}],"key":"CbKjkZydmG"}],"key":"jeoTJ2DqyN"},{"type":"heading","depth":3,"position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"text","value":"2) Unified Cache Contract","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"hsrzXfwpYW"}],"identifier":"id-2-unified-cache-contract","label":"2) Unified Cache Contract","html_id":"id-2-unified-cache-contract","implicit":true,"key":"a7xOfiruIi"},{"type":"paragraph","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"text","value":"Define one configurable cache root:","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"tj18tv2bz2"}],"key":"oKgbBWwBVJ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":52,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"iu7N7ZPprd"},{"type":"text","value":" (default ","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"nfcH21Z8UE"},{"type":"inlineCode","value":".cargo-cache","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"CB96W8w7IJ"},{"type":"text","value":")","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"sQ3IGwj3pt"}],"key":"CMJCJAg0zv"}],"key":"pGsE9tlpsJ"},{"type":"listItem","spread":true,"position":{"start":{"line":53,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Subdirs:","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"gtuRt97jlN"}],"key":"GyU8aqzEAn"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":54,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/registry","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"PKSUY85wKX"}],"key":"BwmFOcne8p"}],"key":"WeTDlgoqVZ"},{"type":"listItem","spread":true,"position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/git","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"QgJCoCEioi"}],"key":"ngOvqRIfZP"}],"key":"EL2kD45Jkk"},{"type":"listItem","spread":true,"position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/sccache","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"k0rarPD7jQ"}],"key":"mUgliIEIN9"}],"key":"EeHi6U883F"},{"type":"listItem","spread":true,"position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/target-ci","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"sVjYdvBhBx"}],"key":"ap1lHuA8nh"}],"key":"sl4iiGPWA1"},{"type":"listItem","spread":true,"position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/image-tar","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"gQ2y3KAjR2"}],"key":"F8qSVDBXX0"}],"key":"sWesX8heHn"},{"type":"listItem","spread":true,"position":{"start":{"line":59,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/buildx","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"OPgrGXZHag"}],"key":"Gykz2UDGxp"}],"key":"iIV0abbApY"}],"key":"lPfG1wg4WZ"}],"key":"gD4JpF8cUS"}],"key":"bHyXa6NSL5"},{"type":"paragraph","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"text","value":"Local container mounts:","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"WY4cYLVzIb"}],"key":"kzqP2DkEoH"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":63,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cargo registry/git -> mounted from ","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"GzaclFNXk3"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"V3sQ35P1Cg"},{"type":"text","value":".","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"YvqPcC6WvC"}],"key":"jGXKIRMt5R"}],"key":"bubR8t1QfJ"},{"type":"listItem","spread":true,"position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"SCCACHE_DIR","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"HFthB9eXni"},{"type":"text","value":" -> mounted from ","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"RwImfybrgi"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT/sccache","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"mu6jBEjfpC"},{"type":"text","value":".","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"QwYz1o2KET"}],"key":"xmYvKEX89t"}],"key":"wMTPLAo11b"},{"type":"listItem","spread":true,"position":{"start":{"line":65,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"CARGO_TARGET_DIR","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"AyO84o2yXa"},{"type":"text","value":" -> mounted from ","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"dwESay8zPC"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT/target-ci","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"awNmJtSEB4"},{"type":"text","value":".","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"urkUKPNC63"}],"key":"BJkXjkJaKx"}],"key":"Skt6nkk8dA"}],"key":"Yrw3Jdr0Yr"},{"type":"paragraph","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"text","value":"Guidance:","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"key":"TmRmAzIQW5"}],"key":"bqs3GBr7dO"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":69,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Do not mount host ","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"At8NeWfaeU"},{"type":"inlineCode","value":"~/.cargo","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"wpSXodLWwD"},{"type":"text","value":" directly by default; use project-scoped cache roots for reproducibility and isolation.","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"ygT35B7xxa"}],"key":"Kh2hR0rNO8"}],"key":"q25QKWaw7W"},{"type":"listItem","spread":true,"position":{"start":{"line":70,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep target caches scoped by Rust version + fingerprint + feature set to avoid artifact poisoning.","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"RVc7zwW8KI"}],"key":"mzJhxoKtJD"}],"key":"IXwv1mhlFj"}],"key":"bgyUNG12w5"},{"type":"paragraph","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"children":[{"type":"text","value":"Environment nuance impact:","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"key":"Envss56q8S"}],"key":"yWSWQTa1Mf"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":74,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"A standardized cache root does not remove environment-specific capability differences (kernel, filesystem semantics, CPU arch, cgroup limits, sandboxing).","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"clqmtab8Ym"}],"key":"CLTeoey2I1"}],"key":"Uzxf6lTe5J"},{"type":"listItem","spread":true,"position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The container image and run flags define behavior parity; the cache root only standardizes persisted artifacts and speeds reruns.","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"PhSFTiTmUj"}],"key":"WveIkTcnuy"}],"key":"VQxNBr5bJm"},{"type":"listItem","spread":true,"position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cache key dimensions should include ","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"s7s1INzYUb"},{"type":"inlineCode","value":"os/arch","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"wsHcfnzwul"},{"type":"text","value":" and runtime profile (for example Linux amd64 container vs local native macOS) to avoid cross-environment contamination.","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"dRWmjCHlKm"}],"key":"iPWq0LeovD"}],"key":"bmd6F2NnvT"},{"type":"listItem","spread":true,"position":{"start":{"line":77,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"For deterministic ","key":"VvZaSMwuJL"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"ZkaPdoyYpE"}],"key":"TsNr6asWUP"},{"type":"text","value":", treat cache as an optimization only; correctness must not depend on cache hits.","key":"O5ZwPLIs2Y"}],"key":"DcnVnmGCre"}],"key":"g4hRAAxxKO"}],"key":"SpdAimoEWz"},{"type":"heading","depth":3,"position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"text","value":"3) GitHub Actions Cache Layers","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"fpt4PhS0Wj"}],"identifier":"id-3-github-actions-cache-layers","label":"3) GitHub Actions Cache Layers","html_id":"id-3-github-actions-cache-layers","implicit":true,"key":"zNTyHjpP0b"},{"type":"paragraph","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"text","value":"Use layered caching, ordered by ROI:","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"lGlnqFd1Wj"}],"key":"l2xL7CdKFx"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":83,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"VFQ0IjKSMd"}],"key":"E4bHPPa7Gb"},{"type":"text","value":" image reuse from ","key":"xd1rUQt8XA"},{"type":"abbreviation","title":"GitHub Container Registry.","children":[{"type":"text","value":"GHCR","key":"MKcCE8iZPm"}],"key":"CPs0as5glG"},{"type":"text","value":" by fingerprint.","key":"bu9k7AR7ea"}],"key":"REgGmpCa5w"}],"key":"imZHnR8bp9"},{"type":"listItem","spread":true,"position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Optional image tar cache (","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"LPaOiaAZtF"},{"type":"inlineCode","value":"actions/cache","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"yIoSYI1ysB"},{"type":"text","value":") for fast same-runner restore.","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"SWxhLgGu66"}],"key":"HHTwC7b6Sh"}],"key":"Yjq6jdsK27"},{"type":"listItem","spread":true,"position":{"start":{"line":85,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cargo + sccache cache (","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"C0jSIfC4PW"},{"type":"inlineCode","value":"registry","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"BonuIwNhY8"},{"type":"text","value":", ","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"kbWqB4Nu6s"},{"type":"inlineCode","value":"git","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"DAXsmRiCBf"},{"type":"text","value":", ","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"ftpEXE7fw6"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"QANaYMsNW2"},{"type":"text","value":", ","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"iLQZiIsQLf"},{"type":"inlineCode","value":"target-ci","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"DB98URRHqz"},{"type":"text","value":") keyed by:","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"Jo20OmnRrQ"}],"key":"afPOGxV0GK"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":86,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"runner.os","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"evXtCHJpLj"}],"key":"GepvBXka67"}],"key":"U1jiwv9KFB"},{"type":"listItem","spread":true,"position":{"start":{"line":87,"column":1},"end":{"line":87,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"image fingerprint","position":{"start":{"line":87,"column":1},"end":{"line":87,"column":1}},"key":"jwK5XfwKkB"}],"key":"zxDXEt6d0a"}],"key":"Mt7EupTOAm"},{"type":"listItem","spread":true,"position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"hash(Cargo.lock, rust-toolchain.toml)","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"key":"MgEBx5e8Gp"}],"key":"O5HZ6g2L5R"}],"key":"b9FDxvLxUi"},{"type":"listItem","spread":true,"position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cargo feature mode (for example ","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"GjTkgehSir"},{"type":"inlineCode","value":"native-browser","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"fEPlzXabWG"},{"type":"text","value":" vs lean)","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"MFuySP2YAZ"}],"key":"N20ThXqvqP"}],"key":"jWG8xDlqwn"}],"key":"uDcqt5cMXd"}],"key":"DSBE02R16i"},{"type":"listItem","spread":true,"position":{"start":{"line":90,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"BuildKit cache for image builds (","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"x70CvGm6XJ"},{"type":"inlineCode","value":"cache-from/cache-to","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"xk22hQQbSq"},{"type":"text","value":" gha, optionally registry cache manifest).","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"KGGd54oY2J"}],"key":"R5Xj6csEGp"}],"key":"k92us1ROWr"}],"key":"hnYXdfDSbK"},{"type":"heading","depth":3,"position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"children":[{"type":"text","value":"4) Workflow Modularity and Check Visibility","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"key":"Qa0KyyHfhJ"}],"identifier":"id-4-workflow-modularity-and-check-visibility","label":"4) Workflow Modularity and Check Visibility","html_id":"id-4-workflow-modularity-and-check-visibility","implicit":true,"key":"w6A6APqxyY"},{"type":"paragraph","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"text","value":"Single ","key":"qVCqisO1QT"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"sAE5HJQW64"}],"key":"Jsnw1lt9ji"},{"type":"text","value":" workflow file (","key":"XGUZCXQdvg"},{"type":"inlineCode","value":".github/workflows/ci.yml","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"K4MiRZ29SY"},{"type":"text","value":") for ","key":"KZPSqi6Rz1"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"vZ33LYLbgJ"}],"key":"tbsorV11J0"},{"type":"text","value":"/push on ","key":"qL1xM4qOwp"},{"type":"inlineCode","value":"main","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"KeXFet1T5m"},{"type":"text","value":" and ","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"VzdhdaeSOr"},{"type":"inlineCode","value":"develop","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"Bd1MIUuTqg"},{"type":"text","value":".","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"xeTQRzznZZ"}],"key":"GSXKiVIx9x"},{"type":"paragraph","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"children":[{"type":"text","value":"Job topology:","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"key":"EypwvsGsFs"}],"key":"zRFkN3UO7i"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":98,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"prep","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"UveL6R0SiI"},{"type":"text","value":": resolve fingerprint + image, restore image tar cache, emit outputs (runner job, no compile/test logic).","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"K23nmozaNg"}],"key":"tGck6hguWd"}],"key":"egeP3ZuFpe"},{"type":"listItem","spread":true,"position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"build","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"e5uEVkpv0a"},{"type":"text","value":": compile once (","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"EUlikuRdy1"},{"type":"inlineCode","value":"make build-ci","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"iajOYAne3e"},{"type":"text","value":") and save cargo/sccache cache (","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"MHkAOVvl2d"},{"type":"strong","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"text","value":"runs inside the ","key":"b6FQHev2NR"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"yANUDsCaWD"}],"key":"kcos8GQOTJ"},{"type":"text","value":" container image","key":"SKIM5zOqYp"}],"key":"R4945xpS6D"},{"type":"text","value":").","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"eWteC1UEb1"}],"key":"XZ3ZkqB30z"}],"key":"KXjaPJGo3Q"},{"type":"listItem","spread":true,"position":{"start":{"line":100,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Parallel verify jobs (granular reviewer visibility):","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"key":"kCA2vOL2NW"}],"key":"mf8ZF2Rjay"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":101,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"fmt","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"OqvhSkYRhz"},{"type":"text","value":" -> ","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"W7btQtt2YR"},{"type":"inlineCode","value":"make fmt-check","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"cxKVljg9uU"},{"type":"text","value":" (or ","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"nrId5sHvpK"},{"type":"inlineCode","value":"cargo fmt --check","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"MCxfTgRwo8"},{"type":"text","value":")","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"gKkl8tWHXh"}],"key":"iueroTZtbq"}],"key":"mSdHBax86W"},{"type":"listItem","spread":true,"position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"clippy","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"XLpFmepWDr"},{"type":"text","value":" -> ","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"HHTdf6AMp7"},{"type":"inlineCode","value":"make lint-clippy","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"NBLPZaBfdR"}],"key":"ajIdgP4pWT"}],"key":"GO7OOeGe4s"},{"type":"listItem","spread":true,"position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"test","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"CuE79SEPy8"},{"type":"text","value":" -> ","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"FRwKNJutCv"},{"type":"inlineCode","value":"make test-ci","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"FYxRr7K1ut"},{"type":"text","value":" (","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"bR1NLlIGvT"},{"type":"inlineCode","value":"cargo nextest run","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"x8RWQLCMpd"},{"type":"text","value":")","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"V2JNqCZYSf"}],"key":"Izq4AhdCXb"}],"key":"TgyTFvqvwv"},{"type":"listItem","spread":true,"position":{"start":{"line":104,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"smoke","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"Dfyt67co9L"},{"type":"text","value":" -> ","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"f51lhi9wyv"},{"type":"inlineCode","value":"make smoke-test","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"SZakJsVXe5"}],"key":"c4t9zncdju"}],"key":"j7aCOV0A4M"}],"key":"UUIrY7LbM5"}],"key":"LlomfzL97u"}],"key":"OA0Ue0ZLjy"},{"type":"paragraph","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"children":[{"type":"text","value":"All verify jobs:","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"key":"II3D2XHQkN"}],"key":"BdxVZFKbLf"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":108,"column":1},"end":{"line":111,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Run in the same fingerprinted ","key":"vraNKd1N6X"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"bMVBAoIE6J"}],"key":"rZlIa5lHJC"},{"type":"text","value":" container image as ","key":"qTXt6IyQ64"},{"type":"inlineCode","value":"build","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"UDJOwEKg5q"},{"type":"text","value":".","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"LMkUngeXx3"}],"key":"vBmzSYin4B"}],"key":"zklXmYyMnV"},{"type":"listItem","spread":true,"position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Restore caches read-only.","position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"key":"l3tcUneoOl"}],"key":"TWz4SuaRiU"}],"key":"zbKGlbHk3X"},{"type":"listItem","spread":true,"position":{"start":{"line":110,"column":1},"end":{"line":111,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Avoid duplicate compilation by relying on warmed cache from ","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"DCmg11ZluH"},{"type":"inlineCode","value":"build","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"ujmyA3J3J8"},{"type":"text","value":".","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"UlR0nxn3LK"}],"key":"YTSJHiOfLe"}],"key":"JWrJnxPacf"}],"key":"S0Q2fLjQie"},{"type":"heading","depth":3,"position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"children":[{"type":"text","value":"5) Test Tiering Policy","position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"key":"LdcysVN04F"}],"identifier":"id-5-test-tiering-policy","label":"5) Test Tiering Policy","html_id":"id-5-test-tiering-policy","implicit":true,"key":"oq5OoQviZB"},{"type":"paragraph","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"children":[{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"A0G6qzECJF"}],"key":"tgEFLIVnwC"},{"type":"text","value":" minimal gate:","key":"NrtiXwlSPk"}],"key":"xSDhPzv97n"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":116,"column":1},"end":{"line":117,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":116,"column":1},"end":{"line":117,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"fmt","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"NnyQO5u7Wf"},{"type":"text","value":", ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"f2Fby97QCz"},{"type":"inlineCode","value":"clippy","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"XZfkL5srOw"},{"type":"text","value":", ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"mkJLknSj5C"},{"type":"inlineCode","value":"build-ci","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"D8Oob017jX"},{"type":"text","value":", ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"z3xFFLNN3z"},{"type":"inlineCode","value":"nextest","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"T93otBjWlB"},{"type":"text","value":" (default profile), ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"TJ7UN9JOv9"},{"type":"inlineCode","value":"smoke","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"FR3hJtqNCR"},{"type":"text","value":".","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"mXAOnScgl8"}],"key":"ZoecHaqHCn"}],"key":"hKOCiSiCKE"}],"key":"o8n8jf8bCA"},{"type":"paragraph","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"children":[{"type":"text","value":"Push to ","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"MGbMapBWI6"},{"type":"inlineCode","value":"main/develop","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"TwhdwG11eh"},{"type":"text","value":" full verification:","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"Qlq4iTEPbI"}],"key":"nBAFg19aCY"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":120,"column":1},"end":{"line":121,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":120,"column":1},"end":{"line":121,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Includes security/load/integration-heavy suites and packaging validation.","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"oLrDHi1RDV"}],"key":"J4ATLvIQHj"}],"key":"otXaeGoll0"}],"key":"nlh76IKsDK"},{"type":"paragraph","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"children":[{"type":"text","value":"Implementation note:","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"y0593er2W3"}],"key":"E2m3FNCzB9"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":124,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":124,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Encode tiers as explicit make targets (","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"XqQX8mKzZK"},{"type":"inlineCode","value":"test-pr","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"dH7WCRatus"},{"type":"text","value":", ","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"LJ1AEwTmTF"},{"type":"inlineCode","value":"test-full","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"EkDRx2vPX2"},{"type":"text","value":") to keep local and ","key":"bWAHxX1BbY"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"JVA5O7HMcO"}],"key":"ApROZAQHaF"},{"type":"text","value":" behavior identical.","key":"YqCRSBJqrI"}],"key":"mrmTFN7KFA"}],"key":"PKgLmOwWvT"}],"key":"WoyVhTa8Ay"},{"type":"heading","depth":3,"position":{"start":{"line":126,"column":1},"end":{"line":126,"column":1}},"children":[{"type":"text","value":"6) Local/","key":"lNvcTSXe1d"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"RDHCubgnjC"}],"key":"qu6dxrygLn"},{"type":"text","value":" Command Parity","key":"Epn91CMuCo"}],"identifier":"id-6-local-ci-command-parity","label":"6) Local/CI Command Parity","html_id":"id-6-local-ci-command-parity","implicit":true,"key":"CqVQIoMCp7"},{"type":"paragraph","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"children":[{"type":"text","value":"Entrypoints:","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"yILYXIdUXt"}],"key":"uxuDImZB8X"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":130,"column":1},"end":{"line":132,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Local: ","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"key":"hQuCdBd2cL"},{"type":"inlineCode","value":"./dflow ci-verify <target>","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"key":"qmsZLUaouS"}],"key":"h4yyacqcyD"}],"key":"eGyq4iHqRI"},{"type":"listItem","spread":true,"position":{"start":{"line":131,"column":1},"end":{"line":132,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"uAqMUhDQau"}],"key":"GCtch1sRck"},{"type":"text","value":": ","key":"wHvfkCahy9"},{"type":"inlineCode","value":"make <target>","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"GbjUNdWDpV"},{"type":"text","value":" from inside container job","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"SYbT0LnLES"}],"key":"nAeGZjqYLW"}],"key":"gKwjUHYky9"}],"key":"vPDmEAKjby"},{"type":"paragraph","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"children":[{"type":"text","value":"Rule:","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"L0Qzibn2PG"}],"key":"FICaxJKKij"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":135,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"No business logic in workflow YAML; logic lives in ","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"wxefUCArcg"},{"type":"inlineCode","value":"Makefile","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"s7LWOGgmAG"},{"type":"text","value":" and ","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"N5NoCZ1tDk"},{"type":"inlineCode","value":"src-scripts/","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"qsWULg0OSW"},{"type":"text","value":".","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"dAJgDdLwKZ"}],"key":"DDmTinI4tl"}],"key":"n9u0Wm2kYF"},{"type":"listItem","spread":true,"position":{"start":{"line":136,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"YAML only wires triggers, permissions, cache restore/save, and target invocation.","position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"key":"bcUk8HOpsi"}],"key":"zZGK0b88eD"}],"key":"ZIqR2EJf1x"}],"key":"KW9LaKIiQF"},{"type":"heading","depth":3,"position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"children":[{"type":"text","value":"7) Impact of Multi-Surface Refactor","position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"key":"KWwDJpeyFZ"}],"identifier":"id-7-impact-of-multi-surface-refactor","label":"7) Impact of Multi-Surface Refactor","html_id":"id-7-impact-of-multi-surface-refactor","implicit":true,"key":"qR0ge5GpZb"},{"type":"paragraph","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"children":[{"type":"text","value":"If Kroki-rs adopts the multi-surface architecture (core/interface/transport/adapters), ","key":"iubSGysmon"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"z5IxlLKVlZ"}],"key":"v5o4Ytla5M"},{"type":"text","value":"/container strategy should shift from a single-project pipeline to a contract-oriented workspace pipeline.","key":"hkPYVAa7Pa"}],"key":"TliJkPe2CL"},{"type":"paragraph","position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"children":[{"type":"text","value":"Changes to consider:","position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"key":"KzGzeVEYKS"}],"key":"KliXIg6c4N"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":144,"column":1},"end":{"line":154,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":144,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Split ","key":"GP4fpxxgih"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"GPyOccp7ew"}],"key":"wTGtX43d1d"},{"type":"text","value":" targets by layer:","key":"a0NnmfTEZK"}],"key":"G24R15XZwe"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":145,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"core","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"bCRpfDv2Cs"},{"type":"text","value":" (pure Rust, fastest checks)","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"IjIu7sruJR"}],"key":"POvkv9sbES"}],"key":"yC5jrbYmxT"},{"type":"listItem","spread":true,"position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"interface/contracts","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"key":"PMmbIlvAS2"},{"type":"text","value":" (schema compatibility checks)","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"key":"GtyatArIUA"}],"key":"smJdBDhVOj"}],"key":"faZCgkiNwY"},{"type":"listItem","spread":true,"position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"transport/adapters","position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"key":"zE54rcNQye"},{"type":"text","value":" (HTTP, ","key":"cvR7QXHnvt"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"CmlczMlT35"}],"key":"tVLDJGCQpV"},{"type":"text","value":", plugin integration checks)","key":"VcnyqJLOj4"}],"key":"ZDeh5OFMmL"}],"key":"kao0zJS9Iw"}],"key":"AXnYXVdNrB"}],"key":"dtcE4jqw6G"},{"type":"listItem","spread":true,"position":{"start":{"line":148,"column":1},"end":{"line":151,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add contract compatibility gates:","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"key":"xXBl5Bnoj0"}],"key":"V53ou10S5o"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":149,"column":1},"end":{"line":151,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"schema diff checks","position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"key":"OmY5IRN2iy"}],"key":"jfoUWSmvgT"}],"key":"KodbYjHDdN"},{"type":"listItem","spread":true,"position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"backward-compatibility policy enforcement","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"key":"BjqNtxeBpV"}],"key":"FEOUM6FCDh"}],"key":"IfuOSvXaFy"},{"type":"listItem","spread":true,"position":{"start":{"line":151,"column":1},"end":{"line":151,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"generated type/","key":"v0miDlsrKm"},{"type":"abbreviation","title":"Application Programming Interface.","children":[{"type":"text","value":"API","key":"ZqOqzRYAhz"}],"key":"B1sUptQJ4X"},{"type":"text","value":" conformance tests","key":"otDr2Fk3la"}],"key":"H3IyXnOwDq"}],"key":"Iks1ypcOx0"}],"key":"qATcFQSYIl"}],"key":"SQX2OgG7eY"},{"type":"listItem","spread":true,"position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Partition caches by crate group and feature profile to avoid unnecessary invalidation.","position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"key":"K6U2alBRMj"}],"key":"dDqvrI9Ie7"}],"key":"BIalQkr00R"},{"type":"listItem","spread":true,"position":{"start":{"line":153,"column":1},"end":{"line":154,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep one shared base ","key":"ZckLGfji8I"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"deBlVakq3N"}],"key":"TS25GyafhN"},{"type":"text","value":" image, but allow optional adapter extension images for stack-specific dependencies.","key":"xPxXjtkn3x"}],"key":"sgE9zslv1e"}],"key":"ySJdosDOBZ"}],"key":"J3IhtstWZE"},{"type":"heading","depth":3,"position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"children":[{"type":"text","value":"8) Generic Platform Model (Beyond This Repo)","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"key":"dXKkHbMPzY"}],"identifier":"id-8-generic-platform-model-beyond-this-repo","label":"8) Generic Platform Model (Beyond This Repo)","html_id":"id-8-generic-platform-model-beyond-this-repo","implicit":true,"key":"dx4BohC9rv"},{"type":"paragraph","position":{"start":{"line":157,"column":1},"end":{"line":157,"column":1}},"children":[{"type":"text","value":"This proposal can be generalized into a reusable ","key":"eW6fWgFRkY"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"TpSRpmQaSo"}],"key":"RWqqjNP4Ww"},{"type":"text","value":"/dev orchestration model with stack extensions.","key":"aPVil3JUNC"}],"key":"ze3hH1vayA"},{"type":"paragraph","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"children":[{"type":"text","value":"Platform core (generic):","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"key":"k5MAbPNMEI"}],"key":"PIgImQih3a"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":161,"column":1},"end":{"line":166,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":161,"column":1},"end":{"line":161,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Fingerprinted container identity","position":{"start":{"line":161,"column":1},"end":{"line":161,"column":1}},"key":"J2ZUApteag"}],"key":"YRh7bOXFhC"}],"key":"wsiQuT8azp"},{"type":"listItem","spread":true,"position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Standard cache root contract","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"tiYG2x9EQ3"}],"key":"RSSVvofYkg"}],"key":"q1lq1zhLiZ"},{"type":"listItem","spread":true,"position":{"start":{"line":163,"column":1},"end":{"line":163,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Canonical command graph (setup/build/lint/test/package/release)","position":{"start":{"line":163,"column":1},"end":{"line":163,"column":1}},"key":"OiYOtoiLWE"}],"key":"dGeQgrC3dT"}],"key":"r8OEk669Hm"},{"type":"listItem","spread":true,"position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Provider-agnostic check reporting and status mapping","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"key":"yXJmbCYmNy"}],"key":"lc9O4w2bjN"}],"key":"V9c0GIYryl"},{"type":"listItem","spread":true,"position":{"start":{"line":165,"column":1},"end":{"line":166,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Policy engine for ","key":"N0PsHYCqXe"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"JiqslhAxtB"}],"key":"fDF04tyv6j"},{"type":"text","value":" gate tiers and branch protection contracts","key":"kec1tYBklR"}],"key":"Rg98pGLPyV"}],"key":"HNLJWLAOg0"}],"key":"dRPK6RSX3e"},{"type":"paragraph","position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"children":[{"type":"text","value":"Stack extensions (examples):","position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"key":"qeKkdrDBIN"}],"key":"VdYSN3NXHy"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":169,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":169,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Rust:","position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"key":"Nxf3a6Ax8n"}],"key":"rQhjUDAo2d"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":170,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"cargo","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"tREYyieX5p"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"wbnfRkm6bQ"},{"type":"inlineCode","value":"nextest","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"ZuqH4DJ5Pn"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"JiKpXXrkSQ"},{"type":"inlineCode","value":"clippy","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"bkMhXojTLg"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"VlqHzHY30E"},{"type":"inlineCode","value":"rustfmt","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"YHr4GflgpV"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"uVl6mxOM1h"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"nuZPwuzkpG"}],"key":"DDLHXF4SbC"}],"key":"OLOaRVkThW"},{"type":"listItem","spread":true,"position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"optional workspace-aware cache slicing by crate","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"key":"M10MGQzi2h"}],"key":"MmsGMq1PZF"}],"key":"vmlHrtfWxu"}],"key":"avC0gR5OWk"}],"key":"xcacWrM2KJ"},{"type":"listItem","spread":true,"position":{"start":{"line":172,"column":1},"end":{"line":174,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Node.js/TypeScript:","position":{"start":{"line":172,"column":1},"end":{"line":172,"column":1}},"key":"Yo3GcrNme6"}],"key":"KkfOHQYcn1"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":173,"column":1},"end":{"line":174,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"pnpm","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"dGbE9QZZvS"},{"type":"text","value":"/","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"xsebNAUkqA"},{"type":"inlineCode","value":"npm","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"HxK6S6o9ol"},{"type":"text","value":" cache, lockfile-aware install, ","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"YxhoeMYCRg"},{"type":"inlineCode","value":"tsc --noEmit","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"aRHzVfF0Xi"},{"type":"text","value":", eslint, vitest/jest","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"Ft26q7zdZW"}],"key":"OpRVJWjch6"}],"key":"CmXhXVtyrU"},{"type":"listItem","spread":true,"position":{"start":{"line":174,"column":1},"end":{"line":174,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cache keys include package manager + lockfile + Node version","position":{"start":{"line":174,"column":1},"end":{"line":174,"column":1}},"key":"l9ZCJzI53d"}],"key":"sfAR0qcN9c"}],"key":"N409lkQ10j"}],"key":"fGzVBK1BiY"}],"key":"wMAiU9j1a6"},{"type":"listItem","spread":true,"position":{"start":{"line":175,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"React/Lit front-end:","position":{"start":{"line":175,"column":1},"end":{"line":175,"column":1}},"key":"IOneBZKHye"}],"key":"haXePZ9D5X"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":176,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"build/test/lint plus storybook/e2e extension gates","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"key":"J7Zq8EFDQO"}],"key":"eGymUP8xBZ"}],"key":"hQo3TW4KHp"},{"type":"listItem","spread":true,"position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"optional browser test container profile","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"Km0quH6QvP"}],"key":"xvL7nIxCbq"}],"key":"Ned3yJlOy0"}],"key":"lVgFLDs0Yr"}],"key":"o59yPaqbWD"},{"type":"listItem","spread":true,"position":{"start":{"line":178,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"VS Code extension:","position":{"start":{"line":178,"column":1},"end":{"line":178,"column":1}},"key":"DdQEPhkRwY"}],"key":"Icvp3057CC"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"vsce","position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"key":"C1O7Jorfqm"},{"type":"text","value":" packaging, extension host tests, ","key":"r0Gghd4gwx"},{"type":"abbreviation","title":"Application Programming Interface.","children":[{"type":"text","value":"API","key":"DNcQDRcDuY"}],"key":"XzdcVBTdCW"},{"type":"text","value":" compatibility checks","key":"YIA2bXtqg2"}],"key":"YQMz52YHQm"}],"key":"TQArovlq9s"}],"key":"Un0LiT98IS"}],"key":"eMXaT9C0qg"},{"type":"listItem","spread":true,"position":{"start":{"line":180,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Tauri:","position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"key":"tQgzVAKEMX"}],"key":"YcPhH5Kf4O"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":181,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":181,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"host OS dependency profiles, frontend + Rust dual cache strategy, bundling/signing stages","position":{"start":{"line":181,"column":1},"end":{"line":181,"column":1}},"key":"sySduiSDtv"}],"key":"d9n0UIVpFX"}],"key":"MXYiLbcrQQ"}],"key":"up4l2TO6NB"}],"key":"NConJBRQTP"}],"key":"CspSDTi6YJ"},{"type":"paragraph","position":{"start":{"line":183,"column":1},"end":{"line":183,"column":1}},"children":[{"type":"text","value":"Principle:","position":{"start":{"line":183,"column":1},"end":{"line":183,"column":1}},"key":"nUOm0G2y16"}],"key":"KqGf4VzkRg"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":185,"column":1},"end":{"line":186,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":185,"column":1},"end":{"line":186,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep 85-90% behavior in the core orchestrator; implement stack-specific logic as plugins/extensions.","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"key":"If0LFeV6Th"}],"key":"UBHrR28IBD"}],"key":"O0bA0AQ3bG"}],"key":"mhWRzmsppp"},{"type":"heading","depth":3,"position":{"start":{"line":187,"column":1},"end":{"line":187,"column":1}},"children":[{"type":"text","value":"9) Generic ","key":"CnZ8JM1YtY"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"PNWFV6J5X6"}],"key":"GXHJAbzAZe"},{"type":"text","value":" Tool Design (Installable via Homebrew)","key":"WB6lmdrMct"}],"identifier":"id-9-generic-cli-tool-design-installable-via-homebrew","label":"9) Generic CLI Tool Design (Installable via Homebrew)","html_id":"id-9-generic-cli-tool-design-installable-via-homebrew","implicit":true,"key":"UOSDfBEYRj"},{"type":"paragraph","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"children":[{"type":"text","value":"Proposed tool concept: a standalone Rust ","key":"OV3OpFZOqv"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"dr9Ny7a5Go"}],"key":"wkeFGDQwhV"},{"type":"text","value":" named ","key":"HOroJkvbqs"},{"type":"inlineCode","value":"devflow","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"YQ9SJ1TP7a"},{"type":"text","value":" (alias ","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"XhzNYDRO2g"},{"type":"inlineCode","value":"dwf","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"yceiIq5lEE"},{"type":"text","value":") that abstracts ","key":"Wn4lD0SuE4"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"F3UeApQNGQ"}],"key":"P6qsbmqhCH"},{"type":"text","value":"/container/caching complexity while preserving local developer UX.","key":"viR642Ob5m"}],"key":"NnMUFqYc3J"},{"type":"paragraph","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"children":[{"type":"text","value":"Design goals:","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"key":"x15l6l3KyK"}],"key":"zvSTfURJBa"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":193,"column":1},"end":{"line":197,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"One command surface across projects (","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"FYpjRtE0MP"},{"type":"inlineCode","value":"devflow setup","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"FdhKLvQbbz"},{"type":"text","value":", ","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"jmrZ6EeBBH"},{"type":"inlineCode","value":"devflow verify","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"HBDDUpVtD2"},{"type":"text","value":", ","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"sMP55TdUse"},{"type":"inlineCode","value":"devflow ci plan","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"uy6zS6W6QD"},{"type":"text","value":", ","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"jEvZR0olm9"},{"type":"inlineCode","value":"devflow release","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"t19NZJU2np"},{"type":"text","value":").","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"r8ZFA81Ij3"}],"key":"pQyRlDxlUT"}],"key":"W68TuApZWi"},{"type":"listItem","spread":true,"position":{"start":{"line":194,"column":1},"end":{"line":194,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Project-level config with minimal required fields and optional extensions.","position":{"start":{"line":194,"column":1},"end":{"line":194,"column":1}},"key":"dBTk0B0DDW"}],"key":"KsPhFHWxz6"}],"key":"EpfBkKju5o"},{"type":"listItem","spread":true,"position":{"start":{"line":195,"column":1},"end":{"line":195,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Deterministic container-first workflows with portable local fallback.","position":{"start":{"line":195,"column":1},"end":{"line":195,"column":1}},"key":"U6HaqZuNtS"}],"key":"qxkz2vg9T7"}],"key":"YBRyiBvNxM"},{"type":"listItem","spread":true,"position":{"start":{"line":196,"column":1},"end":{"line":197,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Native integration with GitHub Actions generation and validation.","position":{"start":{"line":196,"column":1},"end":{"line":196,"column":1}},"key":"bELzhOY8p4"}],"key":"VXegEqJWQq"}],"key":"M1YJBPeZu4"}],"key":"lz6zHVrTwr"},{"type":"paragraph","position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"children":[{"type":"text","value":"Canonical command interface:","position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"key":"zM2lp28LBu"}],"key":"xaLqaaLKXF"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":200,"column":1},"end":{"line":203,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Long form: ","position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"key":"C9ppUMuy1C"},{"type":"inlineCode","value":"devflow <command>","position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"key":"rW7ih3pjD3"}],"key":"pvlYP0mZY0"}],"key":"UANLU1P3a2"},{"type":"listItem","spread":true,"position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Short alias: ","position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"key":"ZPuZt11qZD"},{"type":"inlineCode","value":"dwf <command>","position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"key":"tdHRwAXxmz"}],"key":"O8COWgdHEs"}],"key":"ota4FaRtjN"},{"type":"listItem","spread":true,"position":{"start":{"line":202,"column":1},"end":{"line":203,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Examples: ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"UQGvSuLQLA"},{"type":"inlineCode","value":"dwf setup","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"oRIUpZXxDe"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"qrBm0Pyh2Z"},{"type":"inlineCode","value":"dwf lint","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"uKAXWAiNoF"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"IVB6C710Ln"},{"type":"inlineCode","value":"dwf test","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"UAj3lCKhhX"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"zME1QkVnBP"},{"type":"inlineCode","value":"dwf verify","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"WUJ9GVqIRI"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"nhxxuQTzcM"},{"type":"inlineCode","value":"dwf ci generate","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"mftk2QuHB6"}],"key":"XzCK2jvTJh"}],"key":"oabXeNGemK"}],"key":"zQS4kp69xh"},{"type":"paragraph","position":{"start":{"line":204,"column":1},"end":{"line":204,"column":1}},"children":[{"type":"text","value":"High-level architecture:","position":{"start":{"line":204,"column":1},"end":{"line":204,"column":1}},"key":"cLfImRsob0"}],"key":"gUGnCNH6NO"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":206,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":206,"column":1},"end":{"line":210,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-core","position":{"start":{"line":206,"column":1},"end":{"line":206,"column":1}},"key":"u6rA3sjI8U"},{"type":"text","value":":","position":{"start":{"line":206,"column":1},"end":{"line":206,"column":1}},"key":"bDpvTY53tj"}],"key":"MJbfiLK6O9"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":207,"column":1},"end":{"line":210,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":207,"column":1},"end":{"line":207,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Directed Acyclic Graph.","children":[{"type":"text","value":"DAG","key":"IxlF64ZWyY"}],"key":"wF0ai5mnb2"},{"type":"text","value":"/task executor","key":"HNKvSa0YtO"}],"key":"ku1XgK59JA"}],"key":"HhRoWW6T3J"},{"type":"listItem","spread":true,"position":{"start":{"line":208,"column":1},"end":{"line":208,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cache key builder","position":{"start":{"line":208,"column":1},"end":{"line":208,"column":1}},"key":"ay4azmXfxC"}],"key":"ARLZ9MF3zm"}],"key":"PPEPO5isFA"},{"type":"listItem","spread":true,"position":{"start":{"line":209,"column":1},"end":{"line":209,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"container resolver (local daemon, ","key":"naGU6SZDNX"},{"type":"abbreviation","title":"GitHub Container Registry.","children":[{"type":"text","value":"GHCR","key":"FVYI7qZymB"}],"key":"UR2JOfb99l"},{"type":"text","value":")","key":"AfsYvpTHPr"}],"key":"DPlrGmFGOD"}],"key":"leRMfvH44K"},{"type":"listItem","spread":true,"position":{"start":{"line":210,"column":1},"end":{"line":210,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"status/check emitter abstraction","position":{"start":{"line":210,"column":1},"end":{"line":210,"column":1}},"key":"Mzd97S5xVW"}],"key":"WpKDfnrwRq"}],"key":"ScMk9x9hK6"}],"key":"oFhJHDtfzd"}],"key":"LQti5SlW12"},{"type":"listItem","spread":true,"position":{"start":{"line":211,"column":1},"end":{"line":217,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-ext-*","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"vIiWJkct7M"},{"type":"text","value":":","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"EJEY0nLjmg"}],"key":"lKmGDvJzgQ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":212,"column":1},"end":{"line":217,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":212,"column":1},"end":{"line":212,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-rust","position":{"start":{"line":212,"column":1},"end":{"line":212,"column":1}},"key":"xZvjQNGv4p"}],"key":"hKNreaUH5Z"}],"key":"yKQsasOKxP"},{"type":"listItem","spread":true,"position":{"start":{"line":213,"column":1},"end":{"line":213,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-node","position":{"start":{"line":213,"column":1},"end":{"line":213,"column":1}},"key":"eb6jJOofo5"}],"key":"eBYiRjKAH2"}],"key":"yLczZ4SeIo"},{"type":"listItem","spread":true,"position":{"start":{"line":214,"column":1},"end":{"line":214,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-frontend-react","position":{"start":{"line":214,"column":1},"end":{"line":214,"column":1}},"key":"CIaKHoEac9"}],"key":"BIU4nVUHoC"}],"key":"k9U6JA4iuo"},{"type":"listItem","spread":true,"position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-frontend-lit","position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"key":"QBLoWoh2KR"}],"key":"PsZUip3pIs"}],"key":"dA5U2oYI5L"},{"type":"listItem","spread":true,"position":{"start":{"line":216,"column":1},"end":{"line":216,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-vscode","position":{"start":{"line":216,"column":1},"end":{"line":216,"column":1}},"key":"FA9CDnLUzq"}],"key":"IBinO0JKXw"}],"key":"NEOzzv0iXj"},{"type":"listItem","spread":true,"position":{"start":{"line":217,"column":1},"end":{"line":217,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-tauri","position":{"start":{"line":217,"column":1},"end":{"line":217,"column":1}},"key":"bMHlLhyrKc"}],"key":"psGpmBx3KP"}],"key":"mbKf49mXHM"}],"key":"brolwxg9XH"}],"key":"btjyAwdja0"},{"type":"listItem","spread":true,"position":{"start":{"line":218,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-gh","position":{"start":{"line":218,"column":1},"end":{"line":218,"column":1}},"key":"iurkyvP1VW"},{"type":"text","value":":","position":{"start":{"line":218,"column":1},"end":{"line":218,"column":1}},"key":"k3Wrazg1oJ"}],"key":"NGxQUmV4Nj"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"workflow templating, required-check contract generation, cache strategy synthesis","position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"key":"fs6DgXEumT"}],"key":"AsnqFrHdjG"}],"key":"snyf6n43gK"}],"key":"vHIqmGWVHg"}],"key":"ONalh9EOm4"},{"type":"listItem","spread":true,"position":{"start":{"line":220,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-policy","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"UbwJSPtEkP"},{"type":"text","value":":","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"KdkCMeHHU4"}],"key":"FYNtaGJxXW"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":221,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":221,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"branch rules, ","key":"XDXTwpQSsg"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"rTQi3mQdsj"}],"key":"MFcCv3GTaX"},{"type":"text","value":" gates, release constraints, environment matrix policy","key":"z304Ltx1qo"}],"key":"ZgUroxPI0Q"}],"key":"MYAHwnyUd2"}],"key":"j74XobkxSe"}],"key":"EjDH4X7hri"}],"key":"iM4iajFGjN"},{"type":"paragraph","position":{"start":{"line":223,"column":1},"end":{"line":223,"column":1}},"children":[{"type":"text","value":"Configuration model (example):","position":{"start":{"line":223,"column":1},"end":{"line":223,"column":1}},"key":"vT5dNHq83o"}],"key":"kVevWACScA"},{"type":"code","lang":"toml","value":"[project]\nname = \"kroki-rs\"\nstack = [\"rust\"]\n\n[container]\nimage = \"ghcr.io/org/repo-ci\"\nfingerprint_inputs = [\"Dockerfile\", \"Makefile\", \"src-scripts/**\", \"rust-toolchain.toml\"]\n\n[cache]\nroot = \".cache/devflow\"\nstrategy = \"layered\"\n\n[targets]\npr = [\"fmt\", \"lint\", \"build\", \"test\"]\nmain = [\"fmt\", \"lint\", \"build\", \"test\", \"smoke\", \"security\"]\n\n[extensions.rust]\nfeatures = [\"native-browser\"]\ntest_runner = \"nextest\"","position":{"start":{"line":225,"column":1},"end":{"line":245,"column":1}},"key":"Zy3U6kHa0c"},{"type":"paragraph","position":{"start":{"line":247,"column":1},"end":{"line":247,"column":1}},"children":[{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"VnA0ehmy80"}],"key":"LwLhSCHGHW"},{"type":"text","value":" capabilities:","key":"LAm7u72ik5"}],"key":"AXdU9qEWEk"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":249,"column":1},"end":{"line":255,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"init","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"HO7fLS27Ea"},{"type":"text","value":": detect stack and scaffold config + make targets + workflow skeleton.","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"D35xuv1xB4"}],"key":"L4fXQ42qpi"}],"key":"ERjZy1mzeN"},{"type":"listItem","spread":true,"position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"doctor","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"key":"Mg7vowK7Zb"},{"type":"text","value":": validate container engine, cache root permissions, toolchain drift.","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"key":"RPq1YrQwvq"}],"key":"G9icWYyXnj"}],"key":"lDGVZeyWXn"},{"type":"listItem","spread":true,"position":{"start":{"line":251,"column":1},"end":{"line":251,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"verify","position":{"start":{"line":251,"column":1},"end":{"line":251,"column":1}},"key":"dWhbklu8D9"},{"type":"text","value":": run the canonical local containerized pipeline.","position":{"start":{"line":251,"column":1},"end":{"line":251,"column":1}},"key":"X8OxO4sn4r"}],"key":"O46B08AB8J"}],"key":"pMxgTtKSeW"},{"type":"listItem","spread":true,"position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ci generate","position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"key":"ivDlUPJJG2"},{"type":"text","value":": generate/update GitHub Actions workflow from config.","position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"key":"iDsrMLecLd"}],"key":"HTYwBhtdBI"}],"key":"QHmejDXLE5"},{"type":"listItem","spread":true,"position":{"start":{"line":253,"column":1},"end":{"line":253,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"cache stats/prune","position":{"start":{"line":253,"column":1},"end":{"line":253,"column":1}},"key":"ta4ODSD4kP"},{"type":"text","value":": inspect and clean cache by scope/age.","position":{"start":{"line":253,"column":1},"end":{"line":253,"column":1}},"key":"kSDzpmlG9O"}],"key":"FNSCQjLwXf"}],"key":"h0bBKH4WsQ"},{"type":"listItem","spread":true,"position":{"start":{"line":254,"column":1},"end":{"line":255,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"policy check","position":{"start":{"line":254,"column":1},"end":{"line":254,"column":1}},"key":"RdMu171hXs"},{"type":"text","value":": ensure repo protections and required checks match config.","position":{"start":{"line":254,"column":1},"end":{"line":254,"column":1}},"key":"JnyZA1AG2s"}],"key":"jBDytHfZ0Q"}],"key":"qVx0VkeM2r"}],"key":"KRXQyrOPz7"},{"type":"paragraph","position":{"start":{"line":256,"column":1},"end":{"line":256,"column":1}},"children":[{"type":"text","value":"Canonical command mapping by stack:","position":{"start":{"line":256,"column":1},"end":{"line":256,"column":1}},"key":"Sn67tCw7N2"}],"key":"HLuwAfH0oX"},{"type":"table","position":{"start":{"line":258,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Canonical command","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"eHKS7T42wy"}],"key":"jEl45yVVoS"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Rust stack","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"rWcHeuE8Y3"}],"key":"Cw8N2nOdJu"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Node/TypeScript (","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"LA3A41cOM6"},{"type":"inlineCode","value":"pnpm","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"Nz26qUZy49"},{"type":"text","value":")","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"BukvdY7JOi"}],"key":"v51GhuIdIr"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"React/Lit frontend","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"l7AHJ8v5OU"}],"key":"EUAJDx77FP"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"VS Code extension","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"MDEZKurL4c"}],"key":"uxnh8xzujj"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Tauri","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"cSf7hS79np"}],"key":"suFrIzLfi9"}],"key":"cAuzbLFuCH"},{"type":"tableRow","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"dwf setup","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"RLk2iNG3Hf"}],"key":"aSdIcvibHG"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"rustup show","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"oTVPvbN8J2"},{"type":"text","value":", toolchain sync, container/image resolve","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"RNJRQA78RZ"}],"key":"XZ4kH9otKA"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"pnpm install --frozen-lockfile","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"GYjAPiKoJB"}],"key":"dsoOwOf1UB"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"pnpm install --frozen-lockfile","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"E0DyZRkp5W"}],"key":"O0NUaMbTwP"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"pnpm install --frozen-lockfile","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"pxrXHtYoxE"}],"key":"mkD8Hxq9nh"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"text","value":"Rust + ","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"EP1FWzH5zL"},{"type":"inlineCode","value":"pnpm install","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"OpaEvo25U5"},{"type":"text","value":" + platform deps check","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"TG2DOVDMTy"}],"key":"pusrSqyrkX"}],"key":"C2XoRZdLWV"},{"type":"tableRow","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"dwf fmt","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"EK9CnvwLS4"}],"key":"KuEWGx7Lir"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"xDKBgsloSR"}],"key":"jKi2NGFKFf"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -w .","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"ZB13C4uZcW"},{"type":"text","value":" (or repo formatter)","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"CiuOZyLKJ0"}],"key":"HA91LVAXNn"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -w .","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"zgLN6Ki9iW"}],"key":"Gc7lpF8JEg"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -w .","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"WvWAWTfqGC"}],"key":"j0ng9Eo8QT"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"cIbXM6hFQ4"},{"type":"text","value":" + frontend formatter","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"n2rGIjEYzL"}],"key":"ajV1ifWkSB"}],"key":"lIWf4ShSxo"},{"type":"tableRow","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"dwf fmt-check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"YqXMb6XRSI"}],"key":"R0OS3PlryK"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all -- --check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"yas3fvBJFK"}],"key":"N0nq5FWGVV"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -c .","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"oL5KHYgP3q"}],"key":"JNi9xYpQy4"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -c .","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"GvnIPt9F5O"}],"key":"iPZumc0BMt"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -c .","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"YDcbTtFoe4"}],"key":"CDf65dGcyN"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all -- --check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"K6uGKtC7dV"},{"type":"text","value":" + frontend fmt check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"FFHPQW9eSY"}],"key":"rR4lMy3tHq"}],"key":"y4wnWlBaCn"},{"type":"tableRow","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"dwf lint","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"Q7nJropTTp"}],"key":"ssJxMSmmhv"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"cargo clippy --all-targets -- -D warnings","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"q1oNtj4duC"}],"key":"fG8oTtXEAf"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"pnpm eslint .","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"xihXe6h4E4"},{"type":"text","value":" + ","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"aTR6Y9ISaj"},{"type":"inlineCode","value":"pnpm tsc --noEmit","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"P8Cd0wOeEr"}],"key":"pqtOgR7cHM"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"pnpm eslint .","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"G2hjxoIXTS"},{"type":"text","value":" + typecheck","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"GEMO3rWR47"}],"key":"qKzfZ8XEk6"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"pnpm eslint .","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"A0VmUZHE40"},{"type":"text","value":" + extension typecheck","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"NBRkrCx5Ht"}],"key":"RHy9jMHSdo"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"text","value":"Rust clippy + frontend eslint/typecheck","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"BpBDCXIjs5"}],"key":"C2nC2lFNay"}],"key":"hRNKrkHKVF"},{"type":"tableRow","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"dwf build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"MWEpEXvGHz"}],"key":"oQApYerG9L"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"cargo build --release","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"pf7f1Ahw1s"}],"key":"jvaLu8ohWr"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"pnpm build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"BYbUtHgODI"}],"key":"m0jzLPKvFp"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"pnpm build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"X5rcscFu4E"}],"key":"vQAmRiRdBv"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"pnpm package","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"ttF6PLlDRF"},{"type":"text","value":" / extension bundle","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"JdgAmGMv9C"}],"key":"YvbMhaFIEz"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"cargo build --release","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"G1VEjH7yGR"},{"type":"text","value":" + frontend build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"rSeakzlPNv"}],"key":"DmAT6mmel5"}],"key":"KWxLn9zvJ2"},{"type":"tableRow","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"dwf test","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"EX7ybT8gVY"}],"key":"NUUrOOYn66"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"cargo nextest run","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"JSUauSvoOc"}],"key":"b5sxSkiRZc"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"pnpm test","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"cP1XvEeQ0z"},{"type":"text","value":" (vitest/jest)","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"GyapouPc1U"}],"key":"LfOfvYwV1g"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"pnpm test","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"bFGpUchbw7"}],"key":"y2xWgbp6dR"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"text","value":"extension host tests","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"KB7gRj8h71"}],"key":"wLiw8HZgaV"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"cargo nextest run","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"AMDMQYLTAj"},{"type":"text","value":" + frontend tests","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"Uy94bGNUgJ"}],"key":"K2ALRXA2hl"}],"key":"jRJqODllQ0"},{"type":"tableRow","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"inlineCode","value":"dwf smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"BhgRje4Ypx"}],"key":"hF0y2dZe4w"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"app health/","key":"JGQ591u8Zd"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"J0T086ZstG"}],"key":"lJuorbHQ4u"},{"type":"text","value":" smoke script","key":"WzMLAhhZu6"}],"key":"lX4aFjNhXl"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"app startup + HTTP smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"OfgAtfJKB1"}],"key":"ES0SqtAvjn"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"preview/build smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"b0oT4DNYOg"}],"key":"FNoWfj1Iv6"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"install/package smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"jVzGnqIBzy"}],"key":"IIFE01lOYU"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"app startup/bundle smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"l1gD5694Ll"}],"key":"to4wEFmKmp"}],"key":"W7RuFKWfbK"},{"type":"tableRow","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"inlineCode","value":"dwf verify","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"lKg0pz8vJM"}],"key":"QEIpnIIVIP"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"inlineCode","value":"fmt-check + lint + build + test + smoke","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"CSiZLav1hQ"}],"key":"E0BvoJgYtp"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence mapped to JS toolchain","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"vLoGYoAoAT"}],"key":"jNJc6R9VJU"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"sWSqurXZMj"}],"key":"TpqfYdMjpq"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"SY1PiRwswm"}],"key":"oZDYRIbadM"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"DlXQmZLbTm"}],"key":"ia1jx0NBVz"}],"key":"d0a7eZaWzO"},{"type":"tableRow","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"inlineCode","value":"dwf ci generate","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"BEyc7Cr2WH"}],"key":"cFJuAWDpbE"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"generate Rust-oriented ","key":"ZDG6YhEyiI"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"rIaPl1cbv5"}],"key":"OLjOhoNO40"},{"type":"text","value":" jobs/cache keys","key":"kJrTx4WTgA"}],"key":"ktOkpBNEA2"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"generate pnpm/node ","key":"tlADSkRgNK"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"UyZa5xH5Xg"}],"key":"JOl1MLrMbF"},{"type":"text","value":" jobs/cache keys","key":"GFkivq8Ez1"}],"key":"ZtJZlCTnA7"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"add frontend/e2e job templates","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"EuWk1lGlGq"}],"key":"ugBt0jaDa2"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"add extension packaging jobs","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"DqcFSFyvC7"}],"key":"nylcwWneUd"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"add OS matrix + bundling/signing jobs","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"yBrTJvEghy"}],"key":"KJdMCxHFAK"}],"key":"sqgFuVAk0H"}],"key":"KbZrNJJCeQ"},{"type":"paragraph","position":{"start":{"line":270,"column":1},"end":{"line":270,"column":1}},"children":[{"type":"text","value":"Notes:","position":{"start":{"line":270,"column":1},"end":{"line":270,"column":1}},"key":"bl70VJeQpK"}],"key":"rsLP07bnsB"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":272,"column":1},"end":{"line":274,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":272,"column":1},"end":{"line":272,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The canonical command names are stable for developers; stack-specific executors are resolved from config extensions.","position":{"start":{"line":272,"column":1},"end":{"line":272,"column":1}},"key":"sZU5KFuLgj"}],"key":"sXsz5f1NCO"}],"key":"mk2kTZk5hb"},{"type":"listItem","spread":true,"position":{"start":{"line":273,"column":1},"end":{"line":274,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"dwf verify","position":{"start":{"line":273,"column":1},"end":{"line":273,"column":1}},"key":"H09AJ2WFJe"},{"type":"text","value":" should always run inside the configured fingerprinted container in ","key":"LMBjvEIvWO"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"dfr0dwgKoj"}],"key":"vOrWVy6ALt"},{"type":"text","value":", and optionally locally via containerized mode.","key":"QihYpxHdvg"}],"key":"kvwgeJ4VLW"}],"key":"C5UMV0LPuC"}],"key":"vKCJXWytau"},{"type":"paragraph","position":{"start":{"line":275,"column":1},"end":{"line":275,"column":1}},"children":[{"type":"text","value":"Rollout path for this project:","position":{"start":{"line":275,"column":1},"end":{"line":275,"column":1}},"key":"ay73uHN5eF"}],"key":"itp3zCTXBJ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":277,"column":1},"end":{"line":280,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Phase A: treat current ","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"VgD55wDxH4"},{"type":"inlineCode","value":"dflow","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"W7EDqeapFJ"},{"type":"text","value":" as compatibility facade and map it to ","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"mCzxDPQJKy"},{"type":"inlineCode","value":"devflow","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"OQOeWONxph"},{"type":"text","value":"/","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"ZQdAyXlknG"},{"type":"inlineCode","value":"dwf","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"ye7v4Lkvwb"},{"type":"text","value":" commands.","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"po8ushIoB6"}],"key":"OkAF1V9VCH"}],"key":"ZkDiCcVqmr"},{"type":"listItem","spread":true,"position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Phase B: move cache/image/check contracts into typed config.","position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"key":"VGnPnKbZg2"}],"key":"Hny2xo7PUr"}],"key":"J2HLMRQ0wq"},{"type":"listItem","spread":true,"position":{"start":{"line":279,"column":1},"end":{"line":280,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Phase C: keep project-specific extensions only for diagram-tool dependencies and release packaging nuances.","position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"key":"tZgkfXooy8"}],"key":"xpj7xsRLUM"}],"key":"Bsi568sAyM"}],"key":"Jfn20mlyqd"},{"type":"heading","depth":2,"position":{"start":{"line":281,"column":1},"end":{"line":281,"column":1}},"children":[{"type":"text","value":"Required Repo Changes","position":{"start":{"line":281,"column":1},"end":{"line":281,"column":1}},"key":"EfNEj09wGe"}],"identifier":"required-repo-changes","label":"Required Repo Changes","html_id":"required-repo-changes","implicit":true,"key":"DsR6OuSnXD"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":283,"column":1},"end":{"line":298,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Standardize fingerprint algorithm docs + scripts to one input set.","position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"key":"Klc5HDi4gT"}],"key":"qYAxGTEo2U"}],"key":"doamAYbgjY"},{"type":"listItem","spread":true,"position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Introduce ","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"UohPpgMEkc"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"w75VwIy5x6"},{"type":"text","value":" and replace hardcoded ","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"kQ5flBh224"},{"type":"inlineCode","value":".cargo-cache","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"VU1BeYvvLO"},{"type":"text","value":"/","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"gHBV9CflgG"},{"type":"inlineCode","value":"target/ci","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"Ur263NEx3I"},{"type":"text","value":" paths in scripts and make fragments.","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"eQsFR2NlSW"}],"key":"WKuCr8OLzh"}],"key":"AB5HtoGUzs"},{"type":"listItem","spread":true,"position":{"start":{"line":285,"column":1},"end":{"line":289,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add explicit ","key":"eImUCyXTeJ"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"kQLQzVdsJi"}],"key":"eQVWW0heKy"},{"type":"text","value":"-tier targets:","key":"QynqJzkfZL"}],"key":"RiGtRPRm3D"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":286,"column":1},"end":{"line":289,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":286,"column":1},"end":{"line":286,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"fmt-check","position":{"start":{"line":286,"column":1},"end":{"line":286,"column":1}},"key":"wPg7QiqkmQ"}],"key":"FqP8HMr9Dn"}],"key":"zm7v6L56nF"},{"type":"listItem","spread":true,"position":{"start":{"line":287,"column":1},"end":{"line":287,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"lint-clippy","position":{"start":{"line":287,"column":1},"end":{"line":287,"column":1}},"key":"J69I7hvxk6"}],"key":"hEn3TlqhTU"}],"key":"zWmheeEV5l"},{"type":"listItem","spread":true,"position":{"start":{"line":288,"column":1},"end":{"line":288,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"test-pr","position":{"start":{"line":288,"column":1},"end":{"line":288,"column":1}},"key":"ryeCAT5wFp"}],"key":"pTGB9Yyqu4"}],"key":"tQaCq4KNtd"},{"type":"listItem","spread":true,"position":{"start":{"line":289,"column":1},"end":{"line":289,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"test-full","position":{"start":{"line":289,"column":1},"end":{"line":289,"column":1}},"key":"RDgdj9lu7V"}],"key":"Ui2KO3hju0"}],"key":"Y1BB3JgmzL"}],"key":"BTsIPks9nQ"}],"key":"arZROZq4LO"},{"type":"listItem","spread":true,"position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Consolidate ","key":"e0mS2Qp5u7"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"Ij0mrnfUX5"}],"key":"p4t3hwMzxA"},{"type":"text","value":" triggers into one workflow (","key":"rY4fXYeJj4"},{"type":"inlineCode","value":"main","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"eSkW09YHj3"},{"type":"text","value":", ","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"cGk4XUoUwt"},{"type":"inlineCode","value":"develop","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"jWnVBNX6HV"},{"type":"text","value":") and keep release/package workflows separate.","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"nETYeIl82i"}],"key":"ewz3UaO08k"}],"key":"G4FvhS7uJ3"},{"type":"listItem","spread":true,"position":{"start":{"line":291,"column":1},"end":{"line":291,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add cache key normalization helper (script or make target) reused by both local diagnostics and GHA.","position":{"start":{"line":291,"column":1},"end":{"line":291,"column":1}},"key":"JZoe7xlCuk"}],"key":"A5KtuJYQrM"}],"key":"R5nskqiv4i"},{"type":"listItem","spread":true,"position":{"start":{"line":292,"column":1},"end":{"line":295,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add ","key":"FjSLSK1b9I"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"baxVvooKDP"}],"key":"PMgX7fwMWn"},{"type":"text","value":" observability summary:","key":"WeUsqiplAT"}],"key":"JBdwzgQzW6"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":293,"column":1},"end":{"line":295,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":293,"column":1},"end":{"line":293,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"fingerprint used","position":{"start":{"line":293,"column":1},"end":{"line":293,"column":1}},"key":"hFVE2bqlGI"}],"key":"UqDcfhDjjA"}],"key":"s9ntKHxKl1"},{"type":"listItem","spread":true,"position":{"start":{"line":294,"column":1},"end":{"line":294,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cache hit/miss stats","position":{"start":{"line":294,"column":1},"end":{"line":294,"column":1}},"key":"iSxH3jHdRy"}],"key":"XMcF9xu0o0"}],"key":"qbzckj4dtG"},{"type":"listItem","spread":true,"position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"sccache","position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"key":"hGbJGE946i"},{"type":"text","value":" hit ratio per run","position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"key":"xjrsdOnHQs"}],"key":"WWxckayouX"}],"key":"HWuUsSbvzH"}],"key":"EaeatbyIp6"}],"key":"mFRlcgztKf"},{"type":"listItem","spread":true,"position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add explicit note in workflow docs that ","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"BWNvim3oyR"},{"type":"inlineCode","value":"build","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"FF85d5iFEt"},{"type":"text","value":" and all ","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"OENCP9Tjes"},{"type":"inlineCode","value":"verify-*","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"rHEnxIXmMW"},{"type":"text","value":" jobs execute in the fingerprinted ","key":"zph8K73Tjz"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"Sy16Vr39XF"}],"key":"HLBxVWbPTx"},{"type":"text","value":" container.","key":"kvGnADZPg5"}],"key":"XoDWhYnHGa"}],"key":"WwFSfJpdPK"},{"type":"listItem","spread":true,"position":{"start":{"line":297,"column":1},"end":{"line":298,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add extension points in docs/config for future multi-surface and multi-stack orchestration.","position":{"start":{"line":297,"column":1},"end":{"line":297,"column":1}},"key":"lQWS5gmBHZ"}],"key":"bk3oni4jhq"}],"key":"pw4MWmVMlk"}],"key":"ut2MWZbK0A"},{"type":"heading","depth":2,"position":{"start":{"line":299,"column":1},"end":{"line":299,"column":1}},"children":[{"type":"text","value":"Suggested Implementation Plan (v0.1.0)","position":{"start":{"line":299,"column":1},"end":{"line":299,"column":1}},"key":"sOezmtUVTS"}],"identifier":"suggested-implementation-plan-v0-1-0","label":"Suggested Implementation Plan (v0.1.0)","html_id":"suggested-implementation-plan-v0-1-0","implicit":true,"key":"yXRHSzKutH"},{"type":"heading","depth":3,"position":{"start":{"line":301,"column":1},"end":{"line":301,"column":1}},"children":[{"type":"text","value":"Phase 1: Cache Contract and Fingerprint Consistency","position":{"start":{"line":301,"column":1},"end":{"line":301,"column":1}},"key":"DnAWZHcKhO"}],"identifier":"phase-1-cache-contract-and-fingerprint-consistency","label":"Phase 1: Cache Contract and Fingerprint Consistency","html_id":"phase-1-cache-contract-and-fingerprint-consistency","implicit":true,"key":"UrxHWyWAph"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":303,"column":1},"end":{"line":306,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add ","position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"key":"DzLXF1bmjM"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"key":"do9sZhSwal"},{"type":"text","value":" contract and migrate mounts/env vars.","position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"key":"qnvbF5Lpop"}],"key":"Wu6tEHZLw5"}],"key":"cBmR1cHieh"},{"type":"listItem","spread":true,"position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Align fingerprint implementation and documentation.","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"key":"tKokVSvmr5"}],"key":"Wkn9DOWqg8"}],"key":"V81GQd57YM"},{"type":"listItem","spread":true,"position":{"start":{"line":305,"column":1},"end":{"line":306,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Validate no regression in ","position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"key":"jswONzwqw6"},{"type":"inlineCode","value":"./dflow ci-verify","position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"key":"PefO31n3wI"},{"type":"text","value":".","position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"key":"J1buuPGtnN"}],"key":"Z9ROTxPfIM"}],"key":"S7aPfOLB1T"}],"key":"UxqdfLrzBm"},{"type":"heading","depth":3,"position":{"start":{"line":307,"column":1},"end":{"line":307,"column":1}},"children":[{"type":"text","value":"Phase 2: ","key":"Y2Byn6HNnL"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"f8AYauATjH"}],"key":"CIYrDmOSb9"},{"type":"text","value":" Job Contract Refactor","key":"Iq3NaNcmNy"}],"identifier":"phase-2-ci-job-contract-refactor","label":"Phase 2: CI Job Contract Refactor","html_id":"phase-2-ci-job-contract-refactor","implicit":true,"key":"NgV4gJDSSg"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":309,"column":1},"end":{"line":312,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":309,"column":1},"end":{"line":309,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Create/adjust make targets for granular checks.","position":{"start":{"line":309,"column":1},"end":{"line":309,"column":1}},"key":"gW9BeaKnlW"}],"key":"pMw4WpISUX"}],"key":"lgBgO6IBKJ"},{"type":"listItem","spread":true,"position":{"start":{"line":310,"column":1},"end":{"line":310,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Refactor ","key":"XKYcoClqME"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"dz8WvhGES9"}],"key":"N7wQEUDEoP"},{"type":"text","value":" workflow into prep/build/parallel-verify jobs.","key":"YdXhioDPVj"}],"key":"UqfCTtoFM9"}],"key":"HsvoFfmTvD"},{"type":"listItem","spread":true,"position":{"start":{"line":311,"column":1},"end":{"line":312,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep required checks mapped to the same stable names.","position":{"start":{"line":311,"column":1},"end":{"line":311,"column":1}},"key":"YR5xguk0u9"}],"key":"XyQBPCbZjx"}],"key":"b407AGekc3"}],"key":"xLDX2m3Bqe"},{"type":"heading","depth":3,"position":{"start":{"line":313,"column":1},"end":{"line":313,"column":1}},"children":[{"type":"text","value":"Phase 3: Test Tiering + Runtime Optimization","position":{"start":{"line":313,"column":1},"end":{"line":313,"column":1}},"key":"mcOhTDIGgF"}],"identifier":"phase-3-test-tiering-runtime-optimization","label":"Phase 3: Test Tiering + Runtime Optimization","html_id":"phase-3-test-tiering-runtime-optimization","implicit":true,"key":"tjsppvsYTl"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":315,"column":1},"end":{"line":318,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":315,"column":1},"end":{"line":315,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Formalize ","key":"YIxAzRPJU2"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"igwsE2EMQ0"}],"key":"A8F8aXxYL2"},{"type":"text","value":" vs full test tiers.","key":"TuzJP2VcSf"}],"key":"BuCpf53EKT"}],"key":"ysM2CjpTBr"},{"type":"listItem","spread":true,"position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Tune ","position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"key":"cP3zw2m5CR"},{"type":"inlineCode","value":"nextest","position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"key":"re6TdsoMgp"},{"type":"text","value":" profile and retries for flaky integration suites.","position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"key":"v9tpqOk0WX"}],"key":"gMUeeg1rFQ"}],"key":"Tbi4ZFJsLO"},{"type":"listItem","spread":true,"position":{"start":{"line":317,"column":1},"end":{"line":318,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add run summaries with cache and compile diagnostics.","position":{"start":{"line":317,"column":1},"end":{"line":317,"column":1}},"key":"O5wa1F6fd7"}],"key":"nLxONgD2v8"}],"key":"mSYBQGkT0q"}],"key":"QRALHgXjZM"},{"type":"heading","depth":3,"position":{"start":{"line":319,"column":1},"end":{"line":319,"column":1}},"children":[{"type":"text","value":"Phase 4: Hardening (Optional, Recommended)","position":{"start":{"line":319,"column":1},"end":{"line":319,"column":1}},"key":"XL6YizlEwg"}],"identifier":"phase-4-hardening-optional-recommended","label":"Phase 4: Hardening (Optional, Recommended)","html_id":"phase-4-hardening-optional-recommended","implicit":true,"key":"dwqLSSTf5b"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":321,"column":1},"end":{"line":324,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":321,"column":1},"end":{"line":321,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add SBOM + image scan gates.","position":{"start":{"line":321,"column":1},"end":{"line":321,"column":1}},"key":"ZOSHfzwnpq"}],"key":"kbE0TyPLCe"}],"key":"nAYspuVnQX"},{"type":"listItem","spread":true,"position":{"start":{"line":322,"column":1},"end":{"line":322,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add provenance/signing for release images.","position":{"start":{"line":322,"column":1},"end":{"line":322,"column":1}},"key":"HQ7XGT4BkA"}],"key":"obHt4IKTD3"}],"key":"bOGxeWLHdF"},{"type":"listItem","spread":true,"position":{"start":{"line":323,"column":1},"end":{"line":324,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add periodic cache hygiene workflow.","position":{"start":{"line":323,"column":1},"end":{"line":323,"column":1}},"key":"EY3bmhJOFa"}],"key":"CmmOiWuog8"}],"key":"BVilAA0oOo"}],"key":"sARFaVVPI3"},{"type":"heading","depth":2,"position":{"start":{"line":325,"column":1},"end":{"line":325,"column":1}},"children":[{"type":"text","value":"Risks and Mitigations","position":{"start":{"line":325,"column":1},"end":{"line":325,"column":1}},"key":"BLb82edrZ7"}],"identifier":"risks-and-mitigations","label":"Risks and Mitigations","html_id":"risks-and-mitigations","implicit":true,"key":"BLzUuKJh7A"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":327,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":327,"column":1},"end":{"line":328,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Risk: over-broad target cache reuse can cause stale artifacts.","position":{"start":{"line":327,"column":1},"end":{"line":327,"column":1}},"key":"s0GQYX13UH"}],"key":"Qj1tZ1nwnp"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":328,"column":1},"end":{"line":328,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":328,"column":1},"end":{"line":328,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mitigation: include fingerprint + toolchain + feature mode in cache key.","position":{"start":{"line":328,"column":1},"end":{"line":328,"column":1}},"key":"W6sOWye3zb"}],"key":"eKzrMpBvQ9"}],"key":"l50cl6TSpr"}],"key":"m8tWym50R5"}],"key":"SuhaRQZIs6"},{"type":"listItem","spread":true,"position":{"start":{"line":329,"column":1},"end":{"line":330,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Risk: too many parallel jobs increase image pull overhead.","position":{"start":{"line":329,"column":1},"end":{"line":329,"column":1}},"key":"tIvKGmgqQt"}],"key":"tGy4Q8yS0X"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":330,"column":1},"end":{"line":330,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":330,"column":1},"end":{"line":330,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mitigation: keep verify jobs lightweight and rely on prep/build warm cache.","position":{"start":{"line":330,"column":1},"end":{"line":330,"column":1}},"key":"pjO4qZCI2k"}],"key":"QNJvhCgthu"}],"key":"zTeBhAkRSz"}],"key":"xsOR9UI9el"}],"key":"QketUaemKl"},{"type":"listItem","spread":true,"position":{"start":{"line":331,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Risk: local cache growth on macOS.","position":{"start":{"line":331,"column":1},"end":{"line":331,"column":1}},"key":"bvh2X2n8z3"}],"key":"CaXcAPoB7v"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":332,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":332,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mitigation: configurable cache root + retention/prune targets.","position":{"start":{"line":332,"column":1},"end":{"line":332,"column":1}},"key":"wlooMfs9Jr"}],"key":"esmELPkklQ"}],"key":"wbO2c6R6tG"}],"key":"YT5ZDt8mNL"}],"key":"VidIylNdOp"}],"key":"I8KPrEhc37"},{"type":"heading","depth":2,"position":{"start":{"line":334,"column":1},"end":{"line":334,"column":1}},"children":[{"type":"text","value":"Decision Notes on Requested Strategies","position":{"start":{"line":334,"column":1},"end":{"line":334,"column":1}},"key":"HbMyxT7HgG"}],"identifier":"decision-notes-on-requested-strategies","label":"Decision Notes on Requested Strategies","html_id":"decision-notes-on-requested-strategies","implicit":true,"key":"CkWEZWavxG"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":336,"column":1},"end":{"line":340,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":336,"column":1},"end":{"line":336,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mounting cargo registry/git/target caches is correct and should remain, with stronger key scoping and a configurable root.","position":{"start":{"line":336,"column":1},"end":{"line":336,"column":1}},"key":"WmmtX7Hpq6"}],"key":"ONn8KdqFlb"}],"key":"kLxeqq2HTz"},{"type":"listItem","spread":true,"position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"cargo nextest","position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"key":"Hkmz6SLnQs"},{"type":"text","value":" is the right default for ","key":"YHvFy96JFQ"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"TnUMDdV7NA"}],"key":"Ov9Fj5fQsr"},{"type":"text","value":"; keep it as the primary ","key":"PZcKdqNKgZ"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"u2gTXRM6hJ"}],"key":"KwFiKPabdz"},{"type":"text","value":" test executor.","key":"qlU5u6ApY8"}],"key":"noIUo38PGh"}],"key":"ybHqmPEVcY"},{"type":"listItem","spread":true,"position":{"start":{"line":338,"column":1},"end":{"line":338,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Granular checks should remain visible as separate required statuses/check-runs.","position":{"start":{"line":338,"column":1},"end":{"line":338,"column":1}},"key":"RxOeYwZwv5"}],"key":"OYKLP2gP13"}],"key":"k98R1VwgGK"},{"type":"listItem","spread":true,"position":{"start":{"line":339,"column":1},"end":{"line":340,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Single ","key":"IwJ0JvPTpZ"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"nhdcfUZkEV"}],"key":"WLaFg4WGnS"},{"type":"text","value":" workflow for ","key":"pNogBJoQoe"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"jsM7nZfk17"}],"key":"cjtiIyIvqo"},{"type":"text","value":"/push on ","key":"GWqd893Q1K"},{"type":"inlineCode","value":"main","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"Cvksa62jd3"},{"type":"text","value":" and ","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"OMuGLYmDqW"},{"type":"inlineCode","value":"develop","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"l4nJ9Y5vli"},{"type":"text","value":" is recommended; keep release/publish workflows independent.","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"EkRDBCpsdE"}],"key":"whtHs2g7nW"}],"key":"zd1BbR8h7e"}],"key":"kFC840WOJQ"},{"type":"heading","depth":2,"position":{"start":{"line":341,"column":1},"end":{"line":341,"column":1}},"children":[{"type":"text","value":"Success Criteria","position":{"start":{"line":341,"column":1},"end":{"line":341,"column":1}},"key":"R5xvElgUYq"}],"identifier":"success-criteria","label":"Success Criteria","html_id":"success-criteria","implicit":true,"key":"NDwQdOUAzT"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":343,"column":1},"end":{"line":346,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Local ","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"key":"WiUu7vLrmG"},{"type":"inlineCode","value":"./dflow ci-verify","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"key":"EvcaRnoWKA"},{"type":"text","value":" and ","key":"qyqFcjt2eA"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"o8opL8nQHL"}],"key":"dQVGnc20fr"},{"type":"text","value":" ","key":"azQA15tZtG"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"m37WQO8zWL"}],"key":"mXsBEPv2Su"},{"type":"text","value":" run identical targets in the same image identity.","key":"unTK6KqrhY"}],"key":"qsOUTetR76"}],"key":"FgN9AYxGoc"},{"type":"listItem","spread":true,"position":{"start":{"line":344,"column":1},"end":{"line":344,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Warm ","key":"YQQSdYuEm9"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"R8aQFUZwKc"}],"key":"epemZl3exG"},{"type":"text","value":" rerun latency significantly lower than cold runs, with measurable ","key":"nC1xsI8EA8"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":344,"column":1},"end":{"line":344,"column":1}},"key":"FlQTxn0Ccd"},{"type":"text","value":" and cache hit ratios.","position":{"start":{"line":344,"column":1},"end":{"line":344,"column":1}},"key":"YdiR54V16L"}],"key":"UzG5jCCySW"}],"key":"YKFwsttAcC"},{"type":"listItem","spread":true,"position":{"start":{"line":345,"column":1},"end":{"line":345,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Reviewers can identify failure domain immediately from independent check status names.","position":{"start":{"line":345,"column":1},"end":{"line":345,"column":1}},"key":"zeQeM0sc15"}],"key":"Q56WgdcL7y"}],"key":"QKeUNhVzST"},{"type":"listItem","spread":true,"position":{"start":{"line":346,"column":1},"end":{"line":346,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Pipeline logic remains modular and centralized in scripts/make targets, not duplicated in YAML.","position":{"start":{"line":346,"column":1},"end":{"line":346,"column":1}},"key":"dtD6x8Vq7x"}],"key":"pru4RWr0qM"}],"key":"QHG3JdWzcy"}],"key":"gf5nza4w0x"}],"key":"QPzWdE7put"}],"key":"K1dhWjNKwj"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"v0.1.0 Implementation Execution Plan","url":"/v0-1-0-implementation-execution-plan","group":"06 Roadmap"},"next":{"title":"v0.1.0 Critical Architecture and Implementation Review","url":"/v0-1-0-critical-review","group":"06 Roadmap"}}},"domain":"http://localhost:3000"}