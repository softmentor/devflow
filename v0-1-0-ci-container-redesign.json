{"version":3,"kind":"Article","sha256":"3e8c37e5cfff3d71e559920d92f2c8fcbb9a302baa19fcb1989b5f6b03e5e9fd","slug":"v0-1-0-ci-container-redesign","location":"/developer-guide/06-roadmap/v0.1.0-ci-container-redesign.md","dependencies":[],"frontmatter":{"title":"v0.1.0 CI/Container Redesign Proposal","label":"devflow.developer-guide.roadmap.v010-ci-container-redesign","content_includes_title":false,"authors":[{"nameParsed":{"literal":"Soft Mentor","given":"Soft","family":"Mentor"},"name":"Soft Mentor","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/softmentor/devflow","abbreviations":{"ADR":"Architecture Decision Record.","API":"Application Programming Interface.","CI":"Continuous Integration.","CLI":"Command Line Interface.","DAG":"Directed Acyclic Graph.","GHCR":"GitHub Container Registry.","PR":"Pull Request."},"numbering":{"title":{"offset":2}},"source_url":"https://github.com/softmentor/devflow/blob/main/docs/developer-guide/06-roadmap/v0.1.0-ci-container-redesign.md","edit_url":"https://github.com/softmentor/devflow/edit/main/docs/developer-guide/06-roadmap/v0.1.0-ci-container-redesign.md","exports":[{"format":"md","filename":"v0.1.0-ci-container-redesign.md","url":"/devflow/build/v0.1.0-ci-container--bc98502e8ddbca3a6920ff2f365ae399.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Purpose","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"cy71xaeAYu"}],"identifier":"purpose","label":"Purpose","html_id":"purpose","implicit":true,"key":"Z8SdvhGSzu"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Define a reproducible, modular, and cache-efficient developer/","key":"KUpb642v6s"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"L4RyLUVlpP"}],"key":"kOCUcmT178"},{"type":"text","value":" model for the v0.1.0 refactor so local macOS development and GitHub Actions execute the same verification logic with the same container identity.","key":"vdsY6T6H2K"}],"key":"la8mdbVTF6"},{"type":"heading","depth":2,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Executive Summary","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"c79fFojdBx"}],"identifier":"executive-summary","label":"Executive Summary","html_id":"executive-summary","implicit":true,"key":"P1i2s0rNCt"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep the current fingerprinted ","key":"S6TE5P1oC3"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"mMo8f5Jv1a"}],"key":"rM3DULmMBG"},{"type":"text","value":" image strategy and expand it into a single canonical cache architecture.","key":"IGdOc5tIGq"}],"key":"wR2duuP48U"}],"key":"eGL3ulgFYl"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Use a configurable cache root for local container runs (default: ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"qBQUvRURue"},{"type":"inlineCode","value":".cargo-cache/","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"LJyjdtQRPa"},{"type":"text","value":") with explicit volume mounts for registry, git, ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"eCzsm5UWUS"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"WRjnCKxXkj"},{"type":"text","value":", and target outputs.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"QkRCuZUxj4"}],"key":"jXA4nPcZgv"}],"key":"lkkunO1832"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep one source of truth for commands in Make targets and scripts; GitHub Actions should only orchestrate those targets.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"GUd40MVEpb"}],"key":"OxlXf1vgIr"}],"key":"bxrPuJgdEQ"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Use ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"QA7vCyyI2V"},{"type":"inlineCode","value":"cargo nextest","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"mUi1rYaRkl"},{"type":"text","value":" as the default ","key":"HgHdYeVAhr"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"lWKJu90vki"}],"key":"BYfCH3FAZB"},{"type":"text","value":" test runner, with test tiers split by change risk (minimal ","key":"yO9HBZTYJc"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"Y41bj8XMQw"}],"key":"uy708CGRev"},{"type":"text","value":" gate vs full verification on push/main).","key":"PoLDDx0lL4"}],"key":"XAmUL6R9u8"}],"key":"gb8t0wlMkB"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Preserve granular ","key":"xCQqrRsZuw"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"Vnikk5WgyQ"}],"key":"OaaNqFHn8u"},{"type":"text","value":" visibility (","key":"CPu7NqWPiC"},{"type":"inlineCode","value":"fmt","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"KWGJfe3ZfI"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"ZqPv849hjj"},{"type":"inlineCode","value":"clippy","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"oiMBoCbJkG"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"See5lG6VxO"},{"type":"inlineCode","value":"compile","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"KKQNfwkWVQ"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"sonTSwfDg6"},{"type":"inlineCode","value":"test","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"jqAe9Gdnq4"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"XgPmEDWVZM"},{"type":"inlineCode","value":"smoke","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"bCavaD4z5B"},{"type":"text","value":") as separate required checks.","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"mxoaabLUPC"}],"key":"JvsLlfx1CR"}],"key":"nvZVICNaQh"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"kGG6Rf02G1"},{"type":"inlineCode","value":"build","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"WcKOIUKXjY"},{"type":"text","value":" and ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"PTRFDHhes4"},{"type":"inlineCode","value":"verify","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"gPkpnHBfu6"},{"type":"text","value":" execution inside the containerized ","key":"Z3k7g87MVd"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"zuoAa3FiL4"}],"key":"hknUta6LUG"},{"type":"text","value":" image to preserve environment parity with local repro.","key":"LrGxOhDytV"}],"key":"ML69KBUYrh"}],"key":"v1n4hC9lkF"}],"key":"Qs43phsBt3"},{"type":"heading","depth":2,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Current-State Evaluation","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"QIuO74557l"}],"identifier":"current-state-evaluation","label":"Current-State Evaluation","html_id":"current-state-evaluation","implicit":true,"key":"Snhi5CjNqJ"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"This repository already has strong foundations:","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"eEavns6Qs4"}],"key":"Y5jBZfVaBK"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":25,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Content-addressed image fingerprinting (","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"WqLXxeDjJD"},{"type":"inlineCode","value":"Dockerfile","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"Rx71n6Fg2S"},{"type":"text","value":" hash) and ","key":"SHKHH0nHBb"},{"type":"abbreviation","title":"GitHub Container Registry.","children":[{"type":"text","value":"GHCR","key":"PgEaNFoCeQ"}],"key":"VTYwd5aEtL"},{"type":"text","value":"-backed ","key":"Y8rAe9JK69"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"Bj7SPNaSrR"}],"key":"usCamB5219"},{"type":"text","value":" image identity.","key":"kf1i8itVA3"}],"key":"G0Mi87gOCz"}],"key":"VLpzRGNJp1"},{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Containerized local reproducibility via ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"vba8ZXqGp8"},{"type":"inlineCode","value":"./dflow ci-verify","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"PeqoJAu8I9"},{"type":"text","value":".","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"UEiIz2oof6"}],"key":"tRpIEkJen4"}],"key":"f3GRFROoeB"},{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Shared cache directories for containerized runs: ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"Z7pxJxJI8M"},{"type":"inlineCode","value":".cargo-cache/{registry,git,sccache}","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"WGFdEuHPbg"},{"type":"text","value":" and ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"dcXpxNPaqP"},{"type":"inlineCode","value":"target/ci","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"ySUnPVb9Xr"},{"type":"text","value":".","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"COlSJN8p1N"}],"key":"yqcMDMTqcU"}],"key":"VN9scbLjvd"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"nextest","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"jucit7ztv4"},{"type":"text","value":" already used in ","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"j99D254foI"},{"type":"inlineCode","value":"test-ci","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"yDXgrM2rp9"},{"type":"text","value":".","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"IeDI5aW4GR"}],"key":"EDmiCOjGUT"}],"key":"GUTSVKkidA"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Granular status reporting via ","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"znRxZQTIjR"},{"type":"inlineCode","value":"gh-check-wrapper.sh","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"EbTjugzsCl"},{"type":"text","value":".","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"X4XacqhcLB"}],"key":"LNBQJixMJO"}],"key":"wDFq9YZEYH"}],"key":"lISSajbO0q"},{"type":"paragraph","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Primary gaps to address for v0.1.0:","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"L08rPiGv4B"}],"key":"EBXSpaAD2f"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":33,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Fingerprint scope drift: docs/scripts currently state broader fingerprint inputs, while ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"oC1bTLK5YI"},{"type":"inlineCode","value":"vars.mk","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"bbq1txyaSw"},{"type":"text","value":" hashes only ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"l5mAPj0uTa"},{"type":"inlineCode","value":"Dockerfile","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"W0MX2v1pI5"},{"type":"text","value":".","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"bxG8TwCgEp"}],"key":"OSCSK4uGJH"}],"key":"vCZvc4GltM"},{"type":"listItem","spread":true,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cache root is not fully standardized/configurable as one top-level contract for local + ","key":"MqDke7bpxR"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"O9vQqn6lj3"}],"key":"COJNm10s3i"},{"type":"text","value":".","key":"k9KJ7Gdzom"}],"key":"Nrr5Oil7p2"}],"key":"JxhSgIBVjs"},{"type":"listItem","spread":true,"position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"Y2RNTTarGu"}],"key":"bIgFM6rD81"},{"type":"text","value":" check topology is efficient but still tightly coupled to shell backgrounding in one step; explicit check job contracts can improve maintainability.","key":"aToAAbdC1b"}],"key":"dUUg9K7UXu"}],"key":"x89Nlge8oO"},{"type":"listItem","spread":true,"position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"aEC0SzGemc"}],"key":"wGniHYxYB9"},{"type":"text","value":" gating tiers are not explicitly documented as “minimal gate” vs “full verification”.","key":"qZ6HNBw1sW"}],"key":"U00ejSfofK"}],"key":"dgqAQujtpI"},{"type":"listItem","spread":true,"position":{"start":{"line":37,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The design is highly optimized for this Rust repository but is not yet framed as a reusable cross-stack platform.","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"Pi78e55Jec"}],"key":"k7iNIDGQVB"}],"key":"CpXWmoer6l"}],"key":"nhfc63NWUM"},{"type":"heading","depth":2,"position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"text","value":"Target Design","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"e1TIw3Xw4V"}],"identifier":"target-design","label":"Target Design","html_id":"target-design","implicit":true,"key":"LdxPJCQEuj"},{"type":"heading","depth":3,"position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"1) Canonical Build Identity","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"kb4yfE3C23"}],"identifier":"id-1-canonical-build-identity","label":"1) Canonical Build Identity","html_id":"id-1-canonical-build-identity","implicit":true,"key":"kEHxpa2TVq"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":43,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep image fingerprinting as the environment identity key.","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"dwNUtyv8mU"}],"key":"vo3aYsVgcI"}],"key":"PvR0IzigvW"},{"type":"listItem","spread":true,"position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Expand fingerprint inputs to match policy: ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"XQVyp0U2nY"},{"type":"inlineCode","value":"Dockerfile","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"O8pssylmMe"},{"type":"text","value":", ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"EHJMFPaAsI"},{"type":"inlineCode","value":"Makefile","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"EtgNZAQAif"},{"type":"text","value":", ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"Pgh8Zw6IZY"},{"type":"inlineCode","value":"install.sh","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"x37xvocv5A"},{"type":"text","value":", ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"JxE3OGAGJc"},{"type":"inlineCode","value":"src-scripts/**","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"yXtcBWBCHO"},{"type":"text","value":", and ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"XPlMSqmMid"},{"type":"inlineCode","value":"rust-toolchain.toml","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"C2U6yjI9pm"},{"type":"text","value":".","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"vygwEtew1k"}],"key":"AA6IeCW3f0"}],"key":"H3PI7c5kx1"},{"type":"listItem","spread":true,"position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Publish ","key":"lt8fQD6qxH"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"xNq90p1vGU"}],"key":"uBkVwI5Xti"},{"type":"text","value":" image as ","key":"F4kWUMytGD"},{"type":"inlineCode","value":"ghcr.io/<repo>-ci:<fingerprint>","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"PnjAWtykji"},{"type":"text","value":" and keep ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"LG0QRblvjj"},{"type":"inlineCode","value":":latest","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"YpDeRqxlNN"},{"type":"text","value":" as convenience only.","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"EXYyYYHbGQ"}],"key":"axrrtdwPdC"}],"key":"Kk4lkOWZle"},{"type":"listItem","spread":true,"position":{"start":{"line":46,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Use immutable digest pinning in ","key":"RwwNa2rlu1"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"iRdPx0kpFJ"}],"key":"tGXWi57DL8"},{"type":"text","value":" job container declarations when practical.","key":"ac8zatTjvY"}],"key":"PwYiSGd9WN"}],"key":"QHhRDiMjST"}],"key":"VkiVigDAm7"},{"type":"heading","depth":3,"position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"text","value":"2) Unified Cache Contract","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"T2MmDIlx1N"}],"identifier":"id-2-unified-cache-contract","label":"2) Unified Cache Contract","html_id":"id-2-unified-cache-contract","implicit":true,"key":"emG4qjBMkG"},{"type":"paragraph","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"text","value":"Define one configurable cache root:","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"mp25K0LihL"}],"key":"ixNo5pEeBJ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":52,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"QT8xtVRu1S"},{"type":"text","value":" (default ","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"DC8dyKL2an"},{"type":"inlineCode","value":".cargo-cache","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"iicuRyO7kH"},{"type":"text","value":")","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"MG3yZpW4Qi"}],"key":"nfbzvRiNvm"}],"key":"P4QMARs63L"},{"type":"listItem","spread":true,"position":{"start":{"line":53,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Subdirs:","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"XKohM59fvr"}],"key":"feIxD94WjC"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":54,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/registry","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"Aiujjv0XEs"}],"key":"pBR1X9pE2G"}],"key":"BtX856EQBw"},{"type":"listItem","spread":true,"position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/git","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"K5yJeqLMaS"}],"key":"dQfwMkNgIR"}],"key":"sTeyt3oz01"},{"type":"listItem","spread":true,"position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/sccache","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"pd3W5tQxxX"}],"key":"kZpWtYmcVm"}],"key":"vBeb2D3CRR"},{"type":"listItem","spread":true,"position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/target-ci","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"epkLJbPsve"}],"key":"U4he87xT9I"}],"key":"gNUh1CBzPF"},{"type":"listItem","spread":true,"position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/image-tar","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"eQa8ACFlNb"}],"key":"zYjmX8I7oC"}],"key":"racmkQRjv6"},{"type":"listItem","spread":true,"position":{"start":{"line":59,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/buildx","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"bQeWHKcqJc"}],"key":"HT3iX64WEi"}],"key":"lKbnLO6VDk"}],"key":"QohSPaEm7G"}],"key":"fQ5JnsBa04"}],"key":"EJP0KYS8dB"},{"type":"paragraph","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"text","value":"Local container mounts:","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"lXRSi5XgQn"}],"key":"WwTUs25c4p"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":63,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cargo registry/git -> mounted from ","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"q2GQuPi0q7"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"V5MYFGx2N7"},{"type":"text","value":".","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"nkl8F6Gk6y"}],"key":"CcbDUqwO11"}],"key":"I8ZZp5ZYvD"},{"type":"listItem","spread":true,"position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"SCCACHE_DIR","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"BJyWrL8Nn1"},{"type":"text","value":" -> mounted from ","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"JTxcEcl8MT"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT/sccache","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"oqqiUbwOi3"},{"type":"text","value":".","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"XfQuhEeK4I"}],"key":"BAfHbhNO3j"}],"key":"GhVktoTzdK"},{"type":"listItem","spread":true,"position":{"start":{"line":65,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"CARGO_TARGET_DIR","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"jYgVsMfbTn"},{"type":"text","value":" -> mounted from ","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"nZQouVZAPV"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT/target-ci","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"lUqSFqFwpB"},{"type":"text","value":".","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"sbXKYBfQMH"}],"key":"wko9V6AbVc"}],"key":"fAL5aced3c"}],"key":"ASXb7xeEHS"},{"type":"paragraph","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"text","value":"Guidance:","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"key":"tczTH8T7JP"}],"key":"GLsxbZiQ0B"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":69,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Do not mount host ","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"VAWnICA55b"},{"type":"inlineCode","value":"~/.cargo","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"laLAxWZxOS"},{"type":"text","value":" directly by default; use project-scoped cache roots for reproducibility and isolation.","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"JwPo0ggy7m"}],"key":"zup9LL9Xda"}],"key":"CtZW5ADMW3"},{"type":"listItem","spread":true,"position":{"start":{"line":70,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep target caches scoped by Rust version + fingerprint + feature set to avoid artifact poisoning.","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"tal5rJEvjP"}],"key":"hEZBShG2Nf"}],"key":"FzjpSlvBsQ"}],"key":"dl0nnMWHvK"},{"type":"paragraph","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"children":[{"type":"text","value":"Environment nuance impact:","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"key":"Bf261UpdOA"}],"key":"pJ7DPahoRu"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":74,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"A standardized cache root does not remove environment-specific capability differences (kernel, filesystem semantics, CPU arch, cgroup limits, sandboxing).","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"rKk0RwROIL"}],"key":"Z38mlYXwOt"}],"key":"o1u3K7n8Po"},{"type":"listItem","spread":true,"position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The container image and run flags define behavior parity; the cache root only standardizes persisted artifacts and speeds reruns.","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"cLFD4TrsGB"}],"key":"UUfAOEGb9b"}],"key":"cQDfWe9lKR"},{"type":"listItem","spread":true,"position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cache key dimensions should include ","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"ebSTvr99kq"},{"type":"inlineCode","value":"os/arch","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"ll0i2cV6dK"},{"type":"text","value":" and runtime profile (for example Linux amd64 container vs local native macOS) to avoid cross-environment contamination.","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"w1g6hX0fCt"}],"key":"Irexbc41eA"}],"key":"OEH3lrybni"},{"type":"listItem","spread":true,"position":{"start":{"line":77,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"For deterministic ","key":"DSPoULLjm6"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"CgywhoK8u5"}],"key":"A5Psfu5C2e"},{"type":"text","value":", treat cache as an optimization only; correctness must not depend on cache hits.","key":"XYxNSgZFjP"}],"key":"g1TsJSFq3R"}],"key":"gMEFxa0uSB"}],"key":"jFBRNdPIms"},{"type":"heading","depth":3,"position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"text","value":"3) GitHub Actions Cache Layers","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"Ll0E9UKqOe"}],"identifier":"id-3-github-actions-cache-layers","label":"3) GitHub Actions Cache Layers","html_id":"id-3-github-actions-cache-layers","implicit":true,"key":"auBlEouD4b"},{"type":"paragraph","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"text","value":"Use layered caching, ordered by ROI:","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"ra9oxZ2EAg"}],"key":"T9xpexHPcm"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":83,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"kazhpwhgjy"}],"key":"esN7HyxCXo"},{"type":"text","value":" image reuse from ","key":"ky1tSXAsi0"},{"type":"abbreviation","title":"GitHub Container Registry.","children":[{"type":"text","value":"GHCR","key":"numQJBu6j3"}],"key":"RutLIQUVYC"},{"type":"text","value":" by fingerprint.","key":"TrKa5OXkIq"}],"key":"ZdMjqfxsg7"}],"key":"Qws9Rq5Faq"},{"type":"listItem","spread":true,"position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Optional image tar cache (","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"Bye1E56hG8"},{"type":"inlineCode","value":"actions/cache","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"EogjuCd85u"},{"type":"text","value":") for fast same-runner restore.","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"LibvZA7f5a"}],"key":"mPGqaAp4bp"}],"key":"tNmzfjBuMj"},{"type":"listItem","spread":true,"position":{"start":{"line":85,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cargo + sccache cache (","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"P75dNK1OQY"},{"type":"inlineCode","value":"registry","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"etfP0y56Hd"},{"type":"text","value":", ","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"M2vjPVq1fH"},{"type":"inlineCode","value":"git","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"tZTfv88EWV"},{"type":"text","value":", ","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"AjqdgiDElD"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"t8tPVgiCAl"},{"type":"text","value":", ","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"lOW8VvZHZs"},{"type":"inlineCode","value":"target-ci","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"rsiaCiKe2j"},{"type":"text","value":") keyed by:","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"u0UjCn8Oq3"}],"key":"fIKt7dP6h3"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":86,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"runner.os","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"OepG87lWkB"}],"key":"D6RjSXy6Xt"}],"key":"IuuEkcvJG6"},{"type":"listItem","spread":true,"position":{"start":{"line":87,"column":1},"end":{"line":87,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"image fingerprint","position":{"start":{"line":87,"column":1},"end":{"line":87,"column":1}},"key":"iRCuZY3ckg"}],"key":"JJGT8uX11d"}],"key":"fn9qAKE33C"},{"type":"listItem","spread":true,"position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"hash(Cargo.lock, rust-toolchain.toml)","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"key":"RAVWR1veIu"}],"key":"wHoFG4WHZh"}],"key":"aQECzy72JV"},{"type":"listItem","spread":true,"position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cargo feature mode (for example ","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"jaYK07D6Xh"},{"type":"inlineCode","value":"native-browser","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"wGu1cMAjqT"},{"type":"text","value":" vs lean)","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"seEmRjAafe"}],"key":"fC4FopbXNi"}],"key":"GxvwUSNI8P"}],"key":"sIUchmbNxR"}],"key":"SNgFW7Hhva"},{"type":"listItem","spread":true,"position":{"start":{"line":90,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"BuildKit cache for image builds (","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"lf1hOgiBjD"},{"type":"inlineCode","value":"cache-from/cache-to","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"vpkrmZPyUT"},{"type":"text","value":" gha, optionally registry cache manifest).","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"LGobB2Jhxs"}],"key":"Um7bU0EcrU"}],"key":"XMbWulX8vd"}],"key":"B0dbSEmxn6"},{"type":"heading","depth":3,"position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"children":[{"type":"text","value":"4) Workflow Modularity and Check Visibility","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"key":"cdNXpla3Rm"}],"identifier":"id-4-workflow-modularity-and-check-visibility","label":"4) Workflow Modularity and Check Visibility","html_id":"id-4-workflow-modularity-and-check-visibility","implicit":true,"key":"vIefCfsA42"},{"type":"paragraph","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"text","value":"Single ","key":"fK94bKW4i3"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"jIFAFTpXqo"}],"key":"SjisKBRhsB"},{"type":"text","value":" workflow file (","key":"cSuuhEEZl0"},{"type":"inlineCode","value":".github/workflows/ci.yml","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"NK35ssHCXe"},{"type":"text","value":") for ","key":"YAsKK83s9Z"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"JijypKwV7m"}],"key":"gH966HBRGR"},{"type":"text","value":"/push on ","key":"TLixK0y2PN"},{"type":"inlineCode","value":"main","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"G9oDuTYilJ"},{"type":"text","value":" and ","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"ElK21cnUfc"},{"type":"inlineCode","value":"develop","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"CGMX6euYdJ"},{"type":"text","value":".","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"VbvszUYUtl"}],"key":"XOfWOReIxq"},{"type":"paragraph","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"children":[{"type":"text","value":"Job topology:","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"key":"HU1Ar0yny6"}],"key":"UOofll0kDr"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":98,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"prep","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"JnbWt55TMs"},{"type":"text","value":": resolve fingerprint + image, restore image tar cache, emit outputs (runner job, no compile/test logic).","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"a7nf1okmi5"}],"key":"TrWC47Zhjj"}],"key":"IHYInIHthm"},{"type":"listItem","spread":true,"position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"build","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"dx9w8WKijv"},{"type":"text","value":": compile once (","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"tFQ9i8NFnk"},{"type":"inlineCode","value":"make build-ci","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"e0rDEg3oQS"},{"type":"text","value":") and save cargo/sccache cache (","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"wUkevTYSWx"},{"type":"strong","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"text","value":"runs inside the ","key":"pikpbJGCkc"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"OtU5gNspUL"}],"key":"zM1SwTX0Jp"},{"type":"text","value":" container image","key":"DmE0eahOU2"}],"key":"yGDMPGa44O"},{"type":"text","value":").","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"UU86sio3HX"}],"key":"Efg8UR38VH"}],"key":"ZdFLLWq43s"},{"type":"listItem","spread":true,"position":{"start":{"line":100,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Parallel verify jobs (granular reviewer visibility):","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"key":"bj5dIaULu6"}],"key":"GRdUwA5j17"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":101,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"fmt","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"Cl7uX6Wo9k"},{"type":"text","value":" -> ","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"Rgdq8R3Exk"},{"type":"inlineCode","value":"make fmt-check","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"z004kyyce4"},{"type":"text","value":" (or ","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"rBQjYmLfTG"},{"type":"inlineCode","value":"cargo fmt --check","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"gYRdH4lizA"},{"type":"text","value":")","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"mDmZSdGk3V"}],"key":"AEbH1AEsa4"}],"key":"tIzftiI2aQ"},{"type":"listItem","spread":true,"position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"clippy","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"dISuCmIUgq"},{"type":"text","value":" -> ","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"QKSHFc7zAu"},{"type":"inlineCode","value":"make lint-clippy","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"lZP8G5J92g"}],"key":"FYTFOqOBBE"}],"key":"IVL2yxbmhQ"},{"type":"listItem","spread":true,"position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"test","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"wsaTEb1Ve7"},{"type":"text","value":" -> ","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"h549y7AsoP"},{"type":"inlineCode","value":"make test-ci","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"EoYH7Si6kD"},{"type":"text","value":" (","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"icGGDGXr7h"},{"type":"inlineCode","value":"cargo nextest run","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"g2E1KKBbez"},{"type":"text","value":")","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"mXYGe7x7ex"}],"key":"OEJwGbWRoY"}],"key":"KUWOb6jvdk"},{"type":"listItem","spread":true,"position":{"start":{"line":104,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"smoke","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"zQaqrGJn72"},{"type":"text","value":" -> ","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"jMEP3g4CYn"},{"type":"inlineCode","value":"make smoke-test","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"nLx3TAl1c3"}],"key":"ZE5kMQQaVp"}],"key":"n8jVxOVwP5"}],"key":"roP6AaoWxh"}],"key":"KNp7QvHOkv"}],"key":"mjnbIn33A8"},{"type":"paragraph","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"children":[{"type":"text","value":"All verify jobs:","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"key":"z0hYESOLBi"}],"key":"K8XnISXAS6"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":108,"column":1},"end":{"line":111,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Run in the same fingerprinted ","key":"c6qAtAI7cU"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"bPBrP3LI0o"}],"key":"Q9Oxh1uLvE"},{"type":"text","value":" container image as ","key":"lRPwoTUmC5"},{"type":"inlineCode","value":"build","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"q8SpsTFCqo"},{"type":"text","value":".","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"Mt9TwsMYAe"}],"key":"Jd8cLtF8yZ"}],"key":"vjjMYeEmSm"},{"type":"listItem","spread":true,"position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Restore caches read-only.","position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"key":"WoWrTao3B1"}],"key":"xqfsfw2Kp9"}],"key":"tfB7bj72lb"},{"type":"listItem","spread":true,"position":{"start":{"line":110,"column":1},"end":{"line":111,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Avoid duplicate compilation by relying on warmed cache from ","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"PO4Kg1p8aA"},{"type":"inlineCode","value":"build","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"kgmhDFaknc"},{"type":"text","value":".","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"mM6Kj4hmQ6"}],"key":"vIiGhmVRcj"}],"key":"Du4YrD9NN3"}],"key":"kPjWfdlBos"},{"type":"heading","depth":3,"position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"children":[{"type":"text","value":"5) Test Tiering Policy","position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"key":"nO6zuYzESu"}],"identifier":"id-5-test-tiering-policy","label":"5) Test Tiering Policy","html_id":"id-5-test-tiering-policy","implicit":true,"key":"hw2ulX8uJz"},{"type":"paragraph","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"children":[{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"ZcIsVC1nzA"}],"key":"xmlhZVvZJW"},{"type":"text","value":" minimal gate:","key":"mrG3WXZxF4"}],"key":"vCcmXKOaVl"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":116,"column":1},"end":{"line":117,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":116,"column":1},"end":{"line":117,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"fmt","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"LJ9TOieNxX"},{"type":"text","value":", ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"KKpUZyoNdK"},{"type":"inlineCode","value":"clippy","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"mVf5J2psUg"},{"type":"text","value":", ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"ypKTYqr0xQ"},{"type":"inlineCode","value":"build-ci","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"vBd9K42T0L"},{"type":"text","value":", ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"swFbOCmXwC"},{"type":"inlineCode","value":"nextest","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"UrAPn36wXn"},{"type":"text","value":" (default profile), ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"SJyTE0v2Ez"},{"type":"inlineCode","value":"smoke","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"ZEdugoFisC"},{"type":"text","value":".","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"mBhN0NXWwx"}],"key":"S4W7UmIDS0"}],"key":"LkEUQrLMLB"}],"key":"MpkudZxuqM"},{"type":"paragraph","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"children":[{"type":"text","value":"Push to ","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"Bi12ZCAmy5"},{"type":"inlineCode","value":"main/develop","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"yy3rnTbG1X"},{"type":"text","value":" full verification:","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"AyYj9mrjbA"}],"key":"udIDNtIwFe"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":120,"column":1},"end":{"line":121,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":120,"column":1},"end":{"line":121,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Includes security/load/integration-heavy suites and packaging validation.","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"AWhmfkkvJa"}],"key":"ctyTDNT4zx"}],"key":"nSnnUFFwod"}],"key":"ZTG7xYFqqw"},{"type":"paragraph","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"children":[{"type":"text","value":"Implementation note:","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"Q3vDS14YGh"}],"key":"rY8XkmJKd4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":124,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":124,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Encode tiers as explicit make targets (","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"hfKX0FerEA"},{"type":"inlineCode","value":"test-pr","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"UCz9yTWoZQ"},{"type":"text","value":", ","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"QJV3cb4Wxf"},{"type":"inlineCode","value":"test-full","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"nhlS9g7V0q"},{"type":"text","value":") to keep local and ","key":"n6XdXNs2yK"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"sxjKzcBFBo"}],"key":"vkRRFGXcro"},{"type":"text","value":" behavior identical.","key":"OOn2Gai0Ld"}],"key":"JSUzpwWXFd"}],"key":"rM6oG8gMQt"}],"key":"QDZZpKXbGa"},{"type":"heading","depth":3,"position":{"start":{"line":126,"column":1},"end":{"line":126,"column":1}},"children":[{"type":"text","value":"6) Local/","key":"xogCUfH2o7"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"vMhNchcy1Q"}],"key":"gSkw2docuN"},{"type":"text","value":" Command Parity","key":"ECdwMT5obE"}],"identifier":"id-6-local-ci-command-parity","label":"6) Local/CI Command Parity","html_id":"id-6-local-ci-command-parity","implicit":true,"key":"t5whpXv3z0"},{"type":"paragraph","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"children":[{"type":"text","value":"Entrypoints:","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"ijADVGKCxg"}],"key":"TB3CzmcwUB"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":130,"column":1},"end":{"line":132,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Local: ","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"key":"vvSjkH0ZqP"},{"type":"inlineCode","value":"./dflow ci-verify <target>","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"key":"cL0tUrWTc5"}],"key":"tMug99RKdH"}],"key":"lkO7ZIScsl"},{"type":"listItem","spread":true,"position":{"start":{"line":131,"column":1},"end":{"line":132,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"BSoDxlERzC"}],"key":"RnmbFqXAqr"},{"type":"text","value":": ","key":"EkFTSsgagn"},{"type":"inlineCode","value":"make <target>","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"aU76fhJP63"},{"type":"text","value":" from inside container job","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"nN6XxZyvjf"}],"key":"lJL5FMcG99"}],"key":"TiK2hLGq5u"}],"key":"i3t4m1ZiRr"},{"type":"paragraph","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"children":[{"type":"text","value":"Rule:","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"ihBlCQSPss"}],"key":"HXzwSUTo9m"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":135,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"No business logic in workflow YAML; logic lives in ","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"GlvFD6CoSa"},{"type":"inlineCode","value":"Makefile","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"dto3fAzWZa"},{"type":"text","value":" and ","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"RWv3UsusYR"},{"type":"inlineCode","value":"src-scripts/","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"hyydfFxw8e"},{"type":"text","value":".","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"r6KFeDdKDW"}],"key":"po7qWuDAfQ"}],"key":"MAfbej9L9V"},{"type":"listItem","spread":true,"position":{"start":{"line":136,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"YAML only wires triggers, permissions, cache restore/save, and target invocation.","position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"key":"aDx5JxJBPV"}],"key":"qWgWavadqv"}],"key":"kJkvlYXswP"}],"key":"TlC99FNBLD"},{"type":"heading","depth":3,"position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"children":[{"type":"text","value":"7) Impact of Multi-Surface Refactor","position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"key":"odwOdMy03v"}],"identifier":"id-7-impact-of-multi-surface-refactor","label":"7) Impact of Multi-Surface Refactor","html_id":"id-7-impact-of-multi-surface-refactor","implicit":true,"key":"U5irm6QAnv"},{"type":"paragraph","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"children":[{"type":"text","value":"If Kroki-rs adopts the multi-surface architecture (core/interface/transport/adapters), ","key":"FJ5UTJ2YCh"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"s65DGtAQWP"}],"key":"iaZRSdUgXY"},{"type":"text","value":"/container strategy should shift from a single-project pipeline to a contract-oriented workspace pipeline.","key":"XZKQiWrbvF"}],"key":"gJvCTl2HxV"},{"type":"paragraph","position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"children":[{"type":"text","value":"Changes to consider:","position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"key":"CM6xp63LBM"}],"key":"WL3MvIJA8Q"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":144,"column":1},"end":{"line":154,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":144,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Split ","key":"BbpxaNI8Lq"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"uI8GndCIxt"}],"key":"ksAi5dOwMA"},{"type":"text","value":" targets by layer:","key":"k4CCfqrs67"}],"key":"Q6sdQsF4QW"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":145,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"core","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"CVF6apDMUK"},{"type":"text","value":" (pure Rust, fastest checks)","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"h8UgroCITM"}],"key":"B31AoaUH8r"}],"key":"chfy9LHxOV"},{"type":"listItem","spread":true,"position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"interface/contracts","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"key":"iy2ng0LraY"},{"type":"text","value":" (schema compatibility checks)","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"key":"cQZTjBla1Y"}],"key":"ZPd121uTvq"}],"key":"NmMkOS1Df3"},{"type":"listItem","spread":true,"position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"transport/adapters","position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"key":"o08HN4mHas"},{"type":"text","value":" (HTTP, ","key":"VDGt8hdy27"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"FczO0rp4Ot"}],"key":"zem2U04iE8"},{"type":"text","value":", plugin integration checks)","key":"baGQ7IHrci"}],"key":"XHntJ5pv1W"}],"key":"EkDXDGKxo7"}],"key":"MkU980d4jU"}],"key":"h9Vm8veATN"},{"type":"listItem","spread":true,"position":{"start":{"line":148,"column":1},"end":{"line":151,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add contract compatibility gates:","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"key":"vJYOPZxu5x"}],"key":"LVKktmNwZE"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":149,"column":1},"end":{"line":151,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"schema diff checks","position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"key":"Y2rtWYB0Ao"}],"key":"MEFq6k49ZA"}],"key":"XIgxvi4LpO"},{"type":"listItem","spread":true,"position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"backward-compatibility policy enforcement","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"key":"YKkGf47T9B"}],"key":"DXRos5NJli"}],"key":"IdlnRul9HG"},{"type":"listItem","spread":true,"position":{"start":{"line":151,"column":1},"end":{"line":151,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"generated type/","key":"MmgK4xLuWg"},{"type":"abbreviation","title":"Application Programming Interface.","children":[{"type":"text","value":"API","key":"cj0fp7w6g9"}],"key":"iTssO4Aui5"},{"type":"text","value":" conformance tests","key":"tVjpWkY1MR"}],"key":"UdhdpHc5u5"}],"key":"dhwdf2ooYC"}],"key":"Rab7S0XdtD"}],"key":"RjzGUEeLcE"},{"type":"listItem","spread":true,"position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Partition caches by crate group and feature profile to avoid unnecessary invalidation.","position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"key":"DkiFxdubdV"}],"key":"fEnoYhlAYV"}],"key":"Ctmgn1VVI0"},{"type":"listItem","spread":true,"position":{"start":{"line":153,"column":1},"end":{"line":154,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep one shared base ","key":"yIrFgHe0TP"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"csx0eFrMGp"}],"key":"La7JujwvLj"},{"type":"text","value":" image, but allow optional adapter extension images for stack-specific dependencies.","key":"pzLXO0XRgS"}],"key":"F89AnWxN7b"}],"key":"R4mOCOSJaG"}],"key":"lsbnisNuZu"},{"type":"heading","depth":3,"position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"children":[{"type":"text","value":"8) Generic Platform Model (Beyond This Repo)","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"key":"q8N66LgOS8"}],"identifier":"id-8-generic-platform-model-beyond-this-repo","label":"8) Generic Platform Model (Beyond This Repo)","html_id":"id-8-generic-platform-model-beyond-this-repo","implicit":true,"key":"QDc9bUNPWc"},{"type":"paragraph","position":{"start":{"line":157,"column":1},"end":{"line":157,"column":1}},"children":[{"type":"text","value":"This proposal can be generalized into a reusable ","key":"vQqAZeFzSA"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"GNWLv64sQB"}],"key":"NuDhcxT8ex"},{"type":"text","value":"/dev orchestration model with stack extensions.","key":"gNUXGARaNu"}],"key":"lX2ICR32U9"},{"type":"paragraph","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"children":[{"type":"text","value":"Platform core (generic):","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"key":"L2y7Eidam7"}],"key":"tmPKIGWS0t"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":161,"column":1},"end":{"line":166,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":161,"column":1},"end":{"line":161,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Fingerprinted container identity","position":{"start":{"line":161,"column":1},"end":{"line":161,"column":1}},"key":"wY4wyASjWX"}],"key":"rzJO0YvWwL"}],"key":"qgo0U0Jlmk"},{"type":"listItem","spread":true,"position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Standard cache root contract","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"tIoiBWNeod"}],"key":"jEQEwi4FeJ"}],"key":"nxt7ofvAVs"},{"type":"listItem","spread":true,"position":{"start":{"line":163,"column":1},"end":{"line":163,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Canonical command graph (setup/build/lint/test/package/release)","position":{"start":{"line":163,"column":1},"end":{"line":163,"column":1}},"key":"I9RmKsZv45"}],"key":"sl13mvFQ70"}],"key":"UB5uvwy8JY"},{"type":"listItem","spread":true,"position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Provider-agnostic check reporting and status mapping","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"key":"Gee2ETaMvY"}],"key":"E0XEiUY8Jq"}],"key":"Ctxpfr2gdS"},{"type":"listItem","spread":true,"position":{"start":{"line":165,"column":1},"end":{"line":166,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Policy engine for ","key":"jhWoYQmpSx"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"BzMpcFNUkY"}],"key":"Q20iJJhzgh"},{"type":"text","value":" gate tiers and branch protection contracts","key":"jHUfpN2WOk"}],"key":"bpslJ90g0T"}],"key":"PY1mUEdB8d"}],"key":"Ft4mppdYBU"},{"type":"paragraph","position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"children":[{"type":"text","value":"Stack extensions (examples):","position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"key":"t6eUcbOTiy"}],"key":"QOb9KhqQu4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":169,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":169,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Rust:","position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"key":"Rby2HEqFsP"}],"key":"Fw7BBFJEfZ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":170,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"cargo","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"X22UuhMewj"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"iKPfN1EWbx"},{"type":"inlineCode","value":"nextest","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"em2Pv4eAD2"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"b4Bc64zOJX"},{"type":"inlineCode","value":"clippy","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"Dj0tXPdjBk"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"KglSASLHSm"},{"type":"inlineCode","value":"rustfmt","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"GLfKzrUkNM"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"PseFY7cPw8"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"CuWvssOBkO"}],"key":"NdpfK6v05K"}],"key":"qCl2Up5ORO"},{"type":"listItem","spread":true,"position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"optional workspace-aware cache slicing by crate","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"key":"cymVtcqCGn"}],"key":"ez7NnmZR3b"}],"key":"NowBMkWJj3"}],"key":"jIVOsavq3G"}],"key":"fA3Ib2pf0g"},{"type":"listItem","spread":true,"position":{"start":{"line":172,"column":1},"end":{"line":174,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Node.js/TypeScript:","position":{"start":{"line":172,"column":1},"end":{"line":172,"column":1}},"key":"SjFge7zW5c"}],"key":"MR0lsbOwOq"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":173,"column":1},"end":{"line":174,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"pnpm","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"NA23WTQ4T9"},{"type":"text","value":"/","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"agNUzHn9rg"},{"type":"inlineCode","value":"npm","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"A3iHXrPmIW"},{"type":"text","value":" cache, lockfile-aware install, ","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"vnsoAiZpYN"},{"type":"inlineCode","value":"tsc --noEmit","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"mBOTNJcgH3"},{"type":"text","value":", eslint, vitest/jest","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"j8F2mAZeNI"}],"key":"c2WFXTngcD"}],"key":"NIl5cXpqeN"},{"type":"listItem","spread":true,"position":{"start":{"line":174,"column":1},"end":{"line":174,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cache keys include package manager + lockfile + Node version","position":{"start":{"line":174,"column":1},"end":{"line":174,"column":1}},"key":"oSDvEOHvsJ"}],"key":"xGn04N9mN5"}],"key":"JcbQvtubPB"}],"key":"F1D5l1SV2f"}],"key":"l2UAsOUUdF"},{"type":"listItem","spread":true,"position":{"start":{"line":175,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"React/Lit front-end:","position":{"start":{"line":175,"column":1},"end":{"line":175,"column":1}},"key":"qjvUNT0stV"}],"key":"vSXUaXTyG5"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":176,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"build/test/lint plus storybook/e2e extension gates","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"key":"ItDwkQZAqE"}],"key":"sQQrCAVsPd"}],"key":"vnOABBNug0"},{"type":"listItem","spread":true,"position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"optional browser test container profile","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"MktROhwxWY"}],"key":"NL49JOuISc"}],"key":"qdO9UbXQWF"}],"key":"Ug5ffWO5TG"}],"key":"aWgWTfIaYE"},{"type":"listItem","spread":true,"position":{"start":{"line":178,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"VS Code extension:","position":{"start":{"line":178,"column":1},"end":{"line":178,"column":1}},"key":"nhZZtd3DI2"}],"key":"RF0ObQX0JR"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"vsce","position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"key":"bLiXvGcmEo"},{"type":"text","value":" packaging, extension host tests, ","key":"cxpQptmjNA"},{"type":"abbreviation","title":"Application Programming Interface.","children":[{"type":"text","value":"API","key":"scLDGmw0tS"}],"key":"ze0GS0rzoq"},{"type":"text","value":" compatibility checks","key":"SOt9mcW3lT"}],"key":"MruFqXtplB"}],"key":"wBoqWo8Duj"}],"key":"dEIacakzcL"}],"key":"iJ9pHyYWT9"},{"type":"listItem","spread":true,"position":{"start":{"line":180,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Tauri:","position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"key":"jOJFOpGAGq"}],"key":"Nq1mBaSOFG"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":181,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":181,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"host OS dependency profiles, frontend + Rust dual cache strategy, bundling/signing stages","position":{"start":{"line":181,"column":1},"end":{"line":181,"column":1}},"key":"dcPpwPXhMW"}],"key":"bxAhUNMigV"}],"key":"UdeLS2qNTq"}],"key":"tgxBfxqxZ3"}],"key":"pHptBJ3ZCe"}],"key":"QpFumgyUdB"},{"type":"paragraph","position":{"start":{"line":183,"column":1},"end":{"line":183,"column":1}},"children":[{"type":"text","value":"Principle:","position":{"start":{"line":183,"column":1},"end":{"line":183,"column":1}},"key":"pfa2mfdpwu"}],"key":"MfqG9Xxjgr"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":185,"column":1},"end":{"line":186,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":185,"column":1},"end":{"line":186,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep 85-90% behavior in the core orchestrator; implement stack-specific logic as plugins/extensions.","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"key":"zsvFe9zqIa"}],"key":"CvFAzic42B"}],"key":"TSdrTFsY1i"}],"key":"dEBRXyWUiv"},{"type":"heading","depth":3,"position":{"start":{"line":187,"column":1},"end":{"line":187,"column":1}},"children":[{"type":"text","value":"9) Generic ","key":"Z8Fqj3eiLz"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"la5waZa0jx"}],"key":"qVa15TP5Pc"},{"type":"text","value":" Tool Design (Installable via Homebrew)","key":"pbAaxuWBYD"}],"identifier":"id-9-generic-cli-tool-design-installable-via-homebrew","label":"9) Generic CLI Tool Design (Installable via Homebrew)","html_id":"id-9-generic-cli-tool-design-installable-via-homebrew","implicit":true,"key":"VrtOckzD1s"},{"type":"paragraph","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"children":[{"type":"text","value":"Proposed tool concept: a standalone Rust ","key":"fQ5KP01HBB"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"EMTNJVeIvX"}],"key":"joe5xFOI50"},{"type":"text","value":" named ","key":"dz8zjDNPAS"},{"type":"inlineCode","value":"devflow","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"BUZow7c16z"},{"type":"text","value":" (alias ","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"M7hxBnHjKJ"},{"type":"inlineCode","value":"dwf","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"upVBavOVZ0"},{"type":"text","value":") that abstracts ","key":"ftSsEd1fen"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"EDVFag7whI"}],"key":"GohXj766I1"},{"type":"text","value":"/container/caching complexity while preserving local developer UX.","key":"WQhlSBRzBq"}],"key":"SYszODffrV"},{"type":"paragraph","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"children":[{"type":"text","value":"Design goals:","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"key":"zaxSmFNxzA"}],"key":"pxLojJrZol"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":193,"column":1},"end":{"line":197,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"One command surface across projects (","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"I3VP8R4CBr"},{"type":"inlineCode","value":"devflow setup","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"Wa2jMPoGl7"},{"type":"text","value":", ","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"iY2W6dBksX"},{"type":"inlineCode","value":"devflow verify","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"wQSVsSVN8f"},{"type":"text","value":", ","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"T9gBBSh3NT"},{"type":"inlineCode","value":"devflow ci plan","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"S2gMrC7iyQ"},{"type":"text","value":", ","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"tsvhWpOXbA"},{"type":"inlineCode","value":"devflow release","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"oMUf4rMzrM"},{"type":"text","value":").","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"Zhx1wFI0IR"}],"key":"tjA1Gl0uDf"}],"key":"L4219KyyBQ"},{"type":"listItem","spread":true,"position":{"start":{"line":194,"column":1},"end":{"line":194,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Project-level config with minimal required fields and optional extensions.","position":{"start":{"line":194,"column":1},"end":{"line":194,"column":1}},"key":"yaInvU8UpO"}],"key":"SSvPNDOAD2"}],"key":"LN54QpEdNj"},{"type":"listItem","spread":true,"position":{"start":{"line":195,"column":1},"end":{"line":195,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Deterministic container-first workflows with portable local fallback.","position":{"start":{"line":195,"column":1},"end":{"line":195,"column":1}},"key":"qVUKSSmNWO"}],"key":"ECyB8B3ayO"}],"key":"zfuwmUiY9O"},{"type":"listItem","spread":true,"position":{"start":{"line":196,"column":1},"end":{"line":197,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Native integration with GitHub Actions generation and validation.","position":{"start":{"line":196,"column":1},"end":{"line":196,"column":1}},"key":"FpWpVMTKsr"}],"key":"YwrvZH5ZNb"}],"key":"GSeonMAOTP"}],"key":"FsORQ4b43Z"},{"type":"paragraph","position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"children":[{"type":"text","value":"Canonical command interface:","position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"key":"IGHgyQxgjN"}],"key":"RPDFdsMwN3"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":200,"column":1},"end":{"line":203,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Long form: ","position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"key":"C5CYZyHTBK"},{"type":"inlineCode","value":"devflow <command>","position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"key":"Gy1u8f8rMc"}],"key":"qO8i9LuBwC"}],"key":"j1AxiKaMey"},{"type":"listItem","spread":true,"position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Short alias: ","position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"key":"YnnKjTMZ91"},{"type":"inlineCode","value":"dwf <command>","position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"key":"xQBcv4xBas"}],"key":"O9ui8S7oOK"}],"key":"kSL7GLHHeO"},{"type":"listItem","spread":true,"position":{"start":{"line":202,"column":1},"end":{"line":203,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Examples: ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"lHUNsb2MHm"},{"type":"inlineCode","value":"dwf setup","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"WlbPWMGESE"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"KSVExvQakY"},{"type":"inlineCode","value":"dwf lint","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"D1gZcEGUQ5"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"cE1vvv2U8n"},{"type":"inlineCode","value":"dwf test","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"HqU45K10o1"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"wqAdvALxfF"},{"type":"inlineCode","value":"dwf verify","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"r9pMvSn26j"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"tyBlKEfZIK"},{"type":"inlineCode","value":"dwf ci generate","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"UuyHZiDcYS"}],"key":"afdPGqi742"}],"key":"gZxvZMusOR"}],"key":"UmVzGfq6J4"},{"type":"paragraph","position":{"start":{"line":204,"column":1},"end":{"line":204,"column":1}},"children":[{"type":"text","value":"High-level architecture:","position":{"start":{"line":204,"column":1},"end":{"line":204,"column":1}},"key":"PkWPvl8qYo"}],"key":"Az7ZO5GRqL"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":206,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":206,"column":1},"end":{"line":210,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-core","position":{"start":{"line":206,"column":1},"end":{"line":206,"column":1}},"key":"OQIcD4i2eW"},{"type":"text","value":":","position":{"start":{"line":206,"column":1},"end":{"line":206,"column":1}},"key":"PDlQWNsN7q"}],"key":"fKmTsAk9TZ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":207,"column":1},"end":{"line":210,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":207,"column":1},"end":{"line":207,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Directed Acyclic Graph.","children":[{"type":"text","value":"DAG","key":"vqbRuKDZse"}],"key":"oIJr52HS5H"},{"type":"text","value":"/task executor","key":"SYQwP8dK35"}],"key":"Bsi1nX0H1H"}],"key":"YlUH61mILk"},{"type":"listItem","spread":true,"position":{"start":{"line":208,"column":1},"end":{"line":208,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cache key builder","position":{"start":{"line":208,"column":1},"end":{"line":208,"column":1}},"key":"vPnYQJMEYZ"}],"key":"gdkpjKSbOH"}],"key":"qZu1oh1CWT"},{"type":"listItem","spread":true,"position":{"start":{"line":209,"column":1},"end":{"line":209,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"container resolver (local daemon, ","key":"eIPfLHF09g"},{"type":"abbreviation","title":"GitHub Container Registry.","children":[{"type":"text","value":"GHCR","key":"gN7qMAow9g"}],"key":"A4L4WTQ3xv"},{"type":"text","value":")","key":"BtD7DWJzX7"}],"key":"KfT42gybCo"}],"key":"a9elrLJrmf"},{"type":"listItem","spread":true,"position":{"start":{"line":210,"column":1},"end":{"line":210,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"status/check emitter abstraction","position":{"start":{"line":210,"column":1},"end":{"line":210,"column":1}},"key":"nYGsad2Mw1"}],"key":"dR5zGarWWa"}],"key":"DsNQ44O7Xe"}],"key":"n1deM6nSRc"}],"key":"Vu2LjItGfD"},{"type":"listItem","spread":true,"position":{"start":{"line":211,"column":1},"end":{"line":217,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-ext-*","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"d7abEqsWS8"},{"type":"text","value":":","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"xah5NH2VA7"}],"key":"oaPx7E7axd"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":212,"column":1},"end":{"line":217,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":212,"column":1},"end":{"line":212,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-rust","position":{"start":{"line":212,"column":1},"end":{"line":212,"column":1}},"key":"njZ9aMuUKw"}],"key":"T56lMFK3Ve"}],"key":"E3GhsfMXqw"},{"type":"listItem","spread":true,"position":{"start":{"line":213,"column":1},"end":{"line":213,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-node","position":{"start":{"line":213,"column":1},"end":{"line":213,"column":1}},"key":"Kc3qkxiq2U"}],"key":"lY4r2fUBHQ"}],"key":"i4xpPwYBAj"},{"type":"listItem","spread":true,"position":{"start":{"line":214,"column":1},"end":{"line":214,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-frontend-react","position":{"start":{"line":214,"column":1},"end":{"line":214,"column":1}},"key":"LWGIpUPTyq"}],"key":"jzbAKP2TYJ"}],"key":"xNHPzCTego"},{"type":"listItem","spread":true,"position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-frontend-lit","position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"key":"lIneukucFL"}],"key":"D94jFM26bb"}],"key":"U18ExTDWd5"},{"type":"listItem","spread":true,"position":{"start":{"line":216,"column":1},"end":{"line":216,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-vscode","position":{"start":{"line":216,"column":1},"end":{"line":216,"column":1}},"key":"q4MZiFSWDg"}],"key":"FsQDlcA34W"}],"key":"Hhv3HwPit8"},{"type":"listItem","spread":true,"position":{"start":{"line":217,"column":1},"end":{"line":217,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-tauri","position":{"start":{"line":217,"column":1},"end":{"line":217,"column":1}},"key":"xb13ZVrnAQ"}],"key":"R1DzqI9XKK"}],"key":"WsaP2Fwpc5"}],"key":"z5OKHS4snh"}],"key":"h4bXD9bxOO"},{"type":"listItem","spread":true,"position":{"start":{"line":218,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-gh","position":{"start":{"line":218,"column":1},"end":{"line":218,"column":1}},"key":"DxQyW0VKek"},{"type":"text","value":":","position":{"start":{"line":218,"column":1},"end":{"line":218,"column":1}},"key":"kriw68zpqv"}],"key":"Zg7UKkgJIQ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"workflow templating, required-check contract generation, cache strategy synthesis","position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"key":"CmVAiLHZ1h"}],"key":"xYpnmeOpmn"}],"key":"IpUvf3q3Ao"}],"key":"yHd9kNEfaO"}],"key":"z6g7MP0PPs"},{"type":"listItem","spread":true,"position":{"start":{"line":220,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-policy","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"JqDkiGPcqs"},{"type":"text","value":":","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"fGFgHAFIxZ"}],"key":"iN9ieeSPkE"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":221,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":221,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"branch rules, ","key":"MhjXEmTCEV"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"v1K8UtyY8l"}],"key":"j7DXG0dNLe"},{"type":"text","value":" gates, release constraints, environment matrix policy","key":"E0i9Rpvfqi"}],"key":"PA1cbBdz4n"}],"key":"u4K2FMWhfP"}],"key":"g76svlQY9Q"}],"key":"gVopUyX5v1"}],"key":"X4lF3xR15J"},{"type":"paragraph","position":{"start":{"line":223,"column":1},"end":{"line":223,"column":1}},"children":[{"type":"text","value":"Configuration model (example):","position":{"start":{"line":223,"column":1},"end":{"line":223,"column":1}},"key":"BOREfEp4x0"}],"key":"FN5bqDLwwO"},{"type":"code","lang":"toml","value":"[project]\nname = \"kroki-rs\"\nstack = [\"rust\"]\n\n[container]\nimage = \"ghcr.io/org/repo-ci\"\nfingerprint_inputs = [\"Dockerfile\", \"Makefile\", \"src-scripts/**\", \"rust-toolchain.toml\"]\n\n[cache]\nroot = \".cache/devflow\"\nstrategy = \"layered\"\n\n[targets]\npr = [\"fmt\", \"lint\", \"build\", \"test\"]\nmain = [\"fmt\", \"lint\", \"build\", \"test\", \"smoke\", \"security\"]\n\n[extensions.rust]\nfeatures = [\"native-browser\"]\ntest_runner = \"nextest\"","position":{"start":{"line":225,"column":1},"end":{"line":245,"column":1}},"key":"QAqzcpKXZ3"},{"type":"paragraph","position":{"start":{"line":247,"column":1},"end":{"line":247,"column":1}},"children":[{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"E0g18bVDpN"}],"key":"fgYG1xBUjm"},{"type":"text","value":" capabilities:","key":"h3PHPtyMou"}],"key":"oRrC41fRyi"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":249,"column":1},"end":{"line":255,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"init","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"SV5xKiqZWD"},{"type":"text","value":": detect stack and scaffold config + make targets + workflow skeleton.","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"RvFGgJnGPq"}],"key":"ZftNUq1hWb"}],"key":"B6ZkVltx8z"},{"type":"listItem","spread":true,"position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"doctor","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"key":"yIob9cCH7b"},{"type":"text","value":": validate container engine, cache root permissions, toolchain drift.","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"key":"SFaNjEppbn"}],"key":"keghyxPGnF"}],"key":"PDfSZsWI9s"},{"type":"listItem","spread":true,"position":{"start":{"line":251,"column":1},"end":{"line":251,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"verify","position":{"start":{"line":251,"column":1},"end":{"line":251,"column":1}},"key":"u0XpohD1lI"},{"type":"text","value":": run the canonical local containerized pipeline.","position":{"start":{"line":251,"column":1},"end":{"line":251,"column":1}},"key":"RY6KEGJQae"}],"key":"hMwlv1hYYp"}],"key":"sUIJVVG3LA"},{"type":"listItem","spread":true,"position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ci generate","position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"key":"QelXwCN4Kv"},{"type":"text","value":": generate/update GitHub Actions workflow from config.","position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"key":"yfDDZb6Ny5"}],"key":"FFjIBPBS1n"}],"key":"M6RlMMOjbe"},{"type":"listItem","spread":true,"position":{"start":{"line":253,"column":1},"end":{"line":253,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"cache stats/prune","position":{"start":{"line":253,"column":1},"end":{"line":253,"column":1}},"key":"RmME4mrtIw"},{"type":"text","value":": inspect and clean cache by scope/age.","position":{"start":{"line":253,"column":1},"end":{"line":253,"column":1}},"key":"SqtKlzOCCz"}],"key":"PZZOaIJ0q1"}],"key":"jSGFZeIwsG"},{"type":"listItem","spread":true,"position":{"start":{"line":254,"column":1},"end":{"line":255,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"policy check","position":{"start":{"line":254,"column":1},"end":{"line":254,"column":1}},"key":"nAdNKQzx0Q"},{"type":"text","value":": ensure repo protections and required checks match config.","position":{"start":{"line":254,"column":1},"end":{"line":254,"column":1}},"key":"besQFLEGky"}],"key":"tVCo72ZdaA"}],"key":"dD6Obnq8vM"}],"key":"mVVRc8JzuX"},{"type":"paragraph","position":{"start":{"line":256,"column":1},"end":{"line":256,"column":1}},"children":[{"type":"text","value":"Canonical command mapping by stack:","position":{"start":{"line":256,"column":1},"end":{"line":256,"column":1}},"key":"byGug1GqXU"}],"key":"bCHn9q9e3v"},{"type":"table","position":{"start":{"line":258,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Canonical command","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"p5JBSXdgrs"}],"key":"sUae4MEQ0F"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Rust stack","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"HgsSfPYC7x"}],"key":"K7DdOJnapj"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Node/TypeScript (","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"c9UhIdlJfl"},{"type":"inlineCode","value":"pnpm","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"B6lExSQdDp"},{"type":"text","value":")","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"cHdAU5fwel"}],"key":"SMcpMyEFFZ"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"React/Lit frontend","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"aXoEgFkEi0"}],"key":"QId7nOeu4S"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"VS Code extension","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"vrpxcfAkqn"}],"key":"aqbiaEZG29"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Tauri","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"OW1UeH5SqQ"}],"key":"qrfGXxsLJP"}],"key":"D5ISC7xlli"},{"type":"tableRow","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"dwf setup","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"hKkWj6eijW"}],"key":"eW5G8Qo8VB"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"rustup show","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"CMor7OY8Zt"},{"type":"text","value":", toolchain sync, container/image resolve","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"cpIFaVqOOw"}],"key":"iB4hczQXmc"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"pnpm install --frozen-lockfile","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"eCzdj6QoeR"}],"key":"SmGtC2pC0z"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"pnpm install --frozen-lockfile","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"ucICu535Bd"}],"key":"d8tq9ujNNX"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"pnpm install --frozen-lockfile","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"pKr20HLNRf"}],"key":"fd4ufVlk70"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"text","value":"Rust + ","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"d8l1rcBdmk"},{"type":"inlineCode","value":"pnpm install","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"nxUFTzUEM1"},{"type":"text","value":" + platform deps check","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"zHThzD8Mx6"}],"key":"awtqRHM22D"}],"key":"k2444eug5U"},{"type":"tableRow","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"dwf fmt","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"FaSWHcTfTl"}],"key":"Bw4Tde58un"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"Zkd35UPUUj"}],"key":"VYgrcxZd9R"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -w .","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"PLIFmr2RZO"},{"type":"text","value":" (or repo formatter)","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"FtodVHRUFU"}],"key":"gg0zE65zQg"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -w .","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"fSTq4E2sR1"}],"key":"nL2HF5KUBT"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -w .","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"f9OkMWYJQZ"}],"key":"o4LeauwK6L"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"KrOfbMOjtV"},{"type":"text","value":" + frontend formatter","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"ZIezumokqu"}],"key":"X3WkasNVUY"}],"key":"iprpkXKvY0"},{"type":"tableRow","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"dwf fmt-check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"fwLt2vSyIV"}],"key":"hfGcsQSXeE"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all -- --check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"gNPsIFQb8P"}],"key":"PAaZmvLYF4"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -c .","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"Fr8aYPI28I"}],"key":"XZahOUAbKd"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -c .","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"LtYWndcZgV"}],"key":"aJXpXqS1si"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -c .","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"Kap8SFByVk"}],"key":"J4N8z3IwqU"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all -- --check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"JOURHtr1Vv"},{"type":"text","value":" + frontend fmt check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"nyUAyg1kgh"}],"key":"ODocK1c8DO"}],"key":"q8IO2ptQ0a"},{"type":"tableRow","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"dwf lint","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"T2ocbi5T8q"}],"key":"AYhp3ka1iG"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"cargo clippy --all-targets -- -D warnings","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"wH74S23ZXr"}],"key":"zcMYXEiac6"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"pnpm eslint .","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"qmbn35E9ig"},{"type":"text","value":" + ","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"pGV5uOFYFt"},{"type":"inlineCode","value":"pnpm tsc --noEmit","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"lMj1fqjtR2"}],"key":"y0cIjINeOy"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"pnpm eslint .","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"XRFS10Lfxa"},{"type":"text","value":" + typecheck","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"seKFrkCaZV"}],"key":"Kk8xJEs9C7"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"pnpm eslint .","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"dU2Nfdpw85"},{"type":"text","value":" + extension typecheck","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"u8XU3du6ps"}],"key":"cg4Ij8NMhc"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"text","value":"Rust clippy + frontend eslint/typecheck","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"aLq0m9aBxZ"}],"key":"uC0so3LdA4"}],"key":"iqCVUmELCZ"},{"type":"tableRow","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"dwf build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"ayuCYeSez4"}],"key":"YeK5gbzqwo"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"cargo build --release","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"VGNtq0SHuZ"}],"key":"N072iaEUw4"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"pnpm build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"PQwXBnnmGD"}],"key":"ey5WbWEwCR"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"pnpm build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"FmPbYcNxY1"}],"key":"ol1J8M7Cys"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"pnpm package","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"yZhGZBF4eM"},{"type":"text","value":" / extension bundle","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"KRE1HEDvQZ"}],"key":"cROP8fbPMN"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"cargo build --release","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"PyvXpZyuMl"},{"type":"text","value":" + frontend build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"yPi2HNA84y"}],"key":"PA5r3VTGYd"}],"key":"Pr5hTcKprU"},{"type":"tableRow","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"dwf test","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"O2wNi6FOW9"}],"key":"TfVzhZ3xcy"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"cargo nextest run","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"CYSwb9IytI"}],"key":"yKX4lDW9VO"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"pnpm test","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"z1EYNAMtr7"},{"type":"text","value":" (vitest/jest)","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"CdXCJvmCP5"}],"key":"nnIC7rg50s"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"pnpm test","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"Z4FmtZOS3z"}],"key":"pNSQJ3TgON"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"text","value":"extension host tests","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"bWHTGRcOp0"}],"key":"oo1KfDmd4Y"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"cargo nextest run","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"Ru0uk8iXCF"},{"type":"text","value":" + frontend tests","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"rzALsxkYeM"}],"key":"RMLJWQVlx3"}],"key":"TaFm3D7FrC"},{"type":"tableRow","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"inlineCode","value":"dwf smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"C16uaYFtmx"}],"key":"EtCzHSj6r6"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"app health/","key":"dUoMLrhjwQ"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"xdaLR6yzB7"}],"key":"Azoo4libX2"},{"type":"text","value":" smoke script","key":"uwpYqXXIc9"}],"key":"ukLRdcSFFW"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"app startup + HTTP smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"QvFDLJhGMp"}],"key":"OoiJIgMN2j"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"preview/build smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"rGXjpLM9xe"}],"key":"jcq08ARaRj"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"install/package smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"PX8MtG8yoi"}],"key":"wZSvvnzvbz"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"app startup/bundle smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"r41KrzwzSU"}],"key":"xXmgnr9Qq0"}],"key":"nrTesxulJL"},{"type":"tableRow","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"inlineCode","value":"dwf verify","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"R0BrHFsWn4"}],"key":"Z97g9aCBLa"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"inlineCode","value":"fmt-check + lint + build + test + smoke","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"PEJDUbC7iS"}],"key":"y97Rc4gt75"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence mapped to JS toolchain","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"CW70dzdMiL"}],"key":"Xp3iLyI5bZ"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"s7MtSeLWT7"}],"key":"GWk2sHjkEk"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"bZjLDXKJKb"}],"key":"bv4pglhMby"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"mkkKm9urRT"}],"key":"tQpuTwGlFN"}],"key":"oJ3TbeLlIY"},{"type":"tableRow","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"inlineCode","value":"dwf ci generate","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"cfUgs2EYhT"}],"key":"aQrjzVYckM"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"generate Rust-oriented ","key":"ZtXg8bc8d9"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"vcjhRSGNHY"}],"key":"XdFPaFuUqe"},{"type":"text","value":" jobs/cache keys","key":"oPq86Yg21y"}],"key":"ZN8X6j7ADT"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"generate pnpm/node ","key":"xElyVPIZU2"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"mZpU80EW5D"}],"key":"s5PEMXyMDA"},{"type":"text","value":" jobs/cache keys","key":"EdXSV2oPJO"}],"key":"OHGWeDbpiK"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"add frontend/e2e job templates","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"Kb0wdMMZP5"}],"key":"S4RhFJmkc8"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"add extension packaging jobs","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"tNlK9kP9ot"}],"key":"Q3NyEr5NiP"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"add OS matrix + bundling/signing jobs","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"SibMFW8Fxg"}],"key":"UHHsVbYgWw"}],"key":"k5b2ZsxvCR"}],"key":"q5CpJzVgXI"},{"type":"paragraph","position":{"start":{"line":270,"column":1},"end":{"line":270,"column":1}},"children":[{"type":"text","value":"Notes:","position":{"start":{"line":270,"column":1},"end":{"line":270,"column":1}},"key":"hm4BIIn2aY"}],"key":"UUvxcWLaf2"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":272,"column":1},"end":{"line":274,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":272,"column":1},"end":{"line":272,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The canonical command names are stable for developers; stack-specific executors are resolved from config extensions.","position":{"start":{"line":272,"column":1},"end":{"line":272,"column":1}},"key":"Mh9cplU9WD"}],"key":"Rsv1vyIa30"}],"key":"eR7bg3puoN"},{"type":"listItem","spread":true,"position":{"start":{"line":273,"column":1},"end":{"line":274,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"dwf verify","position":{"start":{"line":273,"column":1},"end":{"line":273,"column":1}},"key":"mOeBwjP9Yc"},{"type":"text","value":" should always run inside the configured fingerprinted container in ","key":"z4yo0Zxq2d"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"NFD9bm3Tr5"}],"key":"qlQNWDic3j"},{"type":"text","value":", and optionally locally via containerized mode.","key":"yDp7OtPKP2"}],"key":"Z8wtfqBKdj"}],"key":"Tp1Q5dGYve"}],"key":"ljawLXIvLS"},{"type":"paragraph","position":{"start":{"line":275,"column":1},"end":{"line":275,"column":1}},"children":[{"type":"text","value":"Rollout path for this project:","position":{"start":{"line":275,"column":1},"end":{"line":275,"column":1}},"key":"aOYPj2Kky7"}],"key":"yCoZbG98wh"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":277,"column":1},"end":{"line":280,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Phase A: treat current ","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"PCagM1gQiN"},{"type":"inlineCode","value":"dflow","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"ueVBT5JTmB"},{"type":"text","value":" as compatibility facade and map it to ","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"IzK8rFQmZk"},{"type":"inlineCode","value":"devflow","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"ElCecMgUvW"},{"type":"text","value":"/","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"QNEn5ScDvd"},{"type":"inlineCode","value":"dwf","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"jH7Ph1GKrA"},{"type":"text","value":" commands.","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"jWhOm6UI3y"}],"key":"XGtRR5bKLi"}],"key":"Tf0n5bdaKv"},{"type":"listItem","spread":true,"position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Phase B: move cache/image/check contracts into typed config.","position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"key":"qqyxN18Wa0"}],"key":"mKJViwtBEP"}],"key":"jh5Yw0uaU2"},{"type":"listItem","spread":true,"position":{"start":{"line":279,"column":1},"end":{"line":280,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Phase C: keep project-specific extensions only for diagram-tool dependencies and release packaging nuances.","position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"key":"M47i4TZe0W"}],"key":"PH18tESesf"}],"key":"wj311HB0Xq"}],"key":"PGsWRSgQ20"},{"type":"heading","depth":2,"position":{"start":{"line":281,"column":1},"end":{"line":281,"column":1}},"children":[{"type":"text","value":"Required Repo Changes","position":{"start":{"line":281,"column":1},"end":{"line":281,"column":1}},"key":"GKahFvzE8o"}],"identifier":"required-repo-changes","label":"Required Repo Changes","html_id":"required-repo-changes","implicit":true,"key":"fBPnqb8O8B"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":283,"column":1},"end":{"line":298,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Standardize fingerprint algorithm docs + scripts to one input set.","position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"key":"uZSRyVeBa7"}],"key":"YuhpE8pKrQ"}],"key":"tGKFocAo02"},{"type":"listItem","spread":true,"position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Introduce ","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"fDuoXHTCYn"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"yM7LOBKzAE"},{"type":"text","value":" and replace hardcoded ","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"kgxuYjMnYc"},{"type":"inlineCode","value":".cargo-cache","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"ldxe7d8JZL"},{"type":"text","value":"/","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"pgg38RAyiU"},{"type":"inlineCode","value":"target/ci","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"Z8ojKx2PjK"},{"type":"text","value":" paths in scripts and make fragments.","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"ifsaGWfcoZ"}],"key":"mXzuRKjDPo"}],"key":"qYHaSF9lkE"},{"type":"listItem","spread":true,"position":{"start":{"line":285,"column":1},"end":{"line":289,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add explicit ","key":"mKYiW9PIQn"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"JSIT36bLk1"}],"key":"kpwCoJUtFc"},{"type":"text","value":"-tier targets:","key":"OyFewrF9RJ"}],"key":"uiIrEVwINF"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":286,"column":1},"end":{"line":289,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":286,"column":1},"end":{"line":286,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"fmt-check","position":{"start":{"line":286,"column":1},"end":{"line":286,"column":1}},"key":"JX6HwWM1T9"}],"key":"mABGs35Pq5"}],"key":"Hi6CeqJ5hU"},{"type":"listItem","spread":true,"position":{"start":{"line":287,"column":1},"end":{"line":287,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"lint-clippy","position":{"start":{"line":287,"column":1},"end":{"line":287,"column":1}},"key":"q8N1PUmFvo"}],"key":"NB8jQBUFbJ"}],"key":"g6ITbkFRCE"},{"type":"listItem","spread":true,"position":{"start":{"line":288,"column":1},"end":{"line":288,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"test-pr","position":{"start":{"line":288,"column":1},"end":{"line":288,"column":1}},"key":"aVEZG99cMU"}],"key":"VsmJeq5ctz"}],"key":"oqUmbUqwMz"},{"type":"listItem","spread":true,"position":{"start":{"line":289,"column":1},"end":{"line":289,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"test-full","position":{"start":{"line":289,"column":1},"end":{"line":289,"column":1}},"key":"uk2Qhaorqm"}],"key":"Z3GRgpC4CW"}],"key":"WpZWA02owx"}],"key":"JXuEakgYFJ"}],"key":"MARoQNUYvy"},{"type":"listItem","spread":true,"position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Consolidate ","key":"vXC6W3FdAQ"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"dB9rObNSqE"}],"key":"drAJ99k3pf"},{"type":"text","value":" triggers into one workflow (","key":"Stpp4kVECb"},{"type":"inlineCode","value":"main","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"UFSuxbSmT3"},{"type":"text","value":", ","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"ztZuXTGb0L"},{"type":"inlineCode","value":"develop","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"zFKI48JEGC"},{"type":"text","value":") and keep release/package workflows separate.","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"oSvZm73jCw"}],"key":"jPnKCOnNIH"}],"key":"IF56X81D6L"},{"type":"listItem","spread":true,"position":{"start":{"line":291,"column":1},"end":{"line":291,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add cache key normalization helper (script or make target) reused by both local diagnostics and GHA.","position":{"start":{"line":291,"column":1},"end":{"line":291,"column":1}},"key":"jO6Y2PbvTE"}],"key":"mumB6jNQSe"}],"key":"zsnfZucAKX"},{"type":"listItem","spread":true,"position":{"start":{"line":292,"column":1},"end":{"line":295,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add ","key":"R2dx4HFqGZ"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"hyf0n3Mn7H"}],"key":"VuTFR0CMUA"},{"type":"text","value":" observability summary:","key":"f2yJlAtWF7"}],"key":"Gk1CUoWyDw"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":293,"column":1},"end":{"line":295,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":293,"column":1},"end":{"line":293,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"fingerprint used","position":{"start":{"line":293,"column":1},"end":{"line":293,"column":1}},"key":"NE1cByecx7"}],"key":"rambHA7pgt"}],"key":"MSq09x4mzp"},{"type":"listItem","spread":true,"position":{"start":{"line":294,"column":1},"end":{"line":294,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cache hit/miss stats","position":{"start":{"line":294,"column":1},"end":{"line":294,"column":1}},"key":"Dwt3QwodSB"}],"key":"gF3H0utSPj"}],"key":"JlINO1CACT"},{"type":"listItem","spread":true,"position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"sccache","position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"key":"dBo6cQxYli"},{"type":"text","value":" hit ratio per run","position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"key":"jPhyxk9kuS"}],"key":"nF8NimZu2H"}],"key":"JDg4k0Sp5D"}],"key":"TELWHB1jkZ"}],"key":"J0Veof8xOb"},{"type":"listItem","spread":true,"position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add explicit note in workflow docs that ","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"XhGn3uNcId"},{"type":"inlineCode","value":"build","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"zj5cPNihYa"},{"type":"text","value":" and all ","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"l6mWT1LP2K"},{"type":"inlineCode","value":"verify-*","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"SGLsw4nvTP"},{"type":"text","value":" jobs execute in the fingerprinted ","key":"hOScg975IO"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"QS8akYIj18"}],"key":"QqAiz6LNGw"},{"type":"text","value":" container.","key":"NPMIEEI0Pg"}],"key":"kfFIYbFmD9"}],"key":"KjbVijuGqL"},{"type":"listItem","spread":true,"position":{"start":{"line":297,"column":1},"end":{"line":298,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add extension points in docs/config for future multi-surface and multi-stack orchestration.","position":{"start":{"line":297,"column":1},"end":{"line":297,"column":1}},"key":"ceuOoM7Yh4"}],"key":"lx1wInaIuj"}],"key":"LZSj4jFoSQ"}],"key":"Mh3ZA6knkX"},{"type":"heading","depth":2,"position":{"start":{"line":299,"column":1},"end":{"line":299,"column":1}},"children":[{"type":"text","value":"Suggested Implementation Plan (v0.1.0)","position":{"start":{"line":299,"column":1},"end":{"line":299,"column":1}},"key":"Pn2Z8jfbsn"}],"identifier":"suggested-implementation-plan-v0-1-0","label":"Suggested Implementation Plan (v0.1.0)","html_id":"suggested-implementation-plan-v0-1-0","implicit":true,"key":"AoqdJ4Ysyr"},{"type":"heading","depth":3,"position":{"start":{"line":301,"column":1},"end":{"line":301,"column":1}},"children":[{"type":"text","value":"Phase 1: Cache Contract and Fingerprint Consistency","position":{"start":{"line":301,"column":1},"end":{"line":301,"column":1}},"key":"jMAixRBNqn"}],"identifier":"phase-1-cache-contract-and-fingerprint-consistency","label":"Phase 1: Cache Contract and Fingerprint Consistency","html_id":"phase-1-cache-contract-and-fingerprint-consistency","implicit":true,"key":"dTH7YERJ2W"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":303,"column":1},"end":{"line":306,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add ","position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"key":"J4WtJPlrAc"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"key":"RC6sMyMQhP"},{"type":"text","value":" contract and migrate mounts/env vars.","position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"key":"oAaxn2E0bk"}],"key":"uJiEr8chuV"}],"key":"x77I1wrVsb"},{"type":"listItem","spread":true,"position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Align fingerprint implementation and documentation.","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"key":"oq7iMTYFs5"}],"key":"Bhd4wI7z1M"}],"key":"j8Wh8nx5vY"},{"type":"listItem","spread":true,"position":{"start":{"line":305,"column":1},"end":{"line":306,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Validate no regression in ","position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"key":"RwxRokBnWG"},{"type":"inlineCode","value":"./dflow ci-verify","position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"key":"eT1iJKNP5M"},{"type":"text","value":".","position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"key":"jIf9OwLpQ0"}],"key":"I59RnMKVwA"}],"key":"kkw243ZnHe"}],"key":"c8CkxpOOds"},{"type":"heading","depth":3,"position":{"start":{"line":307,"column":1},"end":{"line":307,"column":1}},"children":[{"type":"text","value":"Phase 2: ","key":"WlQMse2UZ6"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"WVGjrVUouT"}],"key":"EsyrCUKekb"},{"type":"text","value":" Job Contract Refactor","key":"AfYfXCOvBl"}],"identifier":"phase-2-ci-job-contract-refactor","label":"Phase 2: CI Job Contract Refactor","html_id":"phase-2-ci-job-contract-refactor","implicit":true,"key":"gW09kE86cR"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":309,"column":1},"end":{"line":312,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":309,"column":1},"end":{"line":309,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Create/adjust make targets for granular checks.","position":{"start":{"line":309,"column":1},"end":{"line":309,"column":1}},"key":"BUjjCg3agw"}],"key":"JYoex5iw3L"}],"key":"AJfUVp8vaC"},{"type":"listItem","spread":true,"position":{"start":{"line":310,"column":1},"end":{"line":310,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Refactor ","key":"Qk7uES0pE2"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"jmeME3x56w"}],"key":"RY1aum9rYg"},{"type":"text","value":" workflow into prep/build/parallel-verify jobs.","key":"hxvFc6e4b0"}],"key":"MbHFartImF"}],"key":"YLxOA9O88H"},{"type":"listItem","spread":true,"position":{"start":{"line":311,"column":1},"end":{"line":312,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep required checks mapped to the same stable names.","position":{"start":{"line":311,"column":1},"end":{"line":311,"column":1}},"key":"GKeFgNozNr"}],"key":"vCLT6jDGl4"}],"key":"anjfDEKDj4"}],"key":"zyNlxbid0n"},{"type":"heading","depth":3,"position":{"start":{"line":313,"column":1},"end":{"line":313,"column":1}},"children":[{"type":"text","value":"Phase 3: Test Tiering + Runtime Optimization","position":{"start":{"line":313,"column":1},"end":{"line":313,"column":1}},"key":"f1CxAczMOG"}],"identifier":"phase-3-test-tiering-runtime-optimization","label":"Phase 3: Test Tiering + Runtime Optimization","html_id":"phase-3-test-tiering-runtime-optimization","implicit":true,"key":"Z6CcBnn03o"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":315,"column":1},"end":{"line":318,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":315,"column":1},"end":{"line":315,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Formalize ","key":"hiEtwPCzwP"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"uVfIv5RsOk"}],"key":"nnZbMpGesZ"},{"type":"text","value":" vs full test tiers.","key":"Me8YqA53LK"}],"key":"F854VztpiY"}],"key":"UaeeAoXUQp"},{"type":"listItem","spread":true,"position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Tune ","position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"key":"JMf2ritCsm"},{"type":"inlineCode","value":"nextest","position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"key":"FRJRzHTIHB"},{"type":"text","value":" profile and retries for flaky integration suites.","position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"key":"M7GuNludbH"}],"key":"tblkSPHUJu"}],"key":"QS6lLDX26C"},{"type":"listItem","spread":true,"position":{"start":{"line":317,"column":1},"end":{"line":318,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add run summaries with cache and compile diagnostics.","position":{"start":{"line":317,"column":1},"end":{"line":317,"column":1}},"key":"eg9dTYTYKk"}],"key":"u4R12ZDyrC"}],"key":"lKOidTFIz5"}],"key":"YNVEUfNzi4"},{"type":"heading","depth":3,"position":{"start":{"line":319,"column":1},"end":{"line":319,"column":1}},"children":[{"type":"text","value":"Phase 4: Hardening (Optional, Recommended)","position":{"start":{"line":319,"column":1},"end":{"line":319,"column":1}},"key":"ymDQHgGcy3"}],"identifier":"phase-4-hardening-optional-recommended","label":"Phase 4: Hardening (Optional, Recommended)","html_id":"phase-4-hardening-optional-recommended","implicit":true,"key":"YHnR8wxvHJ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":321,"column":1},"end":{"line":324,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":321,"column":1},"end":{"line":321,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add SBOM + image scan gates.","position":{"start":{"line":321,"column":1},"end":{"line":321,"column":1}},"key":"QEO3EOAWOG"}],"key":"HerfCGtS9n"}],"key":"UtSWxpQtUw"},{"type":"listItem","spread":true,"position":{"start":{"line":322,"column":1},"end":{"line":322,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add provenance/signing for release images.","position":{"start":{"line":322,"column":1},"end":{"line":322,"column":1}},"key":"UautyAUu8n"}],"key":"IH7W2mvPZa"}],"key":"GcTGT6mVp8"},{"type":"listItem","spread":true,"position":{"start":{"line":323,"column":1},"end":{"line":324,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add periodic cache hygiene workflow.","position":{"start":{"line":323,"column":1},"end":{"line":323,"column":1}},"key":"e18aYBxCww"}],"key":"dGkQAeYZK9"}],"key":"Q5fgxElezR"}],"key":"yqbfAfKjR5"},{"type":"heading","depth":2,"position":{"start":{"line":325,"column":1},"end":{"line":325,"column":1}},"children":[{"type":"text","value":"Risks and Mitigations","position":{"start":{"line":325,"column":1},"end":{"line":325,"column":1}},"key":"mDvsnSV0vY"}],"identifier":"risks-and-mitigations","label":"Risks and Mitigations","html_id":"risks-and-mitigations","implicit":true,"key":"IJ7xZpvgUT"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":327,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":327,"column":1},"end":{"line":328,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Risk: over-broad target cache reuse can cause stale artifacts.","position":{"start":{"line":327,"column":1},"end":{"line":327,"column":1}},"key":"VBhwBNFcZG"}],"key":"E4lTDHuTqm"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":328,"column":1},"end":{"line":328,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":328,"column":1},"end":{"line":328,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mitigation: include fingerprint + toolchain + feature mode in cache key.","position":{"start":{"line":328,"column":1},"end":{"line":328,"column":1}},"key":"bfJKSIwc0P"}],"key":"iKKRRP2dU9"}],"key":"vyG9OmCtaX"}],"key":"A3f2aSWsSr"}],"key":"VUm9tcNaK3"},{"type":"listItem","spread":true,"position":{"start":{"line":329,"column":1},"end":{"line":330,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Risk: too many parallel jobs increase image pull overhead.","position":{"start":{"line":329,"column":1},"end":{"line":329,"column":1}},"key":"zF7f3oPOC7"}],"key":"TjHdDWNB1q"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":330,"column":1},"end":{"line":330,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":330,"column":1},"end":{"line":330,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mitigation: keep verify jobs lightweight and rely on prep/build warm cache.","position":{"start":{"line":330,"column":1},"end":{"line":330,"column":1}},"key":"iX9IgLbhQ2"}],"key":"V3caEXAg3i"}],"key":"BkQjLrAjCk"}],"key":"BL1aiTbv6o"}],"key":"tIaEoQIBsf"},{"type":"listItem","spread":true,"position":{"start":{"line":331,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Risk: local cache growth on macOS.","position":{"start":{"line":331,"column":1},"end":{"line":331,"column":1}},"key":"GjMWfWsM9h"}],"key":"g4ROfZRB0r"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":332,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":332,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mitigation: configurable cache root + retention/prune targets.","position":{"start":{"line":332,"column":1},"end":{"line":332,"column":1}},"key":"Jq20R2jSBO"}],"key":"GPB5xX1Gu2"}],"key":"TyMyEP5To8"}],"key":"c6XMtguGEk"}],"key":"maPq6l3wHw"}],"key":"qtxdWMfV0Q"},{"type":"heading","depth":2,"position":{"start":{"line":334,"column":1},"end":{"line":334,"column":1}},"children":[{"type":"text","value":"Decision Notes on Requested Strategies","position":{"start":{"line":334,"column":1},"end":{"line":334,"column":1}},"key":"SK5UQXPONX"}],"identifier":"decision-notes-on-requested-strategies","label":"Decision Notes on Requested Strategies","html_id":"decision-notes-on-requested-strategies","implicit":true,"key":"BLeFQ6joEq"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":336,"column":1},"end":{"line":340,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":336,"column":1},"end":{"line":336,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mounting cargo registry/git/target caches is correct and should remain, with stronger key scoping and a configurable root.","position":{"start":{"line":336,"column":1},"end":{"line":336,"column":1}},"key":"zCDRVMwUc4"}],"key":"FOeFokMX6E"}],"key":"MJnJ4N4m02"},{"type":"listItem","spread":true,"position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"cargo nextest","position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"key":"QFeeYDId4Z"},{"type":"text","value":" is the right default for ","key":"t7j7X7afzU"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"bWhdRA9EeN"}],"key":"RkLJ3kMkYx"},{"type":"text","value":"; keep it as the primary ","key":"vc1aOI1QmY"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"dae8UeDxEi"}],"key":"dA92DxYO8k"},{"type":"text","value":" test executor.","key":"xWqQZStF9c"}],"key":"Hs7Hx3GLdn"}],"key":"JtgDVPjnnl"},{"type":"listItem","spread":true,"position":{"start":{"line":338,"column":1},"end":{"line":338,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Granular checks should remain visible as separate required statuses/check-runs.","position":{"start":{"line":338,"column":1},"end":{"line":338,"column":1}},"key":"jMlyKfBwpd"}],"key":"gsyIjhuQEm"}],"key":"oEW3dZ7SDj"},{"type":"listItem","spread":true,"position":{"start":{"line":339,"column":1},"end":{"line":340,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Single ","key":"MtEBoMCSBh"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"YTK9ibdijo"}],"key":"JVTGpmwnyf"},{"type":"text","value":" workflow for ","key":"znb28NeToG"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"aZfdUgojjp"}],"key":"kOzVjlxKwj"},{"type":"text","value":"/push on ","key":"FgS5uQr96v"},{"type":"inlineCode","value":"main","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"TTHw9Q1hIe"},{"type":"text","value":" and ","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"wrZdIDOIFd"},{"type":"inlineCode","value":"develop","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"fkIh83O9Iw"},{"type":"text","value":" is recommended; keep release/publish workflows independent.","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"D9Zg1180yA"}],"key":"pR66fVyj6p"}],"key":"G4HK0a4K7F"}],"key":"msfJmxMyOI"},{"type":"heading","depth":2,"position":{"start":{"line":341,"column":1},"end":{"line":341,"column":1}},"children":[{"type":"text","value":"Success Criteria","position":{"start":{"line":341,"column":1},"end":{"line":341,"column":1}},"key":"OFv8InXaBH"}],"identifier":"success-criteria","label":"Success Criteria","html_id":"success-criteria","implicit":true,"key":"JFVIkYbtk9"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":343,"column":1},"end":{"line":346,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Local ","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"key":"tOAXw6BVv8"},{"type":"inlineCode","value":"./dflow ci-verify","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"key":"b0sygBPWef"},{"type":"text","value":" and ","key":"qnvzaldRw0"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"thOA7apI4K"}],"key":"ABdF43RLwR"},{"type":"text","value":" ","key":"Hp0SasdxsM"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"SNdVt79oEz"}],"key":"JWPTI6hbhF"},{"type":"text","value":" run identical targets in the same image identity.","key":"oJhI8YbzTW"}],"key":"DdZOd28S85"}],"key":"ZVJ37T4wJx"},{"type":"listItem","spread":true,"position":{"start":{"line":344,"column":1},"end":{"line":344,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Warm ","key":"L2MVbu3rQm"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"W4NYpEakN3"}],"key":"vOp9bHx28m"},{"type":"text","value":" rerun latency significantly lower than cold runs, with measurable ","key":"yUywiwYROO"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":344,"column":1},"end":{"line":344,"column":1}},"key":"blR2eGzGpf"},{"type":"text","value":" and cache hit ratios.","position":{"start":{"line":344,"column":1},"end":{"line":344,"column":1}},"key":"pfYJUVawDg"}],"key":"qEAFtkwT7g"}],"key":"ssJqgn3y0H"},{"type":"listItem","spread":true,"position":{"start":{"line":345,"column":1},"end":{"line":345,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Reviewers can identify failure domain immediately from independent check status names.","position":{"start":{"line":345,"column":1},"end":{"line":345,"column":1}},"key":"vxVnbaxaPJ"}],"key":"a5zlN5fVg0"}],"key":"qvOUHY5Uk9"},{"type":"listItem","spread":true,"position":{"start":{"line":346,"column":1},"end":{"line":346,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Pipeline logic remains modular and centralized in scripts/make targets, not duplicated in YAML.","position":{"start":{"line":346,"column":1},"end":{"line":346,"column":1}},"key":"b7u4qQuZ2t"}],"key":"C9EzIIY9EE"}],"key":"SCvOBCgqHB"}],"key":"M0DE1kT2sW"}],"key":"YY2jmUjOLm"}],"key":"ZZrbN048Re"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"v0.1.0 Implementation Execution Plan","url":"/v0-1-0-implementation-execution-plan","group":"06 Roadmap"},"next":{"title":"v0.1.0 Critical Architecture and Implementation Review","url":"/v0-1-0-critical-review","group":"06 Roadmap"}}},"domain":"http://localhost:3000"}