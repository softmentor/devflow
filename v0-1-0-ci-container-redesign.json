{"version":3,"kind":"Article","sha256":"3e8c37e5cfff3d71e559920d92f2c8fcbb9a302baa19fcb1989b5f6b03e5e9fd","slug":"v0-1-0-ci-container-redesign","location":"/developer-guide/06-roadmap/v0.1.0-ci-container-redesign.md","dependencies":[],"frontmatter":{"title":"v0.1.0 CI/Container Redesign Proposal","label":"devflow.developer-guide.roadmap.v010-ci-container-redesign","content_includes_title":false,"authors":[{"nameParsed":{"literal":"Soft Mentor","given":"Soft","family":"Mentor"},"name":"Soft Mentor","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/softmentor/devflow","abbreviations":{"ADR":"Architecture Decision Record.","API":"Application Programming Interface.","CI":"Continuous Integration.","CLI":"Command Line Interface.","DAG":"Directed Acyclic Graph.","GHCR":"GitHub Container Registry.","PR":"Pull Request."},"numbering":{"title":{"offset":2}},"source_url":"https://github.com/softmentor/devflow/blob/main/docs/developer-guide/06-roadmap/v0.1.0-ci-container-redesign.md","edit_url":"https://github.com/softmentor/devflow/edit/main/docs/developer-guide/06-roadmap/v0.1.0-ci-container-redesign.md","exports":[{"format":"md","filename":"v0.1.0-ci-container-redesign.md","url":"/devflow/build/v0.1.0-ci-container--60f5529782b58ce6a63c7f3e29b888fe.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Purpose","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"aMwyZZ8EKC"}],"identifier":"purpose","label":"Purpose","html_id":"purpose","implicit":true,"key":"Dway0QPcsC"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Define a reproducible, modular, and cache-efficient developer/","key":"qFd2XWM7TD"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"yRbIO4ukdh"}],"key":"x09VPXlH3d"},{"type":"text","value":" model for the v0.1.0 refactor so local macOS development and GitHub Actions execute the same verification logic with the same container identity.","key":"x8cCHZItoK"}],"key":"temaAQKEqh"},{"type":"heading","depth":2,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Executive Summary","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"HtbW6ZRyjM"}],"identifier":"executive-summary","label":"Executive Summary","html_id":"executive-summary","implicit":true,"key":"sLYwkegN2k"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep the current fingerprinted ","key":"OpA1Z12pLv"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"pG7jzQSrHy"}],"key":"XGz3iBOYqJ"},{"type":"text","value":" image strategy and expand it into a single canonical cache architecture.","key":"oA4yjZrUHe"}],"key":"U88HxFq65U"}],"key":"tInryMYqGF"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Use a configurable cache root for local container runs (default: ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"bsrRpTO46H"},{"type":"inlineCode","value":".cargo-cache/","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"z9Pr2M6sJU"},{"type":"text","value":") with explicit volume mounts for registry, git, ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"gOTiQ4ydMG"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"rfDBWrn3I8"},{"type":"text","value":", and target outputs.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"RliHa4XYXE"}],"key":"o8ApDKfhsS"}],"key":"ECaLQk2AC6"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep one source of truth for commands in Make targets and scripts; GitHub Actions should only orchestrate those targets.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"I1tBbs3kMG"}],"key":"D4BJIFTupp"}],"key":"ECmouU2J0a"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Use ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"vKabUkNYvc"},{"type":"inlineCode","value":"cargo nextest","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"y4Z59pvWOS"},{"type":"text","value":" as the default ","key":"hVXv3NdqMl"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"IfVjiftsee"}],"key":"DqusuRmCtm"},{"type":"text","value":" test runner, with test tiers split by change risk (minimal ","key":"Fn4820dwXC"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"yEIih14ELc"}],"key":"vsB7Cdt2jk"},{"type":"text","value":" gate vs full verification on push/main).","key":"h5q2wrLXdA"}],"key":"ALjeP1Vfpv"}],"key":"OjLmi6ttGQ"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Preserve granular ","key":"RmU7vo42IY"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"fHJBHIKT6M"}],"key":"WyP9URfr0g"},{"type":"text","value":" visibility (","key":"gXpp4JEtEU"},{"type":"inlineCode","value":"fmt","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"rmatBe5Mkz"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"Kvthtb9A89"},{"type":"inlineCode","value":"clippy","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"wV7x9W9g16"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"WUdbvR8WM5"},{"type":"inlineCode","value":"compile","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"eetYNZTQYU"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"osPKVhyy8X"},{"type":"inlineCode","value":"test","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"QfVPIAFWBX"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"XH7MLdbx8c"},{"type":"inlineCode","value":"smoke","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"cISZ03a7jY"},{"type":"text","value":") as separate required checks.","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"qHdOrPR5nm"}],"key":"gbtO7ymTam"}],"key":"Xn3Q2NDHNr"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"CsNBtkAxMB"},{"type":"inlineCode","value":"build","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"fpiiKb0BmS"},{"type":"text","value":" and ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"Mw1EHyGhtf"},{"type":"inlineCode","value":"verify","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"RICfkh0Oqo"},{"type":"text","value":" execution inside the containerized ","key":"lbcwWL8yFR"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"nqzqyp68Oz"}],"key":"ZC47O6lCoh"},{"type":"text","value":" image to preserve environment parity with local repro.","key":"MncLKy5aYp"}],"key":"xMrQSIekbf"}],"key":"FiChtgrqrh"}],"key":"MhwpVO3YkS"},{"type":"heading","depth":2,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Current-State Evaluation","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"ex3y7UZHxZ"}],"identifier":"current-state-evaluation","label":"Current-State Evaluation","html_id":"current-state-evaluation","implicit":true,"key":"qQIzw8O1IX"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"This repository already has strong foundations:","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"BS5WGelAGS"}],"key":"YqWz2qa8Di"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":25,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Content-addressed image fingerprinting (","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"WBvKUVqoq9"},{"type":"inlineCode","value":"Dockerfile","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"xMZt27CCiI"},{"type":"text","value":" hash) and ","key":"ftqClPaGzi"},{"type":"abbreviation","title":"GitHub Container Registry.","children":[{"type":"text","value":"GHCR","key":"AWWlhjIeUR"}],"key":"b9nSkd8Cqt"},{"type":"text","value":"-backed ","key":"KTcyouIPeJ"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"QCh3yEDYut"}],"key":"OUAm1mgWv4"},{"type":"text","value":" image identity.","key":"YlGuWjAjuR"}],"key":"bodfIn3uVb"}],"key":"kDO653hlyk"},{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Containerized local reproducibility via ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"I6VXKAUfSE"},{"type":"inlineCode","value":"./dflow ci-verify","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"P8IIRXhqCK"},{"type":"text","value":".","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"jdnfZp1URA"}],"key":"njFkz4fDEf"}],"key":"Z2G9NyKqiX"},{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Shared cache directories for containerized runs: ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"ztSgsqDJoV"},{"type":"inlineCode","value":".cargo-cache/{registry,git,sccache}","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"qQu3JwVzm9"},{"type":"text","value":" and ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"vyaHQHI87k"},{"type":"inlineCode","value":"target/ci","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"stXKdfS48y"},{"type":"text","value":".","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"Gx4Aw0iW3t"}],"key":"zibaEzC3KV"}],"key":"aKLjyqNKc4"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"nextest","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"gHaxBX7bIL"},{"type":"text","value":" already used in ","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"nuAdQ7BxIj"},{"type":"inlineCode","value":"test-ci","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"PReCzBhr7Z"},{"type":"text","value":".","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"xDuJqdpmF2"}],"key":"NgL2I0eN8z"}],"key":"cnKu6B6qVn"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Granular status reporting via ","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"c3pCoras5s"},{"type":"inlineCode","value":"gh-check-wrapper.sh","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"vOK7juN7yD"},{"type":"text","value":".","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"aAJdEptH6O"}],"key":"w8JkpUqEIo"}],"key":"nDmGWWpsgb"}],"key":"wXUPBY3nHE"},{"type":"paragraph","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Primary gaps to address for v0.1.0:","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"PlzoPzQqsn"}],"key":"Tq1TLcsiV9"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":33,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Fingerprint scope drift: docs/scripts currently state broader fingerprint inputs, while ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"ltcMyVSckQ"},{"type":"inlineCode","value":"vars.mk","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"tO1m4HJqId"},{"type":"text","value":" hashes only ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"B56KtRhMYp"},{"type":"inlineCode","value":"Dockerfile","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"WNI1Zzh8Ms"},{"type":"text","value":".","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"VF9bBf4kwY"}],"key":"IoVvrzwNSw"}],"key":"Q64D9m6wPL"},{"type":"listItem","spread":true,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cache root is not fully standardized/configurable as one top-level contract for local + ","key":"BV0dqFjv3h"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"HxMBGf36kU"}],"key":"jYb3hiCM2Q"},{"type":"text","value":".","key":"dqjSsVq39g"}],"key":"F69T086lnr"}],"key":"jFiXw6tYp6"},{"type":"listItem","spread":true,"position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"OToPDAbJ3j"}],"key":"cJsII3YGl9"},{"type":"text","value":" check topology is efficient but still tightly coupled to shell backgrounding in one step; explicit check job contracts can improve maintainability.","key":"TnNCs2NJhW"}],"key":"inEy0wvvDt"}],"key":"NQH0GooXMy"},{"type":"listItem","spread":true,"position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"eWz7ZgyTKj"}],"key":"h16AmivU7E"},{"type":"text","value":" gating tiers are not explicitly documented as “minimal gate” vs “full verification”.","key":"zQksSqxiGS"}],"key":"haU15cdkhr"}],"key":"NCP2bSfgO5"},{"type":"listItem","spread":true,"position":{"start":{"line":37,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The design is highly optimized for this Rust repository but is not yet framed as a reusable cross-stack platform.","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"QEvnIuiPXD"}],"key":"fJhBb2BZQX"}],"key":"PIwhGRY6Wh"}],"key":"g0wx0bbfSH"},{"type":"heading","depth":2,"position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"text","value":"Target Design","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"lzY444bTTy"}],"identifier":"target-design","label":"Target Design","html_id":"target-design","implicit":true,"key":"DpSkJf75to"},{"type":"heading","depth":3,"position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"1) Canonical Build Identity","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"IxA5Ecrc99"}],"identifier":"id-1-canonical-build-identity","label":"1) Canonical Build Identity","html_id":"id-1-canonical-build-identity","implicit":true,"key":"NaAsAmP8MV"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":43,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep image fingerprinting as the environment identity key.","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"amqiMSutjg"}],"key":"mvsTGgd3fR"}],"key":"wuxasgtidJ"},{"type":"listItem","spread":true,"position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Expand fingerprint inputs to match policy: ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"NBMErMCuol"},{"type":"inlineCode","value":"Dockerfile","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"VDlYKrMaWr"},{"type":"text","value":", ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"O6buBw8WNl"},{"type":"inlineCode","value":"Makefile","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"IUajyFuxr3"},{"type":"text","value":", ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"ZugWAoF5KU"},{"type":"inlineCode","value":"install.sh","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"QbLwhuvqME"},{"type":"text","value":", ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"zh2j70eU17"},{"type":"inlineCode","value":"src-scripts/**","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"XPVGVeYQle"},{"type":"text","value":", and ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"v2cRpfWQ8y"},{"type":"inlineCode","value":"rust-toolchain.toml","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"Lxn517KE7m"},{"type":"text","value":".","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"P0OCbteedS"}],"key":"LJaIM9wayt"}],"key":"Sn8gOosbjd"},{"type":"listItem","spread":true,"position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Publish ","key":"Wvy1JaI3Iu"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"RHiL8FXiv2"}],"key":"QCSSugXt9e"},{"type":"text","value":" image as ","key":"pb7lg4bePt"},{"type":"inlineCode","value":"ghcr.io/<repo>-ci:<fingerprint>","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"Cj9ApU3zvE"},{"type":"text","value":" and keep ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"dTlBRGqZSk"},{"type":"inlineCode","value":":latest","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"hm5Yx0szyG"},{"type":"text","value":" as convenience only.","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"H3q1BWe2w8"}],"key":"QzyOvGDEAh"}],"key":"AcSl8JpTrB"},{"type":"listItem","spread":true,"position":{"start":{"line":46,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Use immutable digest pinning in ","key":"kfeVrg24A9"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"E8QUZK0YDG"}],"key":"decVeHbPJ6"},{"type":"text","value":" job container declarations when practical.","key":"btLQsY5LCM"}],"key":"L50NJXfC2d"}],"key":"tjrFyU1Q9Z"}],"key":"Y9QRrh45GW"},{"type":"heading","depth":3,"position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"text","value":"2) Unified Cache Contract","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"MMh5KH1oc6"}],"identifier":"id-2-unified-cache-contract","label":"2) Unified Cache Contract","html_id":"id-2-unified-cache-contract","implicit":true,"key":"KPnkOUd8DX"},{"type":"paragraph","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"text","value":"Define one configurable cache root:","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"bqNLycHX87"}],"key":"Y2Vb6XeXaG"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":52,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"jKkP1mwK3J"},{"type":"text","value":" (default ","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"x3hxhO89tM"},{"type":"inlineCode","value":".cargo-cache","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"MKjYhfoJiW"},{"type":"text","value":")","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"Azx5BuVUbf"}],"key":"D38BW0aQe2"}],"key":"qGgQ79vf3F"},{"type":"listItem","spread":true,"position":{"start":{"line":53,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Subdirs:","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"L5blvUuiOJ"}],"key":"ts5OFA2ggm"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":54,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/registry","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"ec0IOYuEiA"}],"key":"OgbtRnddUx"}],"key":"YxKDwyC8rD"},{"type":"listItem","spread":true,"position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/git","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"UQSoR3rcjG"}],"key":"nd82oEAai6"}],"key":"kI60yn4tLG"},{"type":"listItem","spread":true,"position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/sccache","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"XlohuZYNLq"}],"key":"yP5f0hXVOp"}],"key":"MIfx6nlJVk"},{"type":"listItem","spread":true,"position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/target-ci","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"mwAzqjcNKV"}],"key":"wQVNsFVj5m"}],"key":"F4W4doPFOY"},{"type":"listItem","spread":true,"position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/image-tar","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"jjlNVyArZI"}],"key":"ooilQkyY14"}],"key":"iu6HpoDYNp"},{"type":"listItem","spread":true,"position":{"start":{"line":59,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/buildx","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"HvDSS7239e"}],"key":"zCFBP82DpP"}],"key":"FonqDKnvKr"}],"key":"DuURSGX2qh"}],"key":"NaClmXBotg"}],"key":"FeCUNDbtlX"},{"type":"paragraph","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"text","value":"Local container mounts:","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"CARJdBJAs5"}],"key":"jiSfTDzKgP"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":63,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cargo registry/git -> mounted from ","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"ohLkEhWL5S"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"ge8jKWnYe1"},{"type":"text","value":".","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"iHZC3spCAs"}],"key":"syNUXQnuMW"}],"key":"s4jVNLc7u1"},{"type":"listItem","spread":true,"position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"SCCACHE_DIR","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"MRybpx8bSh"},{"type":"text","value":" -> mounted from ","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"OKGSWyy0XU"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT/sccache","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"FA4gQb1vQ4"},{"type":"text","value":".","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"Y1f3NJjNgN"}],"key":"hnY2JIbkfe"}],"key":"ANjoNZxjpv"},{"type":"listItem","spread":true,"position":{"start":{"line":65,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"CARGO_TARGET_DIR","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"OUmfWD4zlr"},{"type":"text","value":" -> mounted from ","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"PWKiaEFiOQ"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT/target-ci","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"VtaLZWycR1"},{"type":"text","value":".","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"f8pPWy3s1Z"}],"key":"JVk9xOV7Ne"}],"key":"kv63abhkC6"}],"key":"YeGhR9how7"},{"type":"paragraph","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"text","value":"Guidance:","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"key":"c4KR0TiLFE"}],"key":"Gcr0NOs3R9"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":69,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Do not mount host ","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"nnE4MBKQzy"},{"type":"inlineCode","value":"~/.cargo","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"Bbw8j7sVwu"},{"type":"text","value":" directly by default; use project-scoped cache roots for reproducibility and isolation.","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"OQwrsMRKR8"}],"key":"PTy7iBicyj"}],"key":"FQF5VaI1VI"},{"type":"listItem","spread":true,"position":{"start":{"line":70,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep target caches scoped by Rust version + fingerprint + feature set to avoid artifact poisoning.","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"YMpLMU6L47"}],"key":"OcVl0OgMjC"}],"key":"cCYjvlX0bU"}],"key":"wDIKtbHLlR"},{"type":"paragraph","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"children":[{"type":"text","value":"Environment nuance impact:","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"key":"WN529TVM4c"}],"key":"YHfKKj0M4c"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":74,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"A standardized cache root does not remove environment-specific capability differences (kernel, filesystem semantics, CPU arch, cgroup limits, sandboxing).","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"Wo7RWj8hJ9"}],"key":"yIzkUsJMFO"}],"key":"MOSgh5zJsH"},{"type":"listItem","spread":true,"position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The container image and run flags define behavior parity; the cache root only standardizes persisted artifacts and speeds reruns.","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"V9WrXFxoPJ"}],"key":"GdKWZMXtiU"}],"key":"nLLynjMsiX"},{"type":"listItem","spread":true,"position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cache key dimensions should include ","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"twIgIhezLg"},{"type":"inlineCode","value":"os/arch","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"xxLcNBJwil"},{"type":"text","value":" and runtime profile (for example Linux amd64 container vs local native macOS) to avoid cross-environment contamination.","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"KxIL5wRj7p"}],"key":"EhAKltIiFI"}],"key":"DguyyIomWD"},{"type":"listItem","spread":true,"position":{"start":{"line":77,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"For deterministic ","key":"f8JMI48LEN"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"YHTzqJO6FW"}],"key":"nVZumhMxND"},{"type":"text","value":", treat cache as an optimization only; correctness must not depend on cache hits.","key":"eZursjhbrn"}],"key":"Tw9EghwFPf"}],"key":"VtsmaGQsIe"}],"key":"RnUpCFr1lJ"},{"type":"heading","depth":3,"position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"text","value":"3) GitHub Actions Cache Layers","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"n2GA1BGKzv"}],"identifier":"id-3-github-actions-cache-layers","label":"3) GitHub Actions Cache Layers","html_id":"id-3-github-actions-cache-layers","implicit":true,"key":"oIpOFek95P"},{"type":"paragraph","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"text","value":"Use layered caching, ordered by ROI:","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"sw8TnzyqZp"}],"key":"WU5NyPMPBC"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":83,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"ffVDDO3LDa"}],"key":"Fxz2nsKpaA"},{"type":"text","value":" image reuse from ","key":"ucEoYDblI4"},{"type":"abbreviation","title":"GitHub Container Registry.","children":[{"type":"text","value":"GHCR","key":"PSqfUa7d9n"}],"key":"NWygMJv4Dz"},{"type":"text","value":" by fingerprint.","key":"fgYpSl99vA"}],"key":"knd3JrMeph"}],"key":"T0JnKaLmpA"},{"type":"listItem","spread":true,"position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Optional image tar cache (","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"NSYYItGwMR"},{"type":"inlineCode","value":"actions/cache","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"N4Fw4L42an"},{"type":"text","value":") for fast same-runner restore.","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"nB01vH6H1p"}],"key":"k9BfCp8sty"}],"key":"HBrPiiKhy7"},{"type":"listItem","spread":true,"position":{"start":{"line":85,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cargo + sccache cache (","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"cnW4vyzYDl"},{"type":"inlineCode","value":"registry","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"cWQumGv6hS"},{"type":"text","value":", ","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"pEoxyWYfPT"},{"type":"inlineCode","value":"git","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"GkQDjM2UmE"},{"type":"text","value":", ","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"OqbjZYsUVH"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"IbuIIwMmm8"},{"type":"text","value":", ","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"mVLLx67FIN"},{"type":"inlineCode","value":"target-ci","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"qdKMQxjRnm"},{"type":"text","value":") keyed by:","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"HQMk1DyYkO"}],"key":"VmZijyMzif"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":86,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"runner.os","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"R7FC8bBaWW"}],"key":"ZJYx7q0nyU"}],"key":"d8NuLL4rKr"},{"type":"listItem","spread":true,"position":{"start":{"line":87,"column":1},"end":{"line":87,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"image fingerprint","position":{"start":{"line":87,"column":1},"end":{"line":87,"column":1}},"key":"eym5n1DJYJ"}],"key":"KznzeLyNXR"}],"key":"pL6H2QOXO7"},{"type":"listItem","spread":true,"position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"hash(Cargo.lock, rust-toolchain.toml)","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"key":"UqKzGXFhB7"}],"key":"zsDzYvk16y"}],"key":"dCf8TaleD2"},{"type":"listItem","spread":true,"position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cargo feature mode (for example ","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"XOaA0DTo89"},{"type":"inlineCode","value":"native-browser","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"xl9OqvLVp2"},{"type":"text","value":" vs lean)","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"mhUS3Zuhrs"}],"key":"bESeDyNzId"}],"key":"Wv1AmfZHCp"}],"key":"xtMqrkkxpj"}],"key":"AwMbkGSIUW"},{"type":"listItem","spread":true,"position":{"start":{"line":90,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"BuildKit cache for image builds (","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"wX3ofbS20V"},{"type":"inlineCode","value":"cache-from/cache-to","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"DWpeFI2WVG"},{"type":"text","value":" gha, optionally registry cache manifest).","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"j5W14PgSfc"}],"key":"KEnW6CiPPM"}],"key":"WTewXvCfqw"}],"key":"m1r2sRLNGz"},{"type":"heading","depth":3,"position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"children":[{"type":"text","value":"4) Workflow Modularity and Check Visibility","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"key":"Wfqe62WjIQ"}],"identifier":"id-4-workflow-modularity-and-check-visibility","label":"4) Workflow Modularity and Check Visibility","html_id":"id-4-workflow-modularity-and-check-visibility","implicit":true,"key":"mPtyQy8A5h"},{"type":"paragraph","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"text","value":"Single ","key":"SL2Z7BsFej"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"bIZNpp2SfJ"}],"key":"nzA1Yx8E6M"},{"type":"text","value":" workflow file (","key":"lEKVxQoWrA"},{"type":"inlineCode","value":".github/workflows/ci.yml","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"BnnbKUzgV6"},{"type":"text","value":") for ","key":"siy3YzMPMI"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"pPBowvz1tW"}],"key":"Pfwgsw79ZA"},{"type":"text","value":"/push on ","key":"E8nXzNVq1Z"},{"type":"inlineCode","value":"main","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"bWXfS9Ly8k"},{"type":"text","value":" and ","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"TUj5L78Dwb"},{"type":"inlineCode","value":"develop","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"A4jsBhq4Zf"},{"type":"text","value":".","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"L5uZsoC9Ie"}],"key":"VTJcQaDDZf"},{"type":"paragraph","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"children":[{"type":"text","value":"Job topology:","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"key":"qcPuYdoQte"}],"key":"pC6jGnmcwt"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":98,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"prep","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"ma5mS48Iq4"},{"type":"text","value":": resolve fingerprint + image, restore image tar cache, emit outputs (runner job, no compile/test logic).","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"xlZh9AB6zt"}],"key":"lebxlRfcaH"}],"key":"CLNESNWiQl"},{"type":"listItem","spread":true,"position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"build","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"xSUl05C7KH"},{"type":"text","value":": compile once (","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"PqfpJIIpf0"},{"type":"inlineCode","value":"make build-ci","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"HhaQPSVPzR"},{"type":"text","value":") and save cargo/sccache cache (","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"kTS8kBDxHi"},{"type":"strong","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"text","value":"runs inside the ","key":"EjB53fKDqL"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"i2uLDwrqh4"}],"key":"KMe1NfHfKN"},{"type":"text","value":" container image","key":"tHKCeN9cWj"}],"key":"urj8SeJ41j"},{"type":"text","value":").","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"kGZWnGtOqK"}],"key":"Q0tNqHjj96"}],"key":"oW9rIZzCNK"},{"type":"listItem","spread":true,"position":{"start":{"line":100,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Parallel verify jobs (granular reviewer visibility):","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"key":"Bg9rmctuWh"}],"key":"LGs3YTw1Yl"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":101,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"fmt","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"bWMB4pQDqN"},{"type":"text","value":" -> ","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"I1mDEROCwG"},{"type":"inlineCode","value":"make fmt-check","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"bThFAfmTVs"},{"type":"text","value":" (or ","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"QfomS2WA8G"},{"type":"inlineCode","value":"cargo fmt --check","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"tD5CZQMF8c"},{"type":"text","value":")","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"hpx15ZFbci"}],"key":"F67lyS66le"}],"key":"BNQD45sfpy"},{"type":"listItem","spread":true,"position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"clippy","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"xS5Mra7BDz"},{"type":"text","value":" -> ","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"RCYoeQbZKX"},{"type":"inlineCode","value":"make lint-clippy","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"dtqqtubZix"}],"key":"cAo3i746iX"}],"key":"GNMMfeafjj"},{"type":"listItem","spread":true,"position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"test","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"WVjcpUH3Aq"},{"type":"text","value":" -> ","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"BFhjlUMv5v"},{"type":"inlineCode","value":"make test-ci","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"BHdz1Y1NaL"},{"type":"text","value":" (","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"IAOfn4J4FI"},{"type":"inlineCode","value":"cargo nextest run","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"M4v3sC9JZ1"},{"type":"text","value":")","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"dLnAgLjMX9"}],"key":"WANT0wAOdR"}],"key":"Ao4a2m94On"},{"type":"listItem","spread":true,"position":{"start":{"line":104,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"smoke","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"wf5KV9SOTJ"},{"type":"text","value":" -> ","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"mZQFShjt2P"},{"type":"inlineCode","value":"make smoke-test","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"Ki2oAJwKGw"}],"key":"pEbeI8vV9F"}],"key":"kwxvD8rlL4"}],"key":"TufwNFVopb"}],"key":"kPI4wgRGqO"}],"key":"ouBB4QOr5t"},{"type":"paragraph","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"children":[{"type":"text","value":"All verify jobs:","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"key":"PmRVnlh2mC"}],"key":"yw1G021x8T"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":108,"column":1},"end":{"line":111,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Run in the same fingerprinted ","key":"uxDFbtHYqy"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"vovY5cQUgY"}],"key":"dd0sxiKL6R"},{"type":"text","value":" container image as ","key":"X9t2QCUygU"},{"type":"inlineCode","value":"build","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"Lde8NpaAks"},{"type":"text","value":".","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"uHRnrHo35S"}],"key":"VvAfGAOpjT"}],"key":"gBUBQo5gdL"},{"type":"listItem","spread":true,"position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Restore caches read-only.","position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"key":"RC4yW2igsN"}],"key":"a16VKcOHht"}],"key":"STwtYcM1b9"},{"type":"listItem","spread":true,"position":{"start":{"line":110,"column":1},"end":{"line":111,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Avoid duplicate compilation by relying on warmed cache from ","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"ItTylKBzyl"},{"type":"inlineCode","value":"build","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"B456JOHW38"},{"type":"text","value":".","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"cuchE4tXF4"}],"key":"lYbKSqW269"}],"key":"L4iHjq5nsG"}],"key":"nVuA3yzQMG"},{"type":"heading","depth":3,"position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"children":[{"type":"text","value":"5) Test Tiering Policy","position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"key":"Jv1eHl7dKJ"}],"identifier":"id-5-test-tiering-policy","label":"5) Test Tiering Policy","html_id":"id-5-test-tiering-policy","implicit":true,"key":"YZR5ny1Qow"},{"type":"paragraph","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"children":[{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"TJxHoMAkTH"}],"key":"elmNoAtWt5"},{"type":"text","value":" minimal gate:","key":"xNgY9P7438"}],"key":"W5ae0ZVM3n"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":116,"column":1},"end":{"line":117,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":116,"column":1},"end":{"line":117,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"fmt","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"dGvtvknYSH"},{"type":"text","value":", ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"zcaX1MOM2T"},{"type":"inlineCode","value":"clippy","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"KW3deGk4iO"},{"type":"text","value":", ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"hp5TH0IjTW"},{"type":"inlineCode","value":"build-ci","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"BGtWObQ5VF"},{"type":"text","value":", ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"kOlLs6nft1"},{"type":"inlineCode","value":"nextest","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"BgW9wCgZjm"},{"type":"text","value":" (default profile), ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"C9niXsVbEA"},{"type":"inlineCode","value":"smoke","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"fs5s13mTRc"},{"type":"text","value":".","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"Tr5z3TCGfD"}],"key":"rnhy88rEGo"}],"key":"kG06viA2Lj"}],"key":"W1iXW1Fm5K"},{"type":"paragraph","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"children":[{"type":"text","value":"Push to ","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"ER2Y9OLzjC"},{"type":"inlineCode","value":"main/develop","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"p6bQh8DPbf"},{"type":"text","value":" full verification:","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"TxQEqYIA9D"}],"key":"k0eiJApbIq"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":120,"column":1},"end":{"line":121,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":120,"column":1},"end":{"line":121,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Includes security/load/integration-heavy suites and packaging validation.","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"pUmVcw8eY9"}],"key":"Cipdlo6tHh"}],"key":"moMT8IyvoG"}],"key":"dE6kKsVzK3"},{"type":"paragraph","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"children":[{"type":"text","value":"Implementation note:","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"waBdUi2u1A"}],"key":"ZroDbqUW3q"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":124,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":124,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Encode tiers as explicit make targets (","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"E3iExaDWit"},{"type":"inlineCode","value":"test-pr","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"CSXIB1vnyj"},{"type":"text","value":", ","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"bDEDBBTHEd"},{"type":"inlineCode","value":"test-full","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"jwNusyXgLH"},{"type":"text","value":") to keep local and ","key":"A9dt4XveUX"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"UJlPAZ046t"}],"key":"wuctALT3Sk"},{"type":"text","value":" behavior identical.","key":"g0T4FUjBJa"}],"key":"AI7wydJVdI"}],"key":"iqodoXJPvg"}],"key":"lmP0Aavo9Y"},{"type":"heading","depth":3,"position":{"start":{"line":126,"column":1},"end":{"line":126,"column":1}},"children":[{"type":"text","value":"6) Local/","key":"W0BsjERp9Q"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"rnhsu0qMDz"}],"key":"Yzwn52h3Yy"},{"type":"text","value":" Command Parity","key":"UeyI7bamep"}],"identifier":"id-6-local-ci-command-parity","label":"6) Local/CI Command Parity","html_id":"id-6-local-ci-command-parity","implicit":true,"key":"O2jEmIAUqn"},{"type":"paragraph","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"children":[{"type":"text","value":"Entrypoints:","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"twgxajEzVc"}],"key":"WZRgaYePxX"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":130,"column":1},"end":{"line":132,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Local: ","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"key":"K2rIzfei8i"},{"type":"inlineCode","value":"./dflow ci-verify <target>","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"key":"DVXz2w3Do5"}],"key":"Ro2RZWhtnj"}],"key":"fGYoZpZvWs"},{"type":"listItem","spread":true,"position":{"start":{"line":131,"column":1},"end":{"line":132,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"hl2v7nCC90"}],"key":"fHJajlSRq3"},{"type":"text","value":": ","key":"QEVQhUj0bc"},{"type":"inlineCode","value":"make <target>","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"TNpdjJbzCK"},{"type":"text","value":" from inside container job","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"YaIjOEXXKZ"}],"key":"YPWrSV3nts"}],"key":"Pf7dcmwuUq"}],"key":"IAR2BDhuET"},{"type":"paragraph","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"children":[{"type":"text","value":"Rule:","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"UKun8oIcNC"}],"key":"tXX7TGUvZT"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":135,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"No business logic in workflow YAML; logic lives in ","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"nGYaEAr12b"},{"type":"inlineCode","value":"Makefile","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"PN1qN4com0"},{"type":"text","value":" and ","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"ThRO1mgtFy"},{"type":"inlineCode","value":"src-scripts/","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"P6ZQXvJQjn"},{"type":"text","value":".","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"md862rm4Up"}],"key":"RJ8iBVp1fV"}],"key":"JuCRa6Ym49"},{"type":"listItem","spread":true,"position":{"start":{"line":136,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"YAML only wires triggers, permissions, cache restore/save, and target invocation.","position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"key":"aA99oUNugJ"}],"key":"DkWEFIIH5o"}],"key":"T9s3eRK45a"}],"key":"QQ0VFi7ZDQ"},{"type":"heading","depth":3,"position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"children":[{"type":"text","value":"7) Impact of Multi-Surface Refactor","position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"key":"fRSBZyT9QB"}],"identifier":"id-7-impact-of-multi-surface-refactor","label":"7) Impact of Multi-Surface Refactor","html_id":"id-7-impact-of-multi-surface-refactor","implicit":true,"key":"U270psvRyh"},{"type":"paragraph","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"children":[{"type":"text","value":"If Kroki-rs adopts the multi-surface architecture (core/interface/transport/adapters), ","key":"efycajn3GK"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"mBHFfHQxjE"}],"key":"DJHQJ7Q0xF"},{"type":"text","value":"/container strategy should shift from a single-project pipeline to a contract-oriented workspace pipeline.","key":"dlwDDHJsiJ"}],"key":"ygPkG3L6WJ"},{"type":"paragraph","position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"children":[{"type":"text","value":"Changes to consider:","position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"key":"NUhKmXOuhL"}],"key":"UxrY7hfmlf"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":144,"column":1},"end":{"line":154,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":144,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Split ","key":"YbOLhnUK5x"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"HOjDkKbnys"}],"key":"U7BGprRuLE"},{"type":"text","value":" targets by layer:","key":"IICtfFW2yo"}],"key":"zDvs6ebn2X"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":145,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"core","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"wv7SOtRhbt"},{"type":"text","value":" (pure Rust, fastest checks)","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"D7r81YeOhP"}],"key":"ESjzza5oLc"}],"key":"zrrq1Ala4J"},{"type":"listItem","spread":true,"position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"interface/contracts","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"key":"s2x0V9B3lh"},{"type":"text","value":" (schema compatibility checks)","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"key":"C0v2ieel2Z"}],"key":"Uqtshu2a0L"}],"key":"tzvCJerGtg"},{"type":"listItem","spread":true,"position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"transport/adapters","position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"key":"JrqaRy42yW"},{"type":"text","value":" (HTTP, ","key":"TJdudKk4jp"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"QoMEQQwRge"}],"key":"ZSnhKHzlTG"},{"type":"text","value":", plugin integration checks)","key":"Voe15VPjaf"}],"key":"gAz94rYGr0"}],"key":"oxkNDcuS5K"}],"key":"TliBysqmvn"}],"key":"s2DJnWmg7S"},{"type":"listItem","spread":true,"position":{"start":{"line":148,"column":1},"end":{"line":151,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add contract compatibility gates:","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"key":"HO7ZHy16fe"}],"key":"vn6hZiiWQ4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":149,"column":1},"end":{"line":151,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"schema diff checks","position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"key":"XJ958LTUeY"}],"key":"SA88y6r4Dr"}],"key":"Sd9uOJBjSW"},{"type":"listItem","spread":true,"position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"backward-compatibility policy enforcement","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"key":"tWwwshFBWL"}],"key":"YzcjuqUBnq"}],"key":"mffMvXUZ69"},{"type":"listItem","spread":true,"position":{"start":{"line":151,"column":1},"end":{"line":151,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"generated type/","key":"xKdHWSrKM5"},{"type":"abbreviation","title":"Application Programming Interface.","children":[{"type":"text","value":"API","key":"XZ6xtHYYon"}],"key":"eARt00GYrp"},{"type":"text","value":" conformance tests","key":"qSiBTman1a"}],"key":"runb64wq4D"}],"key":"NZr2nkDR2O"}],"key":"m2s11UqPJ0"}],"key":"mbKe72mPat"},{"type":"listItem","spread":true,"position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Partition caches by crate group and feature profile to avoid unnecessary invalidation.","position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"key":"Xsz2HTsisy"}],"key":"wdMILHiOYT"}],"key":"eBpeNR5f5B"},{"type":"listItem","spread":true,"position":{"start":{"line":153,"column":1},"end":{"line":154,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep one shared base ","key":"Yo15gRszE7"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"PVi1KoPOAQ"}],"key":"Z1TaBXZ3rQ"},{"type":"text","value":" image, but allow optional adapter extension images for stack-specific dependencies.","key":"kEJbeWQNtX"}],"key":"M3szHSy92O"}],"key":"J22cLkXoLd"}],"key":"sxDWh0C56k"},{"type":"heading","depth":3,"position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"children":[{"type":"text","value":"8) Generic Platform Model (Beyond This Repo)","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"key":"ONQlXNCQrY"}],"identifier":"id-8-generic-platform-model-beyond-this-repo","label":"8) Generic Platform Model (Beyond This Repo)","html_id":"id-8-generic-platform-model-beyond-this-repo","implicit":true,"key":"GJSTUJbhCE"},{"type":"paragraph","position":{"start":{"line":157,"column":1},"end":{"line":157,"column":1}},"children":[{"type":"text","value":"This proposal can be generalized into a reusable ","key":"Pnkh4ilxXL"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"KYt7z7aaoj"}],"key":"e8YaSxk2Tc"},{"type":"text","value":"/dev orchestration model with stack extensions.","key":"H9rXxhKI0G"}],"key":"VXrGSKejTU"},{"type":"paragraph","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"children":[{"type":"text","value":"Platform core (generic):","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"key":"wA3Fpjs18y"}],"key":"DAoULOeoGa"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":161,"column":1},"end":{"line":166,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":161,"column":1},"end":{"line":161,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Fingerprinted container identity","position":{"start":{"line":161,"column":1},"end":{"line":161,"column":1}},"key":"GHdP52U2u4"}],"key":"xRvtxP5iEd"}],"key":"mwY9oXbUgf"},{"type":"listItem","spread":true,"position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Standard cache root contract","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"AocvbfKgvA"}],"key":"DNsaLade3P"}],"key":"wmxxPRn1Mx"},{"type":"listItem","spread":true,"position":{"start":{"line":163,"column":1},"end":{"line":163,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Canonical command graph (setup/build/lint/test/package/release)","position":{"start":{"line":163,"column":1},"end":{"line":163,"column":1}},"key":"oujIfCf9hv"}],"key":"f0q0qQAYcZ"}],"key":"BOIoendDZP"},{"type":"listItem","spread":true,"position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Provider-agnostic check reporting and status mapping","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"key":"ZcaKHH3TCz"}],"key":"fXakrqluRN"}],"key":"RMV7LsQPih"},{"type":"listItem","spread":true,"position":{"start":{"line":165,"column":1},"end":{"line":166,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Policy engine for ","key":"wNSSpRtEgH"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"go9urBWVkR"}],"key":"t2qxNFBqUV"},{"type":"text","value":" gate tiers and branch protection contracts","key":"IIksXU37Ll"}],"key":"lLnMGHplGS"}],"key":"SIaWk84xd6"}],"key":"IxKrHLWOch"},{"type":"paragraph","position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"children":[{"type":"text","value":"Stack extensions (examples):","position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"key":"EPsICRXMbj"}],"key":"xtDrMZ22Lf"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":169,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":169,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Rust:","position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"key":"d1JC2c62t1"}],"key":"E4hugx0cIV"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":170,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"cargo","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"GP4t9bwzBM"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"E2Cv0oa4E2"},{"type":"inlineCode","value":"nextest","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"aqSDN1b9ip"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"RIzT2Z6irQ"},{"type":"inlineCode","value":"clippy","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"Q1KzNwQZpk"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"wl2kh7xooI"},{"type":"inlineCode","value":"rustfmt","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"XLxw81MLYR"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"rzgZ5VPbl5"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"HwLi5uCwX2"}],"key":"k8tCkSiRBf"}],"key":"sRR5qvSr8x"},{"type":"listItem","spread":true,"position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"optional workspace-aware cache slicing by crate","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"key":"vSyYTrpiWR"}],"key":"VYhEY3Udr5"}],"key":"WuvXrE77OU"}],"key":"oRAC06lCu0"}],"key":"W2V8oISmAo"},{"type":"listItem","spread":true,"position":{"start":{"line":172,"column":1},"end":{"line":174,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Node.js/TypeScript:","position":{"start":{"line":172,"column":1},"end":{"line":172,"column":1}},"key":"MtXO4WBbwS"}],"key":"kpuhvocgri"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":173,"column":1},"end":{"line":174,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"pnpm","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"ZtJUiC6F8R"},{"type":"text","value":"/","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"E8ZAEEU5Wq"},{"type":"inlineCode","value":"npm","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"HsEhy9dOj2"},{"type":"text","value":" cache, lockfile-aware install, ","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"tbue2FFkau"},{"type":"inlineCode","value":"tsc --noEmit","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"NDpMh2q6AD"},{"type":"text","value":", eslint, vitest/jest","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"xoAwvWZi16"}],"key":"wisyh9F8mQ"}],"key":"aV2EAFiU8Y"},{"type":"listItem","spread":true,"position":{"start":{"line":174,"column":1},"end":{"line":174,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cache keys include package manager + lockfile + Node version","position":{"start":{"line":174,"column":1},"end":{"line":174,"column":1}},"key":"dgi9Uu3iEL"}],"key":"XjFGikJ1gS"}],"key":"AZms6c2E7n"}],"key":"alO5vBENAX"}],"key":"CGbwU86DL5"},{"type":"listItem","spread":true,"position":{"start":{"line":175,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"React/Lit front-end:","position":{"start":{"line":175,"column":1},"end":{"line":175,"column":1}},"key":"jBIK0aZwc7"}],"key":"MmxrQQEwyL"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":176,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"build/test/lint plus storybook/e2e extension gates","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"key":"ArOcK8yWTq"}],"key":"MfiWqaNnO8"}],"key":"r8x7LqdmRt"},{"type":"listItem","spread":true,"position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"optional browser test container profile","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"wrK5A0tgsa"}],"key":"cYeuWwsNxq"}],"key":"yzI8s2DgKh"}],"key":"QvP1gdcBnn"}],"key":"iUdASnAEDm"},{"type":"listItem","spread":true,"position":{"start":{"line":178,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"VS Code extension:","position":{"start":{"line":178,"column":1},"end":{"line":178,"column":1}},"key":"KKC4YNtAHb"}],"key":"ZX46dq4O02"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"vsce","position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"key":"bXcxc84Y4u"},{"type":"text","value":" packaging, extension host tests, ","key":"llYHGMYsQL"},{"type":"abbreviation","title":"Application Programming Interface.","children":[{"type":"text","value":"API","key":"XUKQB49k3D"}],"key":"E8NwsoOFqP"},{"type":"text","value":" compatibility checks","key":"HhlOL00htf"}],"key":"BmHB4Nva6S"}],"key":"kxGeNOjdYQ"}],"key":"TyEW1qUVL8"}],"key":"Sz0LAl6AlT"},{"type":"listItem","spread":true,"position":{"start":{"line":180,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Tauri:","position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"key":"lKFTT4beTs"}],"key":"sW2jc2uPOu"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":181,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":181,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"host OS dependency profiles, frontend + Rust dual cache strategy, bundling/signing stages","position":{"start":{"line":181,"column":1},"end":{"line":181,"column":1}},"key":"NW7k3FfeoH"}],"key":"bB0CNpUTF3"}],"key":"nXrMXeuFyv"}],"key":"qOlGuLsxIm"}],"key":"ciCx0yMgbz"}],"key":"JtmaZo3XAi"},{"type":"paragraph","position":{"start":{"line":183,"column":1},"end":{"line":183,"column":1}},"children":[{"type":"text","value":"Principle:","position":{"start":{"line":183,"column":1},"end":{"line":183,"column":1}},"key":"CLHLrFDVAQ"}],"key":"mkLoEiNg16"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":185,"column":1},"end":{"line":186,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":185,"column":1},"end":{"line":186,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep 85-90% behavior in the core orchestrator; implement stack-specific logic as plugins/extensions.","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"key":"kkD7sRRREm"}],"key":"xfHW7ErgE4"}],"key":"FDAZfRujpf"}],"key":"EcOU1R0E6p"},{"type":"heading","depth":3,"position":{"start":{"line":187,"column":1},"end":{"line":187,"column":1}},"children":[{"type":"text","value":"9) Generic ","key":"aoJCzAraYr"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"dRsEq1ojr7"}],"key":"qhKybRFqhx"},{"type":"text","value":" Tool Design (Installable via Homebrew)","key":"RMw9JtS6rO"}],"identifier":"id-9-generic-cli-tool-design-installable-via-homebrew","label":"9) Generic CLI Tool Design (Installable via Homebrew)","html_id":"id-9-generic-cli-tool-design-installable-via-homebrew","implicit":true,"key":"WjBXFz7Lwt"},{"type":"paragraph","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"children":[{"type":"text","value":"Proposed tool concept: a standalone Rust ","key":"NmqcsuHtl0"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"sykWK5uofd"}],"key":"oo1ei1eBJ6"},{"type":"text","value":" named ","key":"dmEfEQP2os"},{"type":"inlineCode","value":"devflow","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"pkE9M0aLxY"},{"type":"text","value":" (alias ","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"gOUPgWntrU"},{"type":"inlineCode","value":"dwf","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"xpBS7Ww4Pd"},{"type":"text","value":") that abstracts ","key":"uXvHVmgQZ4"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"RJ2NFcPhmR"}],"key":"VzA6j7Z694"},{"type":"text","value":"/container/caching complexity while preserving local developer UX.","key":"zg3MnH2FkN"}],"key":"mp1rbyYQmE"},{"type":"paragraph","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"children":[{"type":"text","value":"Design goals:","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"key":"D4yNDCtnrP"}],"key":"dhTXOUoVru"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":193,"column":1},"end":{"line":197,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"One command surface across projects (","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"gppeqTeUQm"},{"type":"inlineCode","value":"devflow setup","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"LbGZI3FDZS"},{"type":"text","value":", ","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"a9hTH12OSh"},{"type":"inlineCode","value":"devflow verify","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"qGLAFPD3lM"},{"type":"text","value":", ","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"X0yza8tSMS"},{"type":"inlineCode","value":"devflow ci plan","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"Qaq1dBeuMv"},{"type":"text","value":", ","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"duBYG7T3fk"},{"type":"inlineCode","value":"devflow release","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"obQKEI9l9L"},{"type":"text","value":").","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"DxY5JPnYxw"}],"key":"yYPwUTE65i"}],"key":"BJCQHjSe1B"},{"type":"listItem","spread":true,"position":{"start":{"line":194,"column":1},"end":{"line":194,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Project-level config with minimal required fields and optional extensions.","position":{"start":{"line":194,"column":1},"end":{"line":194,"column":1}},"key":"q5Ws7eZcVp"}],"key":"TwZjtQFRAO"}],"key":"FJFWdCQVKu"},{"type":"listItem","spread":true,"position":{"start":{"line":195,"column":1},"end":{"line":195,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Deterministic container-first workflows with portable local fallback.","position":{"start":{"line":195,"column":1},"end":{"line":195,"column":1}},"key":"TKIgUtT75f"}],"key":"cAObu4m3b1"}],"key":"sy0nXsFrt9"},{"type":"listItem","spread":true,"position":{"start":{"line":196,"column":1},"end":{"line":197,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Native integration with GitHub Actions generation and validation.","position":{"start":{"line":196,"column":1},"end":{"line":196,"column":1}},"key":"wxTtHNRRIL"}],"key":"AlaVxxClb6"}],"key":"f6nZt2Eu5c"}],"key":"m8FWNTySiG"},{"type":"paragraph","position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"children":[{"type":"text","value":"Canonical command interface:","position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"key":"xf1fmRHZ1m"}],"key":"VaJirMFAPI"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":200,"column":1},"end":{"line":203,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Long form: ","position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"key":"uvVlUKw9C9"},{"type":"inlineCode","value":"devflow <command>","position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"key":"SJm9AkJNj7"}],"key":"GPm5367bCf"}],"key":"agEr4ISklu"},{"type":"listItem","spread":true,"position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Short alias: ","position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"key":"ymLNiB8z3O"},{"type":"inlineCode","value":"dwf <command>","position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"key":"ayJOfDx0Pz"}],"key":"fPv6pekHZq"}],"key":"cNyz1NHcRJ"},{"type":"listItem","spread":true,"position":{"start":{"line":202,"column":1},"end":{"line":203,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Examples: ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"niOzbpeyXy"},{"type":"inlineCode","value":"dwf setup","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"BcbMqFIa0B"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"sLS45i0oFk"},{"type":"inlineCode","value":"dwf lint","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"VB5a09vv9b"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"yulahVK5LY"},{"type":"inlineCode","value":"dwf test","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"OPccfxpdni"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"lcvJ8iZ7M8"},{"type":"inlineCode","value":"dwf verify","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"ZnFPVwllB1"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"vlrXY5HHnZ"},{"type":"inlineCode","value":"dwf ci generate","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"V0Lp3XKQZj"}],"key":"lBRh4KP1Nc"}],"key":"cTBtMFxuWY"}],"key":"u796vCmENd"},{"type":"paragraph","position":{"start":{"line":204,"column":1},"end":{"line":204,"column":1}},"children":[{"type":"text","value":"High-level architecture:","position":{"start":{"line":204,"column":1},"end":{"line":204,"column":1}},"key":"euUNCqirAZ"}],"key":"GK42v8ZyZ6"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":206,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":206,"column":1},"end":{"line":210,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-core","position":{"start":{"line":206,"column":1},"end":{"line":206,"column":1}},"key":"Zttfkcox6t"},{"type":"text","value":":","position":{"start":{"line":206,"column":1},"end":{"line":206,"column":1}},"key":"TrKUupRMb0"}],"key":"wJnBwDA2bT"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":207,"column":1},"end":{"line":210,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":207,"column":1},"end":{"line":207,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Directed Acyclic Graph.","children":[{"type":"text","value":"DAG","key":"HCxgVMzXpk"}],"key":"prvFs0d25r"},{"type":"text","value":"/task executor","key":"tLDwXT3s6U"}],"key":"KjkGD6GtKU"}],"key":"TWwvwIAX9C"},{"type":"listItem","spread":true,"position":{"start":{"line":208,"column":1},"end":{"line":208,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cache key builder","position":{"start":{"line":208,"column":1},"end":{"line":208,"column":1}},"key":"rmfrsFsvaM"}],"key":"XEOQjrb3KF"}],"key":"CrbbnGRb6i"},{"type":"listItem","spread":true,"position":{"start":{"line":209,"column":1},"end":{"line":209,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"container resolver (local daemon, ","key":"NF2G0Vb5rU"},{"type":"abbreviation","title":"GitHub Container Registry.","children":[{"type":"text","value":"GHCR","key":"dO7z3ygvbV"}],"key":"RHkq3968gY"},{"type":"text","value":")","key":"ti2SDecQPV"}],"key":"VTkl0NJWfh"}],"key":"SvPpaT9OLN"},{"type":"listItem","spread":true,"position":{"start":{"line":210,"column":1},"end":{"line":210,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"status/check emitter abstraction","position":{"start":{"line":210,"column":1},"end":{"line":210,"column":1}},"key":"i3lEWSTayL"}],"key":"CihiSVYDQ0"}],"key":"legAZNG7Ii"}],"key":"QWjXYBeiqb"}],"key":"HHm8XGgkrj"},{"type":"listItem","spread":true,"position":{"start":{"line":211,"column":1},"end":{"line":217,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-ext-*","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"A3tdCTEvvJ"},{"type":"text","value":":","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"issiLzujfn"}],"key":"bA1lkBGxGI"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":212,"column":1},"end":{"line":217,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":212,"column":1},"end":{"line":212,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-rust","position":{"start":{"line":212,"column":1},"end":{"line":212,"column":1}},"key":"CnvBULasrt"}],"key":"rzMa7T3Vos"}],"key":"fj7cyA0e9k"},{"type":"listItem","spread":true,"position":{"start":{"line":213,"column":1},"end":{"line":213,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-node","position":{"start":{"line":213,"column":1},"end":{"line":213,"column":1}},"key":"OHPQ1KiRGo"}],"key":"nTo6WG1NKA"}],"key":"mXlROfDYlS"},{"type":"listItem","spread":true,"position":{"start":{"line":214,"column":1},"end":{"line":214,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-frontend-react","position":{"start":{"line":214,"column":1},"end":{"line":214,"column":1}},"key":"kJCyuumPbu"}],"key":"h5RINEOqr8"}],"key":"dhR8n4gpuP"},{"type":"listItem","spread":true,"position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-frontend-lit","position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"key":"XmxQQbL4G8"}],"key":"BI4OkyjRsw"}],"key":"IdjkCXb9V9"},{"type":"listItem","spread":true,"position":{"start":{"line":216,"column":1},"end":{"line":216,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-vscode","position":{"start":{"line":216,"column":1},"end":{"line":216,"column":1}},"key":"MIXkCjzlXm"}],"key":"PbkIjuIMt1"}],"key":"eQhCrWNQci"},{"type":"listItem","spread":true,"position":{"start":{"line":217,"column":1},"end":{"line":217,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-tauri","position":{"start":{"line":217,"column":1},"end":{"line":217,"column":1}},"key":"tYOvlen14W"}],"key":"DpCUiKPzFg"}],"key":"Ki1z7rhmXe"}],"key":"FhcfESEenT"}],"key":"kcQc8QteGL"},{"type":"listItem","spread":true,"position":{"start":{"line":218,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-gh","position":{"start":{"line":218,"column":1},"end":{"line":218,"column":1}},"key":"BqM2dyJvyn"},{"type":"text","value":":","position":{"start":{"line":218,"column":1},"end":{"line":218,"column":1}},"key":"wCxOOPCsA2"}],"key":"nxx62cxAfM"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"workflow templating, required-check contract generation, cache strategy synthesis","position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"key":"ivhlAmTjyf"}],"key":"AYDjfEwwba"}],"key":"hLgdWvKLDV"}],"key":"dTMwopTacF"}],"key":"leMRiGMPQN"},{"type":"listItem","spread":true,"position":{"start":{"line":220,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-policy","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"F4Py8qjYL5"},{"type":"text","value":":","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"EmxDk8CEcC"}],"key":"LsaKmU0B9e"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":221,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":221,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"branch rules, ","key":"Bu287lXaqx"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"MGuuKvXUyT"}],"key":"MJuHONeJWI"},{"type":"text","value":" gates, release constraints, environment matrix policy","key":"XsWGHZupIF"}],"key":"nWYv6ADMK8"}],"key":"cbP3PBuX67"}],"key":"FKNt9C3vzw"}],"key":"uh2xFB8DoW"}],"key":"mlt8HmLJ2d"},{"type":"paragraph","position":{"start":{"line":223,"column":1},"end":{"line":223,"column":1}},"children":[{"type":"text","value":"Configuration model (example):","position":{"start":{"line":223,"column":1},"end":{"line":223,"column":1}},"key":"shLpMEqDLx"}],"key":"YEM3BqZvFA"},{"type":"code","lang":"toml","value":"[project]\nname = \"kroki-rs\"\nstack = [\"rust\"]\n\n[container]\nimage = \"ghcr.io/org/repo-ci\"\nfingerprint_inputs = [\"Dockerfile\", \"Makefile\", \"src-scripts/**\", \"rust-toolchain.toml\"]\n\n[cache]\nroot = \".cache/devflow\"\nstrategy = \"layered\"\n\n[targets]\npr = [\"fmt\", \"lint\", \"build\", \"test\"]\nmain = [\"fmt\", \"lint\", \"build\", \"test\", \"smoke\", \"security\"]\n\n[extensions.rust]\nfeatures = [\"native-browser\"]\ntest_runner = \"nextest\"","position":{"start":{"line":225,"column":1},"end":{"line":245,"column":1}},"key":"kbQVMYyWrp"},{"type":"paragraph","position":{"start":{"line":247,"column":1},"end":{"line":247,"column":1}},"children":[{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"M76Delntc6"}],"key":"DBkR1QoPCY"},{"type":"text","value":" capabilities:","key":"FZVEch2K0U"}],"key":"mR8XlNQycI"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":249,"column":1},"end":{"line":255,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"init","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"PnWDYwTZJ6"},{"type":"text","value":": detect stack and scaffold config + make targets + workflow skeleton.","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"MHXUDh98R2"}],"key":"j2bKnTcqkk"}],"key":"U16N426nau"},{"type":"listItem","spread":true,"position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"doctor","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"key":"Y2hjyjoLsK"},{"type":"text","value":": validate container engine, cache root permissions, toolchain drift.","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"key":"SbwxmB1zsq"}],"key":"oy3sIsmecq"}],"key":"wFTYy0T6Fu"},{"type":"listItem","spread":true,"position":{"start":{"line":251,"column":1},"end":{"line":251,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"verify","position":{"start":{"line":251,"column":1},"end":{"line":251,"column":1}},"key":"u9IXKwrgus"},{"type":"text","value":": run the canonical local containerized pipeline.","position":{"start":{"line":251,"column":1},"end":{"line":251,"column":1}},"key":"iAJ93fAZNB"}],"key":"otYp0BddjI"}],"key":"SuS8cDFwau"},{"type":"listItem","spread":true,"position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ci generate","position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"key":"R7Xo0pU7pX"},{"type":"text","value":": generate/update GitHub Actions workflow from config.","position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"key":"PthIjiftWb"}],"key":"MtJwjy5skC"}],"key":"WBca8Bo7Fk"},{"type":"listItem","spread":true,"position":{"start":{"line":253,"column":1},"end":{"line":253,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"cache stats/prune","position":{"start":{"line":253,"column":1},"end":{"line":253,"column":1}},"key":"e9XITCtU3b"},{"type":"text","value":": inspect and clean cache by scope/age.","position":{"start":{"line":253,"column":1},"end":{"line":253,"column":1}},"key":"hQuwIBWLed"}],"key":"pD0UJ9q1cx"}],"key":"U21O2z0fap"},{"type":"listItem","spread":true,"position":{"start":{"line":254,"column":1},"end":{"line":255,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"policy check","position":{"start":{"line":254,"column":1},"end":{"line":254,"column":1}},"key":"AkYC3mfMMe"},{"type":"text","value":": ensure repo protections and required checks match config.","position":{"start":{"line":254,"column":1},"end":{"line":254,"column":1}},"key":"KpgzGbORb4"}],"key":"qs9qS6mciG"}],"key":"xqNFKgIo5F"}],"key":"dxtTkIuAQn"},{"type":"paragraph","position":{"start":{"line":256,"column":1},"end":{"line":256,"column":1}},"children":[{"type":"text","value":"Canonical command mapping by stack:","position":{"start":{"line":256,"column":1},"end":{"line":256,"column":1}},"key":"rhYeJn69wB"}],"key":"dCUqURW2aE"},{"type":"table","position":{"start":{"line":258,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Canonical command","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"YpRZs9bks9"}],"key":"tXXY67WlgH"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Rust stack","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"V4qNIRZtUy"}],"key":"CtAaUbNWlU"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Node/TypeScript (","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"GL3przP12b"},{"type":"inlineCode","value":"pnpm","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"lhMltSK1l0"},{"type":"text","value":")","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"n4OERgp3nA"}],"key":"aIk6aykck5"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"React/Lit frontend","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"z7tTaXuHvY"}],"key":"G1jxuZ70VM"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"VS Code extension","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"lPWHMrVsQb"}],"key":"Xi9L1xFzQ8"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Tauri","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"ptZqF2rWZb"}],"key":"kE8LQrQ6zU"}],"key":"CzfvQta9UF"},{"type":"tableRow","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"dwf setup","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"wWF4Eo9Rl3"}],"key":"NGmVMtPSu3"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"rustup show","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"gAcU6nlv9W"},{"type":"text","value":", toolchain sync, container/image resolve","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"maCBxu4XYd"}],"key":"IvnCPeRnUZ"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"pnpm install --frozen-lockfile","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"Tzxn0t1wJY"}],"key":"czvlAjeczq"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"pnpm install --frozen-lockfile","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"ClbnfTFUoi"}],"key":"DWgcl7Caph"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"pnpm install --frozen-lockfile","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"HWXwAT3LMg"}],"key":"tw8RSWg1h6"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"text","value":"Rust + ","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"u2cUn3uZUz"},{"type":"inlineCode","value":"pnpm install","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"DMihoUeVIJ"},{"type":"text","value":" + platform deps check","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"PvAsloW21s"}],"key":"dV3g74qCET"}],"key":"whqF7ADCoC"},{"type":"tableRow","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"dwf fmt","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"EwbHIPuLkr"}],"key":"l72BLp8rIy"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"BffaSqbYco"}],"key":"MSIjMgIegM"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -w .","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"xBH2LDS55O"},{"type":"text","value":" (or repo formatter)","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"dTUKRnPrtG"}],"key":"VztYcVi9WQ"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -w .","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"Q5ey8F2VVm"}],"key":"JwWHdU6abG"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -w .","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"Axce3EUh9U"}],"key":"nTz4MOKUbI"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"JIE7tDtNY1"},{"type":"text","value":" + frontend formatter","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"CXcnQ5Td1g"}],"key":"mIqQXoV6P5"}],"key":"jqfqDGZmCr"},{"type":"tableRow","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"dwf fmt-check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"TW7fTHNCex"}],"key":"VYtknq1x1I"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all -- --check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"nCc9zYspND"}],"key":"uuG5plelcl"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -c .","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"shl91pOav9"}],"key":"ZAqwTCFwOn"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -c .","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"tJl8ZjPYD1"}],"key":"hiF65FVLKM"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -c .","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"aWaJCwdebX"}],"key":"VFEPJ0pwbl"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all -- --check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"EsToB1922S"},{"type":"text","value":" + frontend fmt check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"nzZFmzhzc7"}],"key":"Jcnzax1K20"}],"key":"FmulGroXXd"},{"type":"tableRow","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"dwf lint","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"BZ0agb3FfM"}],"key":"QYyXOLdMYk"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"cargo clippy --all-targets -- -D warnings","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"svqHiAZyHT"}],"key":"ymWnlKWZ0P"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"pnpm eslint .","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"qr35Btbd1E"},{"type":"text","value":" + ","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"mKaStHi9jU"},{"type":"inlineCode","value":"pnpm tsc --noEmit","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"wLmCusjdv5"}],"key":"MK2eXrpMH0"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"pnpm eslint .","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"qG8L9s2MCe"},{"type":"text","value":" + typecheck","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"FBgGwhGMrQ"}],"key":"VAvgOecZ9z"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"pnpm eslint .","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"jDZsQU2bW8"},{"type":"text","value":" + extension typecheck","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"HBQNPpZNGR"}],"key":"rkWhu3JjgG"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"text","value":"Rust clippy + frontend eslint/typecheck","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"T5cTnuwl76"}],"key":"CyIrsS560z"}],"key":"QF2M74KjiU"},{"type":"tableRow","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"dwf build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"HsfeZqmRtD"}],"key":"ZIav8YfG5f"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"cargo build --release","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"GqEgOZ09pY"}],"key":"b9B7MSkdHB"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"pnpm build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"P66f2LGWGt"}],"key":"GWtm1omLeR"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"pnpm build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"EqPUSbLsYp"}],"key":"fnMjAFv0Dp"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"pnpm package","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"OhO3xtr3bj"},{"type":"text","value":" / extension bundle","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"p7opzxiGO3"}],"key":"UwgY0yHs3J"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"cargo build --release","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"l2RaYMf4uM"},{"type":"text","value":" + frontend build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"h4qHTXyNyI"}],"key":"xQUa8iSJK5"}],"key":"XIvzucWaOu"},{"type":"tableRow","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"dwf test","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"Rxy3xN6FkG"}],"key":"FHbdVg97aA"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"cargo nextest run","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"Xuc31JEUbI"}],"key":"lcgXvoFDM2"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"pnpm test","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"kGFn0JFuO7"},{"type":"text","value":" (vitest/jest)","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"HlrpzWIFSs"}],"key":"i4RPOz5RvB"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"pnpm test","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"axFxOzlRef"}],"key":"EgFFFwVnti"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"text","value":"extension host tests","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"tGKyBJ6NB5"}],"key":"ELmYZwCD7W"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"cargo nextest run","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"jcqn6ZfpNP"},{"type":"text","value":" + frontend tests","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"eiETJ2rAyU"}],"key":"U647F1t3Xu"}],"key":"ctEhUkrhIU"},{"type":"tableRow","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"inlineCode","value":"dwf smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"Cvh0qwlEw4"}],"key":"mIP5Q9sHdb"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"app health/","key":"xaS9jes244"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"WRIpYgGQLS"}],"key":"KAqrGDHk0h"},{"type":"text","value":" smoke script","key":"vefD1aA0Z1"}],"key":"M1M4hItV3p"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"app startup + HTTP smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"uJu0agtuWr"}],"key":"m5itwhLv3P"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"preview/build smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"dlDQN6y27W"}],"key":"aSOoSABzzL"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"install/package smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"lXQHgUjRDr"}],"key":"KSXEYlCYKB"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"app startup/bundle smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"kzbU50uR7q"}],"key":"IRk3NEYyGl"}],"key":"cOQdJTN7Wo"},{"type":"tableRow","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"inlineCode","value":"dwf verify","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"GIRkWMeKo8"}],"key":"ZPrJSVoIBf"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"inlineCode","value":"fmt-check + lint + build + test + smoke","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"B8JuP47d6M"}],"key":"JXhP0bXcrs"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence mapped to JS toolchain","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"XkG2xbgIMu"}],"key":"NILa7n5L55"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"YEhgv0gLww"}],"key":"T1dJMPgr9w"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"Wtb5MCnKKw"}],"key":"LaNBR00JM1"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"R7QE6i4fZb"}],"key":"t7Y7Bgxzcg"}],"key":"tRCV6HZpzh"},{"type":"tableRow","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"inlineCode","value":"dwf ci generate","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"WTpbHU8CCv"}],"key":"SAGca80UDi"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"generate Rust-oriented ","key":"AT5UWe64od"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"OVYyDL87Kh"}],"key":"zLOaVJmhMB"},{"type":"text","value":" jobs/cache keys","key":"NSAfyF87Xv"}],"key":"vpagrUq4SI"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"generate pnpm/node ","key":"sQEHfucgMs"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"sVLgnAPBaJ"}],"key":"EfiZ4TT2RP"},{"type":"text","value":" jobs/cache keys","key":"bqIw4FScF7"}],"key":"PmNGG028To"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"add frontend/e2e job templates","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"cnm7uykq2r"}],"key":"MzVrE2Eots"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"add extension packaging jobs","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"y1KSBXGFqp"}],"key":"HjRowbawCJ"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"add OS matrix + bundling/signing jobs","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"DkOZkGw2Be"}],"key":"n1FcM0UV21"}],"key":"kDRPCbsbIN"}],"key":"fwynv3y8UC"},{"type":"paragraph","position":{"start":{"line":270,"column":1},"end":{"line":270,"column":1}},"children":[{"type":"text","value":"Notes:","position":{"start":{"line":270,"column":1},"end":{"line":270,"column":1}},"key":"vkpDZFBi8z"}],"key":"ATnHaE6rGH"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":272,"column":1},"end":{"line":274,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":272,"column":1},"end":{"line":272,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The canonical command names are stable for developers; stack-specific executors are resolved from config extensions.","position":{"start":{"line":272,"column":1},"end":{"line":272,"column":1}},"key":"RkesPqodnE"}],"key":"w5eqYLOf0E"}],"key":"jLoPaMDmt9"},{"type":"listItem","spread":true,"position":{"start":{"line":273,"column":1},"end":{"line":274,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"dwf verify","position":{"start":{"line":273,"column":1},"end":{"line":273,"column":1}},"key":"sGjygcJJqJ"},{"type":"text","value":" should always run inside the configured fingerprinted container in ","key":"CKdQ2W2hRq"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"lMv1pqcsJQ"}],"key":"PT6AkOwtge"},{"type":"text","value":", and optionally locally via containerized mode.","key":"dFsL883Bbx"}],"key":"b6hIJ0nIe7"}],"key":"KOd5Cx6LsU"}],"key":"pFcKravCTp"},{"type":"paragraph","position":{"start":{"line":275,"column":1},"end":{"line":275,"column":1}},"children":[{"type":"text","value":"Rollout path for this project:","position":{"start":{"line":275,"column":1},"end":{"line":275,"column":1}},"key":"ffrqT3xQlA"}],"key":"mFPXHaUGOA"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":277,"column":1},"end":{"line":280,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Phase A: treat current ","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"kEuJgYUVC4"},{"type":"inlineCode","value":"dflow","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"nDwCP1EoLh"},{"type":"text","value":" as compatibility facade and map it to ","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"bOdfVjjbCO"},{"type":"inlineCode","value":"devflow","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"ROdSjgQCVD"},{"type":"text","value":"/","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"uq4BOJnKRP"},{"type":"inlineCode","value":"dwf","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"opYnfq2oy9"},{"type":"text","value":" commands.","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"zwFdMLVYGj"}],"key":"Qd7xxuhdnA"}],"key":"H6A98Opk04"},{"type":"listItem","spread":true,"position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Phase B: move cache/image/check contracts into typed config.","position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"key":"rzRLfBjQEk"}],"key":"wMUxA8lXDl"}],"key":"jsNBXMW48c"},{"type":"listItem","spread":true,"position":{"start":{"line":279,"column":1},"end":{"line":280,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Phase C: keep project-specific extensions only for diagram-tool dependencies and release packaging nuances.","position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"key":"EeYpGA2r9r"}],"key":"GA5zseg4CJ"}],"key":"UEMGGkeCCI"}],"key":"IVorWBfLWa"},{"type":"heading","depth":2,"position":{"start":{"line":281,"column":1},"end":{"line":281,"column":1}},"children":[{"type":"text","value":"Required Repo Changes","position":{"start":{"line":281,"column":1},"end":{"line":281,"column":1}},"key":"fteNj488bf"}],"identifier":"required-repo-changes","label":"Required Repo Changes","html_id":"required-repo-changes","implicit":true,"key":"TuRlIqmiiR"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":283,"column":1},"end":{"line":298,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Standardize fingerprint algorithm docs + scripts to one input set.","position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"key":"yxa3Io3Lw1"}],"key":"oUI1djxd4l"}],"key":"TUatDh2HHq"},{"type":"listItem","spread":true,"position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Introduce ","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"MFy5mXwVpv"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"ltYSRkr3LV"},{"type":"text","value":" and replace hardcoded ","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"B4kC2ZmC6O"},{"type":"inlineCode","value":".cargo-cache","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"ei3pZor7aT"},{"type":"text","value":"/","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"d0kqTkiwgN"},{"type":"inlineCode","value":"target/ci","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"kNrasKW6T6"},{"type":"text","value":" paths in scripts and make fragments.","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"HS67mytapk"}],"key":"aV29YpAR3a"}],"key":"GZyG9xP1uo"},{"type":"listItem","spread":true,"position":{"start":{"line":285,"column":1},"end":{"line":289,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add explicit ","key":"meQIXZxV4d"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"if9DYrSJcR"}],"key":"t9qVgTE1my"},{"type":"text","value":"-tier targets:","key":"eQWyrSYqYV"}],"key":"VKkuAqvwtU"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":286,"column":1},"end":{"line":289,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":286,"column":1},"end":{"line":286,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"fmt-check","position":{"start":{"line":286,"column":1},"end":{"line":286,"column":1}},"key":"hgQQBL4HrH"}],"key":"G1eNIxC28z"}],"key":"Ty8DSNm95E"},{"type":"listItem","spread":true,"position":{"start":{"line":287,"column":1},"end":{"line":287,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"lint-clippy","position":{"start":{"line":287,"column":1},"end":{"line":287,"column":1}},"key":"JS06laLQEi"}],"key":"uq5TImbtjc"}],"key":"c8pjczCzdg"},{"type":"listItem","spread":true,"position":{"start":{"line":288,"column":1},"end":{"line":288,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"test-pr","position":{"start":{"line":288,"column":1},"end":{"line":288,"column":1}},"key":"Zgi2McdDLT"}],"key":"e9UMiRLkWt"}],"key":"UokjJsYUQi"},{"type":"listItem","spread":true,"position":{"start":{"line":289,"column":1},"end":{"line":289,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"test-full","position":{"start":{"line":289,"column":1},"end":{"line":289,"column":1}},"key":"ml8nF6jP46"}],"key":"AVxjsJveXC"}],"key":"uWilJA6VgP"}],"key":"jTxXgw6EKu"}],"key":"Cw5x8NMPme"},{"type":"listItem","spread":true,"position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Consolidate ","key":"jfaQ11em8R"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"MV8w6aCIr7"}],"key":"PZ4034KtdW"},{"type":"text","value":" triggers into one workflow (","key":"fVKNbaguVn"},{"type":"inlineCode","value":"main","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"e9KL7bEcWD"},{"type":"text","value":", ","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"mfYbWmk6Rg"},{"type":"inlineCode","value":"develop","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"f4wN0D1avi"},{"type":"text","value":") and keep release/package workflows separate.","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"Yha110Pq5g"}],"key":"iS3LGssUfC"}],"key":"CGLlKwe2Ku"},{"type":"listItem","spread":true,"position":{"start":{"line":291,"column":1},"end":{"line":291,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add cache key normalization helper (script or make target) reused by both local diagnostics and GHA.","position":{"start":{"line":291,"column":1},"end":{"line":291,"column":1}},"key":"ba1pV2fWNP"}],"key":"u6lsiXwnuC"}],"key":"vnxU7avfMO"},{"type":"listItem","spread":true,"position":{"start":{"line":292,"column":1},"end":{"line":295,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add ","key":"NgmOcST4KD"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"we3OBSwxAw"}],"key":"Amh5aJxmMU"},{"type":"text","value":" observability summary:","key":"ZF6HvzNy3y"}],"key":"a2jp1DrGq9"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":293,"column":1},"end":{"line":295,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":293,"column":1},"end":{"line":293,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"fingerprint used","position":{"start":{"line":293,"column":1},"end":{"line":293,"column":1}},"key":"JTe14qukjC"}],"key":"YqyhwC9gNE"}],"key":"nRkoVC7fJH"},{"type":"listItem","spread":true,"position":{"start":{"line":294,"column":1},"end":{"line":294,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cache hit/miss stats","position":{"start":{"line":294,"column":1},"end":{"line":294,"column":1}},"key":"XpCeAKDs6Q"}],"key":"ZvXOjbSYK1"}],"key":"n4KFGNsXaO"},{"type":"listItem","spread":true,"position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"sccache","position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"key":"rawWQBFPd5"},{"type":"text","value":" hit ratio per run","position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"key":"GMZutn7CdF"}],"key":"sisSPby6WH"}],"key":"PF7gfsEEvV"}],"key":"Kz8risBzXL"}],"key":"N6L1Scd4eq"},{"type":"listItem","spread":true,"position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add explicit note in workflow docs that ","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"lqGr1qFthx"},{"type":"inlineCode","value":"build","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"jTAnQ4IX1L"},{"type":"text","value":" and all ","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"ZJAwY8uwYi"},{"type":"inlineCode","value":"verify-*","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"dudjvVqZF7"},{"type":"text","value":" jobs execute in the fingerprinted ","key":"Naobf0V4WY"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"wixVITadv2"}],"key":"vy29MRsbgx"},{"type":"text","value":" container.","key":"FzP36pQeQ2"}],"key":"yMscUg4UmD"}],"key":"Bc77xMBoES"},{"type":"listItem","spread":true,"position":{"start":{"line":297,"column":1},"end":{"line":298,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add extension points in docs/config for future multi-surface and multi-stack orchestration.","position":{"start":{"line":297,"column":1},"end":{"line":297,"column":1}},"key":"pi3QCE8tnN"}],"key":"lZ5oKzWkEU"}],"key":"IelEvBc6ZT"}],"key":"HvSCy2O4WF"},{"type":"heading","depth":2,"position":{"start":{"line":299,"column":1},"end":{"line":299,"column":1}},"children":[{"type":"text","value":"Suggested Implementation Plan (v0.1.0)","position":{"start":{"line":299,"column":1},"end":{"line":299,"column":1}},"key":"MLCgMnaFVn"}],"identifier":"suggested-implementation-plan-v0-1-0","label":"Suggested Implementation Plan (v0.1.0)","html_id":"suggested-implementation-plan-v0-1-0","implicit":true,"key":"bTQT9hQtsH"},{"type":"heading","depth":3,"position":{"start":{"line":301,"column":1},"end":{"line":301,"column":1}},"children":[{"type":"text","value":"Phase 1: Cache Contract and Fingerprint Consistency","position":{"start":{"line":301,"column":1},"end":{"line":301,"column":1}},"key":"WU1C1sna2T"}],"identifier":"phase-1-cache-contract-and-fingerprint-consistency","label":"Phase 1: Cache Contract and Fingerprint Consistency","html_id":"phase-1-cache-contract-and-fingerprint-consistency","implicit":true,"key":"qGyZJsK3QN"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":303,"column":1},"end":{"line":306,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add ","position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"key":"oeLQqVUMiN"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"key":"aDuPodzNRf"},{"type":"text","value":" contract and migrate mounts/env vars.","position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"key":"wknlQSzVUR"}],"key":"IS8diVr0Xk"}],"key":"HWxVpQcA43"},{"type":"listItem","spread":true,"position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Align fingerprint implementation and documentation.","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"key":"goIGWKYP7f"}],"key":"Zuk6wxGsXc"}],"key":"eF3ljmMJWx"},{"type":"listItem","spread":true,"position":{"start":{"line":305,"column":1},"end":{"line":306,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Validate no regression in ","position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"key":"lIqEZHQzRn"},{"type":"inlineCode","value":"./dflow ci-verify","position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"key":"OYeYdFOzx8"},{"type":"text","value":".","position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"key":"LMtlg6DcwW"}],"key":"r9zhOJHJJp"}],"key":"jOB42IS3uO"}],"key":"qMsqwA5jcn"},{"type":"heading","depth":3,"position":{"start":{"line":307,"column":1},"end":{"line":307,"column":1}},"children":[{"type":"text","value":"Phase 2: ","key":"q3Lid1RRoa"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"GGMlLZ9TbG"}],"key":"dUkcz0elHc"},{"type":"text","value":" Job Contract Refactor","key":"P4ZQQT4rvh"}],"identifier":"phase-2-ci-job-contract-refactor","label":"Phase 2: CI Job Contract Refactor","html_id":"phase-2-ci-job-contract-refactor","implicit":true,"key":"vx8DnFTkn6"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":309,"column":1},"end":{"line":312,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":309,"column":1},"end":{"line":309,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Create/adjust make targets for granular checks.","position":{"start":{"line":309,"column":1},"end":{"line":309,"column":1}},"key":"qDchW9hELs"}],"key":"lV2zdHVq1J"}],"key":"l4VN3iTUML"},{"type":"listItem","spread":true,"position":{"start":{"line":310,"column":1},"end":{"line":310,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Refactor ","key":"LDocluNlQ9"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"sPoafSn586"}],"key":"Ew3GygmbvA"},{"type":"text","value":" workflow into prep/build/parallel-verify jobs.","key":"SoobPNWyFB"}],"key":"KCl1QZbXtW"}],"key":"gdv4W5VS78"},{"type":"listItem","spread":true,"position":{"start":{"line":311,"column":1},"end":{"line":312,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep required checks mapped to the same stable names.","position":{"start":{"line":311,"column":1},"end":{"line":311,"column":1}},"key":"Q5YtMgjwpX"}],"key":"XzVuplIhM3"}],"key":"FeGH0YBU2l"}],"key":"XvsbvS4rSA"},{"type":"heading","depth":3,"position":{"start":{"line":313,"column":1},"end":{"line":313,"column":1}},"children":[{"type":"text","value":"Phase 3: Test Tiering + Runtime Optimization","position":{"start":{"line":313,"column":1},"end":{"line":313,"column":1}},"key":"aapbdKZo8M"}],"identifier":"phase-3-test-tiering-runtime-optimization","label":"Phase 3: Test Tiering + Runtime Optimization","html_id":"phase-3-test-tiering-runtime-optimization","implicit":true,"key":"skpVJe24yb"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":315,"column":1},"end":{"line":318,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":315,"column":1},"end":{"line":315,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Formalize ","key":"ZkvkGeXRiV"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"BtaCZyD3gv"}],"key":"YyZPhhnFCS"},{"type":"text","value":" vs full test tiers.","key":"KkLCPpfyqd"}],"key":"VWb0I4k7ln"}],"key":"fba4qPVS1q"},{"type":"listItem","spread":true,"position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Tune ","position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"key":"cljY3LAyDw"},{"type":"inlineCode","value":"nextest","position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"key":"Nk6dHTEm6o"},{"type":"text","value":" profile and retries for flaky integration suites.","position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"key":"hAzRWggmr8"}],"key":"vpT0TR1lHx"}],"key":"av0VFaZtmv"},{"type":"listItem","spread":true,"position":{"start":{"line":317,"column":1},"end":{"line":318,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add run summaries with cache and compile diagnostics.","position":{"start":{"line":317,"column":1},"end":{"line":317,"column":1}},"key":"VIgOkeST6T"}],"key":"LZ8yj00CfA"}],"key":"ve7a0GFX8q"}],"key":"xFcDDfftLB"},{"type":"heading","depth":3,"position":{"start":{"line":319,"column":1},"end":{"line":319,"column":1}},"children":[{"type":"text","value":"Phase 4: Hardening (Optional, Recommended)","position":{"start":{"line":319,"column":1},"end":{"line":319,"column":1}},"key":"b66q182pnW"}],"identifier":"phase-4-hardening-optional-recommended","label":"Phase 4: Hardening (Optional, Recommended)","html_id":"phase-4-hardening-optional-recommended","implicit":true,"key":"esty1mntts"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":321,"column":1},"end":{"line":324,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":321,"column":1},"end":{"line":321,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add SBOM + image scan gates.","position":{"start":{"line":321,"column":1},"end":{"line":321,"column":1}},"key":"rkcdmJIHEz"}],"key":"ZeaYltGiZd"}],"key":"iQ4qKBmVBR"},{"type":"listItem","spread":true,"position":{"start":{"line":322,"column":1},"end":{"line":322,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add provenance/signing for release images.","position":{"start":{"line":322,"column":1},"end":{"line":322,"column":1}},"key":"EAiRfQWX3G"}],"key":"YKJLL1Nnou"}],"key":"rCVXlo0ZOQ"},{"type":"listItem","spread":true,"position":{"start":{"line":323,"column":1},"end":{"line":324,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add periodic cache hygiene workflow.","position":{"start":{"line":323,"column":1},"end":{"line":323,"column":1}},"key":"PFGym1bty7"}],"key":"il6oTQCz4i"}],"key":"DFXs7DOoNS"}],"key":"dykrdW1FVt"},{"type":"heading","depth":2,"position":{"start":{"line":325,"column":1},"end":{"line":325,"column":1}},"children":[{"type":"text","value":"Risks and Mitigations","position":{"start":{"line":325,"column":1},"end":{"line":325,"column":1}},"key":"uRO6RiBXnC"}],"identifier":"risks-and-mitigations","label":"Risks and Mitigations","html_id":"risks-and-mitigations","implicit":true,"key":"JAoZYbdB4m"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":327,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":327,"column":1},"end":{"line":328,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Risk: over-broad target cache reuse can cause stale artifacts.","position":{"start":{"line":327,"column":1},"end":{"line":327,"column":1}},"key":"nYF06DYovG"}],"key":"blQdGUZccD"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":328,"column":1},"end":{"line":328,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":328,"column":1},"end":{"line":328,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mitigation: include fingerprint + toolchain + feature mode in cache key.","position":{"start":{"line":328,"column":1},"end":{"line":328,"column":1}},"key":"QXc7kxOrDI"}],"key":"mwQ8UppKLh"}],"key":"A6FxTuXtno"}],"key":"pCcwJnl9ju"}],"key":"PCSlqtBxt7"},{"type":"listItem","spread":true,"position":{"start":{"line":329,"column":1},"end":{"line":330,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Risk: too many parallel jobs increase image pull overhead.","position":{"start":{"line":329,"column":1},"end":{"line":329,"column":1}},"key":"RLIMkGGqey"}],"key":"g1M7kDvEXa"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":330,"column":1},"end":{"line":330,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":330,"column":1},"end":{"line":330,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mitigation: keep verify jobs lightweight and rely on prep/build warm cache.","position":{"start":{"line":330,"column":1},"end":{"line":330,"column":1}},"key":"vR7egrPGIP"}],"key":"pfOtbnwE5U"}],"key":"FbXIj64YR5"}],"key":"jhImQpCuUt"}],"key":"cUzUcDwDjb"},{"type":"listItem","spread":true,"position":{"start":{"line":331,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Risk: local cache growth on macOS.","position":{"start":{"line":331,"column":1},"end":{"line":331,"column":1}},"key":"dSRA4a8Hhy"}],"key":"d07uMPfqiL"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":332,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":332,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mitigation: configurable cache root + retention/prune targets.","position":{"start":{"line":332,"column":1},"end":{"line":332,"column":1}},"key":"jwiXvftuNp"}],"key":"dN8I0NBANr"}],"key":"oNPwFGc2To"}],"key":"x8xjP3ezLK"}],"key":"fG2sEGJW6v"}],"key":"ysHSBSHjeL"},{"type":"heading","depth":2,"position":{"start":{"line":334,"column":1},"end":{"line":334,"column":1}},"children":[{"type":"text","value":"Decision Notes on Requested Strategies","position":{"start":{"line":334,"column":1},"end":{"line":334,"column":1}},"key":"mFaT8swfwo"}],"identifier":"decision-notes-on-requested-strategies","label":"Decision Notes on Requested Strategies","html_id":"decision-notes-on-requested-strategies","implicit":true,"key":"beWeyMx77L"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":336,"column":1},"end":{"line":340,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":336,"column":1},"end":{"line":336,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mounting cargo registry/git/target caches is correct and should remain, with stronger key scoping and a configurable root.","position":{"start":{"line":336,"column":1},"end":{"line":336,"column":1}},"key":"RMgy1W1ZdN"}],"key":"GoO4zl3L5o"}],"key":"Gy2vTx9SLj"},{"type":"listItem","spread":true,"position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"cargo nextest","position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"key":"LWQDuLZknR"},{"type":"text","value":" is the right default for ","key":"w9LjKsUqD7"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"GbVQotmMCv"}],"key":"JYIYB2yjUY"},{"type":"text","value":"; keep it as the primary ","key":"zy1gxJBxPD"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"NPKhpboIRg"}],"key":"CbqvgHd6VT"},{"type":"text","value":" test executor.","key":"gzfK2X5pQA"}],"key":"EeZqeHSFzq"}],"key":"mexTUy1QWl"},{"type":"listItem","spread":true,"position":{"start":{"line":338,"column":1},"end":{"line":338,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Granular checks should remain visible as separate required statuses/check-runs.","position":{"start":{"line":338,"column":1},"end":{"line":338,"column":1}},"key":"Q2wFTvhPqZ"}],"key":"NmpzqLHTXl"}],"key":"PeN4igqneh"},{"type":"listItem","spread":true,"position":{"start":{"line":339,"column":1},"end":{"line":340,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Single ","key":"nryTfUrT4s"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"R7sKFTyXaU"}],"key":"ngLRsRcmdP"},{"type":"text","value":" workflow for ","key":"lrIanu7Khg"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"AZHV2Yr6yA"}],"key":"ePHIUJXb47"},{"type":"text","value":"/push on ","key":"cY6u8wiUHw"},{"type":"inlineCode","value":"main","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"Ucsnk3xh7E"},{"type":"text","value":" and ","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"hhnillEnhl"},{"type":"inlineCode","value":"develop","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"qGvPMIjlKa"},{"type":"text","value":" is recommended; keep release/publish workflows independent.","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"FGyuQHGNQn"}],"key":"STbcHofiGd"}],"key":"qcJGsEyFgc"}],"key":"S3pEMbjBmS"},{"type":"heading","depth":2,"position":{"start":{"line":341,"column":1},"end":{"line":341,"column":1}},"children":[{"type":"text","value":"Success Criteria","position":{"start":{"line":341,"column":1},"end":{"line":341,"column":1}},"key":"iP46LOpaTu"}],"identifier":"success-criteria","label":"Success Criteria","html_id":"success-criteria","implicit":true,"key":"Pd3LbPKAMR"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":343,"column":1},"end":{"line":346,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Local ","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"key":"YXQf6WF0Dw"},{"type":"inlineCode","value":"./dflow ci-verify","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"key":"w2k9r96N9C"},{"type":"text","value":" and ","key":"exWNumC1SF"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"H9AHtaLkpI"}],"key":"eULIQgp356"},{"type":"text","value":" ","key":"bpEjUvlZhk"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"K5jE77NIJB"}],"key":"ad1knZXeGU"},{"type":"text","value":" run identical targets in the same image identity.","key":"Hqg7yLiBqw"}],"key":"KYUfyOMtvh"}],"key":"DAX6wj6T21"},{"type":"listItem","spread":true,"position":{"start":{"line":344,"column":1},"end":{"line":344,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Warm ","key":"mZ7Q81sJSH"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"BXQoNZlkMv"}],"key":"PHJ0cIytLP"},{"type":"text","value":" rerun latency significantly lower than cold runs, with measurable ","key":"gMvrN53ZM4"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":344,"column":1},"end":{"line":344,"column":1}},"key":"Sbak93ucjo"},{"type":"text","value":" and cache hit ratios.","position":{"start":{"line":344,"column":1},"end":{"line":344,"column":1}},"key":"b30M1MRD9V"}],"key":"sJfkSoQQXT"}],"key":"dLMeddkm9f"},{"type":"listItem","spread":true,"position":{"start":{"line":345,"column":1},"end":{"line":345,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Reviewers can identify failure domain immediately from independent check status names.","position":{"start":{"line":345,"column":1},"end":{"line":345,"column":1}},"key":"opMOIVzigK"}],"key":"jlmdDbzv1X"}],"key":"NCaFIe43y1"},{"type":"listItem","spread":true,"position":{"start":{"line":346,"column":1},"end":{"line":346,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Pipeline logic remains modular and centralized in scripts/make targets, not duplicated in YAML.","position":{"start":{"line":346,"column":1},"end":{"line":346,"column":1}},"key":"dDult0URc8"}],"key":"Q27QkzcPUV"}],"key":"hhVLxI2RnR"}],"key":"cMLy5Z3VxL"}],"key":"Q4KnFtpZFw"}],"key":"NXn4cNM6yS"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"v0.1.0 Implementation Execution Plan","url":"/v0-1-0-implementation-execution-plan","group":"06 Roadmap"},"next":{"title":"v0.1.0 Critical Architecture and Implementation Review","url":"/v0-1-0-critical-review","group":"06 Roadmap"}}},"domain":"http://localhost:3000"}