{"version":3,"kind":"Article","sha256":"3e8c37e5cfff3d71e559920d92f2c8fcbb9a302baa19fcb1989b5f6b03e5e9fd","slug":"v0-1-0-ci-container-redesign","location":"/developer-guide/06-roadmap/v0.1.0-ci-container-redesign.md","dependencies":[],"frontmatter":{"title":"v0.1.0 CI/Container Redesign Proposal","label":"devflow.developer-guide.roadmap.v010-ci-container-redesign","content_includes_title":false,"authors":[{"nameParsed":{"literal":"Soft Mentor","given":"Soft","family":"Mentor"},"name":"Soft Mentor","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/softmentor/devflow","abbreviations":{"ADR":"Architecture Decision Record.","API":"Application Programming Interface.","CI":"Continuous Integration.","CLI":"Command Line Interface.","DAG":"Directed Acyclic Graph.","GHCR":"GitHub Container Registry.","PR":"Pull Request."},"numbering":{"title":{"offset":2}},"source_url":"https://github.com/softmentor/devflow/blob/main/docs/developer-guide/06-roadmap/v0.1.0-ci-container-redesign.md","edit_url":"https://github.com/softmentor/devflow/edit/main/docs/developer-guide/06-roadmap/v0.1.0-ci-container-redesign.md","exports":[{"format":"md","filename":"v0.1.0-ci-container-redesign.md","url":"/devflow/build/v0.1.0-ci-container--9f2e03ace8bcadb6461f5b93fc329188.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Purpose","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"wYKOmHAs3T"}],"identifier":"purpose","label":"Purpose","html_id":"purpose","implicit":true,"key":"QQ15SFujFt"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Define a reproducible, modular, and cache-efficient developer/","key":"P11jaseJyZ"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"VDTIqGdgIT"}],"key":"nU3jOeOusK"},{"type":"text","value":" model for the v0.1.0 refactor so local macOS development and GitHub Actions execute the same verification logic with the same container identity.","key":"xw1K0sIZFr"}],"key":"SA0eekMDSH"},{"type":"heading","depth":2,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Executive Summary","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"qBBo3dAkFF"}],"identifier":"executive-summary","label":"Executive Summary","html_id":"executive-summary","implicit":true,"key":"U61QIDbAZ4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep the current fingerprinted ","key":"DuqKLQEnrz"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"tUHgdUVxn8"}],"key":"MsXfTf7lgM"},{"type":"text","value":" image strategy and expand it into a single canonical cache architecture.","key":"mO1AsDsn0a"}],"key":"ofqRzxpJJM"}],"key":"t60SQeL29M"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Use a configurable cache root for local container runs (default: ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"qTFlui5EWp"},{"type":"inlineCode","value":".cargo-cache/","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"gPsXuEKHkF"},{"type":"text","value":") with explicit volume mounts for registry, git, ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"J1eIia6Nb3"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"r0Ua14i15H"},{"type":"text","value":", and target outputs.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"x1qQSRDei8"}],"key":"BTeisCFkWv"}],"key":"ZRsGIgFnkH"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep one source of truth for commands in Make targets and scripts; GitHub Actions should only orchestrate those targets.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"aRAejggWUs"}],"key":"LkR3iX6UJO"}],"key":"dozZjopZOj"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Use ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"flu6P7aYOI"},{"type":"inlineCode","value":"cargo nextest","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"hkhAGvYKho"},{"type":"text","value":" as the default ","key":"EPl7r9kLT1"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"gFQBvK8EG0"}],"key":"BWgEo8ZKkO"},{"type":"text","value":" test runner, with test tiers split by change risk (minimal ","key":"G50PcsOYrt"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"yrXuFzSqHD"}],"key":"dGXhKnujDG"},{"type":"text","value":" gate vs full verification on push/main).","key":"WOAxqZpaZZ"}],"key":"pfpmXsYyxr"}],"key":"oSxOgT2Mjt"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Preserve granular ","key":"f1v8gGZZDO"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"OBkSnE2Yfv"}],"key":"IaT8tQJgKh"},{"type":"text","value":" visibility (","key":"Ftu8jurBI0"},{"type":"inlineCode","value":"fmt","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"adBdqz0qzT"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"RQffxmC7MM"},{"type":"inlineCode","value":"clippy","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"T1Jv2ixT0o"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"gAN9upeniz"},{"type":"inlineCode","value":"compile","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"H3Ag29RdWI"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"xkFG9YajzJ"},{"type":"inlineCode","value":"test","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"LwjsZ4Bi6X"},{"type":"text","value":", ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"LzkPNTW2tf"},{"type":"inlineCode","value":"smoke","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"ul55ED87fp"},{"type":"text","value":") as separate required checks.","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"D868qrJA0Z"}],"key":"prnmG4ZQWM"}],"key":"fWMUaoGpxY"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"DdqvrIZjUg"},{"type":"inlineCode","value":"build","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"QKCu0nS3gX"},{"type":"text","value":" and ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"VbmYqYLpiR"},{"type":"inlineCode","value":"verify","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"Kuf7zdRgAU"},{"type":"text","value":" execution inside the containerized ","key":"Fa6nWjlBnL"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"BduG8DRkax"}],"key":"nmcOfG70nT"},{"type":"text","value":" image to preserve environment parity with local repro.","key":"vSPRA1Fm1q"}],"key":"OPUfNhZcVC"}],"key":"CSBbxNBhO1"}],"key":"Nb7rn782b4"},{"type":"heading","depth":2,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Current-State Evaluation","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"cxFSKFBbGl"}],"identifier":"current-state-evaluation","label":"Current-State Evaluation","html_id":"current-state-evaluation","implicit":true,"key":"RkGrwqyyAS"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"This repository already has strong foundations:","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"aYbn03fpQy"}],"key":"kYTDHZf7Rt"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":25,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Content-addressed image fingerprinting (","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"ZzgwqLl9CN"},{"type":"inlineCode","value":"Dockerfile","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"pRaeWBeaGe"},{"type":"text","value":" hash) and ","key":"Q0JBR9t5cA"},{"type":"abbreviation","title":"GitHub Container Registry.","children":[{"type":"text","value":"GHCR","key":"ske9sdvqFC"}],"key":"GAF1zitVLH"},{"type":"text","value":"-backed ","key":"aTqBs0P7jX"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"WwFEwjp93H"}],"key":"K3YO18h4Ht"},{"type":"text","value":" image identity.","key":"OVZ7ZuOF7N"}],"key":"dbMwxB2cm9"}],"key":"vMQ5Guc0jc"},{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Containerized local reproducibility via ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"gDiiAtlDD8"},{"type":"inlineCode","value":"./dflow ci-verify","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"a0f24wjykZ"},{"type":"text","value":".","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"iY2Rupmtm1"}],"key":"OFwBgjqvDk"}],"key":"abvCbgO2gu"},{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Shared cache directories for containerized runs: ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"inZxJCW6nZ"},{"type":"inlineCode","value":".cargo-cache/{registry,git,sccache}","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"G0L4eDSrKL"},{"type":"text","value":" and ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"eC3hVXA7lB"},{"type":"inlineCode","value":"target/ci","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"qZ29l5Nz3X"},{"type":"text","value":".","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"gitCpN3eTa"}],"key":"H1n4IuezSv"}],"key":"IbNLdGMlWa"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"nextest","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"j8ZnLwVxDy"},{"type":"text","value":" already used in ","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"qJLs6yBYyb"},{"type":"inlineCode","value":"test-ci","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"ePPIVNJ4oJ"},{"type":"text","value":".","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"O2nYRNlUsW"}],"key":"otHsNiqUMI"}],"key":"L99cu7mCRy"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Granular status reporting via ","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"rHdHu7jdVc"},{"type":"inlineCode","value":"gh-check-wrapper.sh","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"BUu7e9cAWt"},{"type":"text","value":".","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"L3ae1GCEj7"}],"key":"hO5TJEzKtk"}],"key":"IGVvs1rOpZ"}],"key":"drtCTbbVWE"},{"type":"paragraph","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Primary gaps to address for v0.1.0:","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"xtAyEZEqte"}],"key":"F7kyL2bHGY"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":33,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Fingerprint scope drift: docs/scripts currently state broader fingerprint inputs, while ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"KrsrbJHDqm"},{"type":"inlineCode","value":"vars.mk","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"fTJ0fKwG2f"},{"type":"text","value":" hashes only ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"a09irPw7nD"},{"type":"inlineCode","value":"Dockerfile","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"PhCpuqziZa"},{"type":"text","value":".","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"rDGJqZdXjl"}],"key":"yOonC55uBZ"}],"key":"aDFlIkRP67"},{"type":"listItem","spread":true,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cache root is not fully standardized/configurable as one top-level contract for local + ","key":"DplzyUap4m"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"ysD5qXsVxw"}],"key":"BGhMA9LceR"},{"type":"text","value":".","key":"kzZU1ZtLjJ"}],"key":"Z2YzOkyBf9"}],"key":"Ku0FABb4LT"},{"type":"listItem","spread":true,"position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"fshfsuzqjj"}],"key":"YlBYG65sjm"},{"type":"text","value":" check topology is efficient but still tightly coupled to shell backgrounding in one step; explicit check job contracts can improve maintainability.","key":"b9XXSIKKUs"}],"key":"Z9zSRT1bfz"}],"key":"zln75j9n9c"},{"type":"listItem","spread":true,"position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"B4hz4350A7"}],"key":"Sd4Pwq5fIE"},{"type":"text","value":" gating tiers are not explicitly documented as “minimal gate” vs “full verification”.","key":"aLsolW8uPF"}],"key":"x3fczcwtUA"}],"key":"OBU1Tm4mmg"},{"type":"listItem","spread":true,"position":{"start":{"line":37,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The design is highly optimized for this Rust repository but is not yet framed as a reusable cross-stack platform.","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"JXpBNrQNk5"}],"key":"rn0FCqEuB7"}],"key":"CHYHenK6tI"}],"key":"D95VpQa6V7"},{"type":"heading","depth":2,"position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"text","value":"Target Design","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"cTvBS1NP9r"}],"identifier":"target-design","label":"Target Design","html_id":"target-design","implicit":true,"key":"f1ANtQ9830"},{"type":"heading","depth":3,"position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"1) Canonical Build Identity","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"Tg5viPA4dT"}],"identifier":"id-1-canonical-build-identity","label":"1) Canonical Build Identity","html_id":"id-1-canonical-build-identity","implicit":true,"key":"y7lQSBP4VD"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":43,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep image fingerprinting as the environment identity key.","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"eBVMEcidSO"}],"key":"nTKrcGxemy"}],"key":"GG5DtffUUp"},{"type":"listItem","spread":true,"position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Expand fingerprint inputs to match policy: ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"KpaNSQVKyX"},{"type":"inlineCode","value":"Dockerfile","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"xDFi1BsWQJ"},{"type":"text","value":", ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"agXaXqwJh7"},{"type":"inlineCode","value":"Makefile","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"CP4vIOHOQ6"},{"type":"text","value":", ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"zG3LgUPmnK"},{"type":"inlineCode","value":"install.sh","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"r7kgZTR8kY"},{"type":"text","value":", ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"VJA0hb4rj8"},{"type":"inlineCode","value":"src-scripts/**","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"q9btM25Nhw"},{"type":"text","value":", and ","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"AlHwxQOOhF"},{"type":"inlineCode","value":"rust-toolchain.toml","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"eriT6A0XrT"},{"type":"text","value":".","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"rNyPZUYRhd"}],"key":"ksR7r0gjdC"}],"key":"vHeJqtBtNu"},{"type":"listItem","spread":true,"position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Publish ","key":"xjmGLrM8vH"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"vvWxh8oZhM"}],"key":"YnQEwuqQCM"},{"type":"text","value":" image as ","key":"oj6euWsa3X"},{"type":"inlineCode","value":"ghcr.io/<repo>-ci:<fingerprint>","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"BBUnMGsKdu"},{"type":"text","value":" and keep ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"AP2kP18KDP"},{"type":"inlineCode","value":":latest","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"QTXFqUOzYp"},{"type":"text","value":" as convenience only.","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"uSDdHHZMWk"}],"key":"MdYrXjPEAU"}],"key":"Enbv4SuDaK"},{"type":"listItem","spread":true,"position":{"start":{"line":46,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Use immutable digest pinning in ","key":"BLsl4su3mY"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"kZnkbRLhiC"}],"key":"sOiTCAN5qc"},{"type":"text","value":" job container declarations when practical.","key":"XSXYjEBJ50"}],"key":"ws13fih2Hy"}],"key":"AexS6P2hq1"}],"key":"nTibTfnkii"},{"type":"heading","depth":3,"position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"text","value":"2) Unified Cache Contract","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"dVVj9mMUJv"}],"identifier":"id-2-unified-cache-contract","label":"2) Unified Cache Contract","html_id":"id-2-unified-cache-contract","implicit":true,"key":"EIYtuM6eJD"},{"type":"paragraph","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"text","value":"Define one configurable cache root:","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"TjucMqUoom"}],"key":"WlInoTA0ra"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":52,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"G4KFBlu0p9"},{"type":"text","value":" (default ","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"Uy82vSiI8J"},{"type":"inlineCode","value":".cargo-cache","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"KsxFK1tjnZ"},{"type":"text","value":")","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"EVQMdm3mGe"}],"key":"P61U276xD8"}],"key":"DVi56sLgWh"},{"type":"listItem","spread":true,"position":{"start":{"line":53,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Subdirs:","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"bTyBbgE1Po"}],"key":"MtPtpXUazr"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":54,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/registry","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"wfh8jTn7WZ"}],"key":"wZ69yj6Knt"}],"key":"xcRbmeRo2j"},{"type":"listItem","spread":true,"position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/git","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"vRiLMSY3mC"}],"key":"fc9aKu1B3C"}],"key":"jCKK91PtaL"},{"type":"listItem","spread":true,"position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/sccache","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"PjxIJA5908"}],"key":"RzQLVsEq19"}],"key":"g0doXwjJd9"},{"type":"listItem","spread":true,"position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/target-ci","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"hz8H2MOQNo"}],"key":"xqDiSOnYCF"}],"key":"eC7gZBPHkf"},{"type":"listItem","spread":true,"position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/image-tar","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"E3oeulwW1i"}],"key":"ZWiyJlxat1"}],"key":"HaxDPp0zih"},{"type":"listItem","spread":true,"position":{"start":{"line":59,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"${KROKI_CACHE_ROOT}/buildx","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"zJyU0pKdOj"}],"key":"jKg5nlijcs"}],"key":"mJStapYNW6"}],"key":"eZMr5wlEaC"}],"key":"lzejHmrK48"}],"key":"XCpbkf9cTu"},{"type":"paragraph","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"text","value":"Local container mounts:","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"sZYO80Eu6v"}],"key":"FtyTNYi1zX"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":63,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cargo registry/git -> mounted from ","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"LYkfEwN22L"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"D6klMHqlHw"},{"type":"text","value":".","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"Teo10kpnA3"}],"key":"Ivsjx4lNFJ"}],"key":"qDy1bR5zTL"},{"type":"listItem","spread":true,"position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"SCCACHE_DIR","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"NWo3jGaDsF"},{"type":"text","value":" -> mounted from ","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"bNOkoNMnnW"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT/sccache","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"a0HH5bMHxW"},{"type":"text","value":".","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"mB0iFCtred"}],"key":"TI53DR2Lm5"}],"key":"rb6PO6io78"},{"type":"listItem","spread":true,"position":{"start":{"line":65,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"CARGO_TARGET_DIR","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"m7ho4g0Mgc"},{"type":"text","value":" -> mounted from ","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"Ff24sGg0ai"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT/target-ci","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"ePIMfHlJJC"},{"type":"text","value":".","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"zYRH0FmH0w"}],"key":"BqafKNGIQU"}],"key":"c1hJGh89Ih"}],"key":"Vf8rXYmCev"},{"type":"paragraph","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"text","value":"Guidance:","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"key":"GxuvjVawGQ"}],"key":"bXDhGB9F4i"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":69,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Do not mount host ","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"z3wrR6Rj8d"},{"type":"inlineCode","value":"~/.cargo","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"wTUL9JEhPS"},{"type":"text","value":" directly by default; use project-scoped cache roots for reproducibility and isolation.","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"KDV72NUgi6"}],"key":"EmSNF1EhHo"}],"key":"Xj3ZJpgkL8"},{"type":"listItem","spread":true,"position":{"start":{"line":70,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep target caches scoped by Rust version + fingerprint + feature set to avoid artifact poisoning.","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"K8PRHkgvHr"}],"key":"TZkRi6g1ZB"}],"key":"XApEAZEYgr"}],"key":"acHdr4Qlrp"},{"type":"paragraph","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"children":[{"type":"text","value":"Environment nuance impact:","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"key":"KDjTjGELQz"}],"key":"MmVPYnIfQQ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":74,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"A standardized cache root does not remove environment-specific capability differences (kernel, filesystem semantics, CPU arch, cgroup limits, sandboxing).","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"HJ661bf1Sp"}],"key":"Jxduoi9mkk"}],"key":"oTrCTE08fj"},{"type":"listItem","spread":true,"position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The container image and run flags define behavior parity; the cache root only standardizes persisted artifacts and speeds reruns.","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"Wzhlk0cvJ7"}],"key":"muPz3KV9t5"}],"key":"OJS31fgXW3"},{"type":"listItem","spread":true,"position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cache key dimensions should include ","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"OucdWvsIIG"},{"type":"inlineCode","value":"os/arch","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"DiXqS6gM3p"},{"type":"text","value":" and runtime profile (for example Linux amd64 container vs local native macOS) to avoid cross-environment contamination.","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"roBbGH69vw"}],"key":"Gag5ZWOAq5"}],"key":"lhOMYF3Gth"},{"type":"listItem","spread":true,"position":{"start":{"line":77,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"For deterministic ","key":"MIrlxlSXLQ"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"cqwBo4XJmJ"}],"key":"hVz0rJlM22"},{"type":"text","value":", treat cache as an optimization only; correctness must not depend on cache hits.","key":"nbzFRAEV8w"}],"key":"DeMCSdFDsx"}],"key":"wIkU2ujPAm"}],"key":"VwnFrX39xx"},{"type":"heading","depth":3,"position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"text","value":"3) GitHub Actions Cache Layers","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"ywsVA8GsI9"}],"identifier":"id-3-github-actions-cache-layers","label":"3) GitHub Actions Cache Layers","html_id":"id-3-github-actions-cache-layers","implicit":true,"key":"j0htE8gfHU"},{"type":"paragraph","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"text","value":"Use layered caching, ordered by ROI:","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"HA0uchL2LV"}],"key":"WjJ4z3lpm5"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":83,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"TSVJrzAal6"}],"key":"bf8QhmGlQA"},{"type":"text","value":" image reuse from ","key":"vq5HIQix0j"},{"type":"abbreviation","title":"GitHub Container Registry.","children":[{"type":"text","value":"GHCR","key":"Lo2TMWuyq7"}],"key":"N4pYOlwP9o"},{"type":"text","value":" by fingerprint.","key":"DBCDrTYbYP"}],"key":"I78nTDEdGN"}],"key":"FlHQEBAvXi"},{"type":"listItem","spread":true,"position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Optional image tar cache (","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"kj0bZv1VjB"},{"type":"inlineCode","value":"actions/cache","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"BBCIIYNH80"},{"type":"text","value":") for fast same-runner restore.","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"DFA0aaSqrF"}],"key":"spuL5z2RVm"}],"key":"IO3H9UJp2p"},{"type":"listItem","spread":true,"position":{"start":{"line":85,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cargo + sccache cache (","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"OskdK39uyv"},{"type":"inlineCode","value":"registry","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"dE2hwbK6yi"},{"type":"text","value":", ","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"hsebdriXRz"},{"type":"inlineCode","value":"git","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"Wf10zggO1N"},{"type":"text","value":", ","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"qFDjNvE1yT"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"Ru3RYw4tMX"},{"type":"text","value":", ","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"eNnKrQsmro"},{"type":"inlineCode","value":"target-ci","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"szAmaNK5P0"},{"type":"text","value":") keyed by:","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"MM0QWZTXyU"}],"key":"VAXktVtAGx"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":86,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"runner.os","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"HzDc7aeON6"}],"key":"PCGbD7CPVE"}],"key":"M0edepEDe9"},{"type":"listItem","spread":true,"position":{"start":{"line":87,"column":1},"end":{"line":87,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"image fingerprint","position":{"start":{"line":87,"column":1},"end":{"line":87,"column":1}},"key":"txl0ihNqLv"}],"key":"gBcWIMibkx"}],"key":"zCsgHjwpAZ"},{"type":"listItem","spread":true,"position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"hash(Cargo.lock, rust-toolchain.toml)","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"key":"OkryyNk0P8"}],"key":"bh7VcYQHd9"}],"key":"pQknlFnO3N"},{"type":"listItem","spread":true,"position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cargo feature mode (for example ","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"JShJYyqNN5"},{"type":"inlineCode","value":"native-browser","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"pShGwLEaLN"},{"type":"text","value":" vs lean)","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"bGrmTp99V6"}],"key":"b3ELVpVX4s"}],"key":"bqw3IlYlpJ"}],"key":"plfC99AB3Y"}],"key":"QKlMjqCccd"},{"type":"listItem","spread":true,"position":{"start":{"line":90,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"BuildKit cache for image builds (","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"kZImb1tFSY"},{"type":"inlineCode","value":"cache-from/cache-to","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"MrUbSqHJJn"},{"type":"text","value":" gha, optionally registry cache manifest).","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"pDdc1kIEUN"}],"key":"lq26MKycHI"}],"key":"z8bmi0qPLr"}],"key":"FlsbX2RRxA"},{"type":"heading","depth":3,"position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"children":[{"type":"text","value":"4) Workflow Modularity and Check Visibility","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"key":"atcpdgXnsu"}],"identifier":"id-4-workflow-modularity-and-check-visibility","label":"4) Workflow Modularity and Check Visibility","html_id":"id-4-workflow-modularity-and-check-visibility","implicit":true,"key":"u59NsNHAxo"},{"type":"paragraph","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"text","value":"Single ","key":"GXUlBF2QOu"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"a9GlAz2J1L"}],"key":"hh06iTUsbC"},{"type":"text","value":" workflow file (","key":"dfNQ8b2CcN"},{"type":"inlineCode","value":".github/workflows/ci.yml","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"xqZIKEjsrd"},{"type":"text","value":") for ","key":"oC20HbMJbN"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"G0s38Jc5OQ"}],"key":"s8m7ycotm7"},{"type":"text","value":"/push on ","key":"nU885x8aXg"},{"type":"inlineCode","value":"main","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"UR2kuofzKm"},{"type":"text","value":" and ","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"qnfyZkY1R4"},{"type":"inlineCode","value":"develop","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"g6rEW1DWIM"},{"type":"text","value":".","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"ITib5iMoyd"}],"key":"r1z7fG556q"},{"type":"paragraph","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"children":[{"type":"text","value":"Job topology:","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"key":"xIHNf5CZlg"}],"key":"Pc0WLChxGy"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":98,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"prep","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"sveyRvENBc"},{"type":"text","value":": resolve fingerprint + image, restore image tar cache, emit outputs (runner job, no compile/test logic).","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"jIzYeeiB2k"}],"key":"zRzGWjT5H3"}],"key":"pHo8GASGVN"},{"type":"listItem","spread":true,"position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"build","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"AMyHnBi2zv"},{"type":"text","value":": compile once (","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"JAvXP1pEsj"},{"type":"inlineCode","value":"make build-ci","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"U3kwB9dreT"},{"type":"text","value":") and save cargo/sccache cache (","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"nd8OKu6Mgp"},{"type":"strong","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"text","value":"runs inside the ","key":"uc08VHXFDh"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"ha0YxNA3nb"}],"key":"Nm4NLdROXK"},{"type":"text","value":" container image","key":"RYlJ7ZOx1z"}],"key":"EibWfwIzoG"},{"type":"text","value":").","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"Bpg2HZZB2u"}],"key":"GqWuqKOxCG"}],"key":"CJxKwTNRyf"},{"type":"listItem","spread":true,"position":{"start":{"line":100,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Parallel verify jobs (granular reviewer visibility):","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"key":"Bp6jMfBZXf"}],"key":"WR4dbCQD4n"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":101,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"fmt","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"UW1iiNcdPP"},{"type":"text","value":" -> ","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"yISWNoddnK"},{"type":"inlineCode","value":"make fmt-check","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"sMW5VbFjLd"},{"type":"text","value":" (or ","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"OtCOeYONjU"},{"type":"inlineCode","value":"cargo fmt --check","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"llTSzZqmhq"},{"type":"text","value":")","position":{"start":{"line":101,"column":1},"end":{"line":101,"column":1}},"key":"r4sQdQcZzU"}],"key":"tvI9Y4rNfn"}],"key":"qS15wVn8ce"},{"type":"listItem","spread":true,"position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"clippy","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"p67yG2vIX1"},{"type":"text","value":" -> ","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"b8q7iRjxoK"},{"type":"inlineCode","value":"make lint-clippy","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"eF0MU5jzxl"}],"key":"tmyEJR7uvo"}],"key":"dN1h8hGwVd"},{"type":"listItem","spread":true,"position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"test","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"kgURKfOyRr"},{"type":"text","value":" -> ","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"lAykewPgJ5"},{"type":"inlineCode","value":"make test-ci","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"NihSFyZbtR"},{"type":"text","value":" (","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"wRxH4dpRBy"},{"type":"inlineCode","value":"cargo nextest run","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"KwBeHEOy1i"},{"type":"text","value":")","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"p4LRqqNmH7"}],"key":"zJdwnyO89Y"}],"key":"NiaU3zhazh"},{"type":"listItem","spread":true,"position":{"start":{"line":104,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"smoke","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"EmqTNVBrE0"},{"type":"text","value":" -> ","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"l4pLevzdn2"},{"type":"inlineCode","value":"make smoke-test","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"tesBUMZcsp"}],"key":"JsSA18i0rp"}],"key":"ied2gtOgev"}],"key":"yy3axsPEHN"}],"key":"CPj4Hddb3H"}],"key":"nt9I6p0h52"},{"type":"paragraph","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"children":[{"type":"text","value":"All verify jobs:","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"key":"iI0S0Z2cx1"}],"key":"YtdHGBmlgh"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":108,"column":1},"end":{"line":111,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Run in the same fingerprinted ","key":"mrSavUiIAG"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"Q3Zohf97mu"}],"key":"pmo7nU1kGI"},{"type":"text","value":" container image as ","key":"v8GYxnYluB"},{"type":"inlineCode","value":"build","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"twdZX78Iud"},{"type":"text","value":".","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"lD5Z5AjyGu"}],"key":"twjotiEw7t"}],"key":"eOmMGuGbOe"},{"type":"listItem","spread":true,"position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Restore caches read-only.","position":{"start":{"line":109,"column":1},"end":{"line":109,"column":1}},"key":"sdT8q8hB6x"}],"key":"A5sl9J71Se"}],"key":"tE01Hfjnsm"},{"type":"listItem","spread":true,"position":{"start":{"line":110,"column":1},"end":{"line":111,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Avoid duplicate compilation by relying on warmed cache from ","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"J4bL512tXG"},{"type":"inlineCode","value":"build","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"xmmb7DXvNy"},{"type":"text","value":".","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"ZVU2lexz8S"}],"key":"I3xg6wZQvE"}],"key":"yEXrJGa0D1"}],"key":"fo753xIQyY"},{"type":"heading","depth":3,"position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"children":[{"type":"text","value":"5) Test Tiering Policy","position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"key":"gPxuHHjC3B"}],"identifier":"id-5-test-tiering-policy","label":"5) Test Tiering Policy","html_id":"id-5-test-tiering-policy","implicit":true,"key":"ytuvDHEhqu"},{"type":"paragraph","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"children":[{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"I9iQugSCb0"}],"key":"hqCDGUDLvp"},{"type":"text","value":" minimal gate:","key":"qxSrM2jwm8"}],"key":"CpVTDCihkj"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":116,"column":1},"end":{"line":117,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":116,"column":1},"end":{"line":117,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"fmt","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"vYp2ny2Q0i"},{"type":"text","value":", ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"IR1hoQe7bR"},{"type":"inlineCode","value":"clippy","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"Lfq5ECm2Wm"},{"type":"text","value":", ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"dtKhadTmG2"},{"type":"inlineCode","value":"build-ci","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"brV5ZDVPUY"},{"type":"text","value":", ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"vFlNyoYi6j"},{"type":"inlineCode","value":"nextest","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"aweGg5Fe3L"},{"type":"text","value":" (default profile), ","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"jXG0b0r9US"},{"type":"inlineCode","value":"smoke","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"j06uHqjPW8"},{"type":"text","value":".","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"kDZoGztPVq"}],"key":"d4KxIvgkD9"}],"key":"QOkov55nPu"}],"key":"okPQ3uxYId"},{"type":"paragraph","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"children":[{"type":"text","value":"Push to ","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"NDGOQG647V"},{"type":"inlineCode","value":"main/develop","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"dQemSPvXHA"},{"type":"text","value":" full verification:","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"xWOzodDt1o"}],"key":"UPogkGJnhW"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":120,"column":1},"end":{"line":121,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":120,"column":1},"end":{"line":121,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Includes security/load/integration-heavy suites and packaging validation.","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"FiNaUxr2Gu"}],"key":"GZgXdE0wEi"}],"key":"KGIHl2JTcA"}],"key":"cxT5XdcTou"},{"type":"paragraph","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"children":[{"type":"text","value":"Implementation note:","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"h5cYyOd5MO"}],"key":"M5ePnRefEY"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":124,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":124,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Encode tiers as explicit make targets (","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"Fy3jlCkGwg"},{"type":"inlineCode","value":"test-pr","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"nzWjgFDLQt"},{"type":"text","value":", ","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"KiCcN1oeZN"},{"type":"inlineCode","value":"test-full","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"lttgfJImq8"},{"type":"text","value":") to keep local and ","key":"w8Dp9CWhwu"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"s7io0fSTiM"}],"key":"cIRv1RXops"},{"type":"text","value":" behavior identical.","key":"nm1JzUR74t"}],"key":"wR45WTrSEP"}],"key":"yxSvV4ze4d"}],"key":"LVrxQ1b3Tu"},{"type":"heading","depth":3,"position":{"start":{"line":126,"column":1},"end":{"line":126,"column":1}},"children":[{"type":"text","value":"6) Local/","key":"GPV0Pral8k"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"QFRZkKnThK"}],"key":"zgzPx4qR5Q"},{"type":"text","value":" Command Parity","key":"ryG4rjo2aU"}],"identifier":"id-6-local-ci-command-parity","label":"6) Local/CI Command Parity","html_id":"id-6-local-ci-command-parity","implicit":true,"key":"Dg1bM8ZjhA"},{"type":"paragraph","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"children":[{"type":"text","value":"Entrypoints:","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"g0S2ozxUmR"}],"key":"dknoVahuPo"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":130,"column":1},"end":{"line":132,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Local: ","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"key":"gi0vtXmtjr"},{"type":"inlineCode","value":"./dflow ci-verify <target>","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"key":"vF8eCMFuLf"}],"key":"FXPPy9t5JK"}],"key":"QXjJZyLbxx"},{"type":"listItem","spread":true,"position":{"start":{"line":131,"column":1},"end":{"line":132,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"NAS7L7SitT"}],"key":"mv0fy2nYut"},{"type":"text","value":": ","key":"v6MmsoyNdS"},{"type":"inlineCode","value":"make <target>","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"zqEekeVZoN"},{"type":"text","value":" from inside container job","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"eZENC8ozgf"}],"key":"v8VUMMFz0m"}],"key":"OFeC9CSukN"}],"key":"KxTrkUtnon"},{"type":"paragraph","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"children":[{"type":"text","value":"Rule:","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"C4ud7Ehbzc"}],"key":"RKXlt4zROu"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":135,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"No business logic in workflow YAML; logic lives in ","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"E0DLdm7aUd"},{"type":"inlineCode","value":"Makefile","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"E0wgIIQlw1"},{"type":"text","value":" and ","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"axTZ7heaYx"},{"type":"inlineCode","value":"src-scripts/","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"G0vyrLwn31"},{"type":"text","value":".","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"pSzWDseHZY"}],"key":"NPnBKmv3SX"}],"key":"nJebVkzz9K"},{"type":"listItem","spread":true,"position":{"start":{"line":136,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"YAML only wires triggers, permissions, cache restore/save, and target invocation.","position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"key":"Vfkd04i3Y0"}],"key":"Th46Gy6Vi6"}],"key":"m0ZGNo8FAy"}],"key":"sRFtlj0mZG"},{"type":"heading","depth":3,"position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"children":[{"type":"text","value":"7) Impact of Multi-Surface Refactor","position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"key":"Ot9jEiHpDi"}],"identifier":"id-7-impact-of-multi-surface-refactor","label":"7) Impact of Multi-Surface Refactor","html_id":"id-7-impact-of-multi-surface-refactor","implicit":true,"key":"lMlYFRNSrq"},{"type":"paragraph","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"children":[{"type":"text","value":"If Kroki-rs adopts the multi-surface architecture (core/interface/transport/adapters), ","key":"Hbq9wInieN"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"lN0z5Dxveg"}],"key":"gMQri5RQqx"},{"type":"text","value":"/container strategy should shift from a single-project pipeline to a contract-oriented workspace pipeline.","key":"RvquQgukJK"}],"key":"cSwC4na0kB"},{"type":"paragraph","position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"children":[{"type":"text","value":"Changes to consider:","position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"key":"RQorRkEKxK"}],"key":"bDS44Z1Rk0"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":144,"column":1},"end":{"line":154,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":144,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Split ","key":"cVwEA3nLsb"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"vX4mCxpmP0"}],"key":"kxrSSsSYSL"},{"type":"text","value":" targets by layer:","key":"KrEa9kG3jo"}],"key":"aZA6q2zCbU"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":145,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"core","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"IUSqfiInQQ"},{"type":"text","value":" (pure Rust, fastest checks)","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"zXqozABbwI"}],"key":"vEjUYXYX5U"}],"key":"BU1UMiDAO5"},{"type":"listItem","spread":true,"position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"interface/contracts","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"key":"XREamqwIYw"},{"type":"text","value":" (schema compatibility checks)","position":{"start":{"line":146,"column":1},"end":{"line":146,"column":1}},"key":"yIx6wiaCLM"}],"key":"AZDTRrjP1w"}],"key":"V6nyfEuOpk"},{"type":"listItem","spread":true,"position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"transport/adapters","position":{"start":{"line":147,"column":1},"end":{"line":147,"column":1}},"key":"J3mMssUIwJ"},{"type":"text","value":" (HTTP, ","key":"AXxvKAuXec"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"XHTtAgExsE"}],"key":"hEbr5IdQd7"},{"type":"text","value":", plugin integration checks)","key":"Qt5xmLmXz6"}],"key":"WEvR3t5BJg"}],"key":"HnPIyV6Pov"}],"key":"g2zg5Ko4k0"}],"key":"tPGEk3OVUx"},{"type":"listItem","spread":true,"position":{"start":{"line":148,"column":1},"end":{"line":151,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add contract compatibility gates:","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"key":"fOKUMDfRTr"}],"key":"fTEkubLs1o"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":149,"column":1},"end":{"line":151,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"schema diff checks","position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"key":"jwq4SVi6Wm"}],"key":"hSi0ZyLVEC"}],"key":"MLDzbcBFJ0"},{"type":"listItem","spread":true,"position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"backward-compatibility policy enforcement","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"key":"U7zn2mKUjK"}],"key":"dclxioWITf"}],"key":"AhA0keWtmq"},{"type":"listItem","spread":true,"position":{"start":{"line":151,"column":1},"end":{"line":151,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"generated type/","key":"NUY2vP28bQ"},{"type":"abbreviation","title":"Application Programming Interface.","children":[{"type":"text","value":"API","key":"ROTDKkbyZ2"}],"key":"Ez5SRCCV86"},{"type":"text","value":" conformance tests","key":"dCWKwJIXJm"}],"key":"xcrgU44apw"}],"key":"znR0y5z8Ue"}],"key":"Be7XZksroA"}],"key":"bVJiddUYae"},{"type":"listItem","spread":true,"position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Partition caches by crate group and feature profile to avoid unnecessary invalidation.","position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"key":"PX3n9z84K2"}],"key":"Tg69c3ofeS"}],"key":"kCfJIoLfgB"},{"type":"listItem","spread":true,"position":{"start":{"line":153,"column":1},"end":{"line":154,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep one shared base ","key":"BQgLXHqurf"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"rBbOOE8a4o"}],"key":"q2ijfEIWKV"},{"type":"text","value":" image, but allow optional adapter extension images for stack-specific dependencies.","key":"fYPu5ZHqDb"}],"key":"H465zwzvym"}],"key":"sbxfucehle"}],"key":"IqFdCVyjTJ"},{"type":"heading","depth":3,"position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"children":[{"type":"text","value":"8) Generic Platform Model (Beyond This Repo)","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"key":"MAxkVkHZcq"}],"identifier":"id-8-generic-platform-model-beyond-this-repo","label":"8) Generic Platform Model (Beyond This Repo)","html_id":"id-8-generic-platform-model-beyond-this-repo","implicit":true,"key":"JQOxJTwxse"},{"type":"paragraph","position":{"start":{"line":157,"column":1},"end":{"line":157,"column":1}},"children":[{"type":"text","value":"This proposal can be generalized into a reusable ","key":"Eb7YbDkBQ5"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"FAauZD4vYh"}],"key":"PpxHE1vh3Q"},{"type":"text","value":"/dev orchestration model with stack extensions.","key":"MoNv1qnwFd"}],"key":"SDoe5LXLHG"},{"type":"paragraph","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"children":[{"type":"text","value":"Platform core (generic):","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"key":"bcRWuPhzIW"}],"key":"ml3Zq5zsUh"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":161,"column":1},"end":{"line":166,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":161,"column":1},"end":{"line":161,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Fingerprinted container identity","position":{"start":{"line":161,"column":1},"end":{"line":161,"column":1}},"key":"Tl8czBt7QJ"}],"key":"jss8FzLI9y"}],"key":"lIlf0qwBfd"},{"type":"listItem","spread":true,"position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Standard cache root contract","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"VAQdXzuZrj"}],"key":"F4E2Mdq7Qk"}],"key":"Z5FQn27g5T"},{"type":"listItem","spread":true,"position":{"start":{"line":163,"column":1},"end":{"line":163,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Canonical command graph (setup/build/lint/test/package/release)","position":{"start":{"line":163,"column":1},"end":{"line":163,"column":1}},"key":"UL0Q4CUNUR"}],"key":"yZbwa4WSG5"}],"key":"joa4CySL1g"},{"type":"listItem","spread":true,"position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Provider-agnostic check reporting and status mapping","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"key":"nslZT6Rzj6"}],"key":"nz4OxFmjVG"}],"key":"rUvGp65QHv"},{"type":"listItem","spread":true,"position":{"start":{"line":165,"column":1},"end":{"line":166,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Policy engine for ","key":"SIEJHURxIG"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"n8hKjDxAP2"}],"key":"ng1bp4EyCS"},{"type":"text","value":" gate tiers and branch protection contracts","key":"hcjT13ydnT"}],"key":"CWZQLPSqkW"}],"key":"R25WvMM4TT"}],"key":"t38deYwTLT"},{"type":"paragraph","position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"children":[{"type":"text","value":"Stack extensions (examples):","position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"key":"SRCUohLtCw"}],"key":"baRfFh1MBW"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":169,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":169,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Rust:","position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"key":"I0SznwYzeq"}],"key":"Op14grRqaD"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":170,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"cargo","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"pX2IHDVpTp"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"zWUhpPjk0H"},{"type":"inlineCode","value":"nextest","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"YWjpU9tpM2"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"E6e3Ann4xU"},{"type":"inlineCode","value":"clippy","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"HrvuM89eJP"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"etrF3MIyMX"},{"type":"inlineCode","value":"rustfmt","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"UPoOd0XSF2"},{"type":"text","value":", ","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"h7xpBubplo"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"WQkXmglau0"}],"key":"A2qf9zbubh"}],"key":"Xc0urv4w8h"},{"type":"listItem","spread":true,"position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"optional workspace-aware cache slicing by crate","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"key":"TWvWQzHwBC"}],"key":"Ye6i0loHmp"}],"key":"GOdzzmBSO6"}],"key":"EyYjKgPbFI"}],"key":"AcfDLSTHqP"},{"type":"listItem","spread":true,"position":{"start":{"line":172,"column":1},"end":{"line":174,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Node.js/TypeScript:","position":{"start":{"line":172,"column":1},"end":{"line":172,"column":1}},"key":"TuNCnNvWCA"}],"key":"aCRZ5Z1PmZ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":173,"column":1},"end":{"line":174,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"pnpm","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"OXaEKVwmNT"},{"type":"text","value":"/","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"vJ4Vc1BH2P"},{"type":"inlineCode","value":"npm","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"WbDPC98kw4"},{"type":"text","value":" cache, lockfile-aware install, ","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"Gp0dTDldXD"},{"type":"inlineCode","value":"tsc --noEmit","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"eh4VwF8BIl"},{"type":"text","value":", eslint, vitest/jest","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"seG7lEI08S"}],"key":"ri4AUQX5hD"}],"key":"dDHqLNw4az"},{"type":"listItem","spread":true,"position":{"start":{"line":174,"column":1},"end":{"line":174,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cache keys include package manager + lockfile + Node version","position":{"start":{"line":174,"column":1},"end":{"line":174,"column":1}},"key":"x7nbjjdimm"}],"key":"nIBx7fttO7"}],"key":"hgN0PA1Urv"}],"key":"gQ8cc9zGdg"}],"key":"LHNCYJgo8v"},{"type":"listItem","spread":true,"position":{"start":{"line":175,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"React/Lit front-end:","position":{"start":{"line":175,"column":1},"end":{"line":175,"column":1}},"key":"FRVcgZgpJV"}],"key":"fucOb00NIZ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":176,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"build/test/lint plus storybook/e2e extension gates","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"key":"VBLunMpzIS"}],"key":"jzlXxy3StD"}],"key":"FwHC4sHvca"},{"type":"listItem","spread":true,"position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"optional browser test container profile","position":{"start":{"line":177,"column":1},"end":{"line":177,"column":1}},"key":"qmmaOQpojN"}],"key":"Te3DfzlllW"}],"key":"eoZPQqpLRL"}],"key":"ZiHMLTdaan"}],"key":"KE1YYwOdcY"},{"type":"listItem","spread":true,"position":{"start":{"line":178,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"VS Code extension:","position":{"start":{"line":178,"column":1},"end":{"line":178,"column":1}},"key":"J67fp2PGMZ"}],"key":"HLVwFuvy7k"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"vsce","position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"key":"ZwI1UG3aMH"},{"type":"text","value":" packaging, extension host tests, ","key":"hvhlp3Forp"},{"type":"abbreviation","title":"Application Programming Interface.","children":[{"type":"text","value":"API","key":"NhtgZ4ylim"}],"key":"PCG3u7GJfk"},{"type":"text","value":" compatibility checks","key":"PilEf5dk58"}],"key":"XTzpJvo0Rf"}],"key":"xKI7JC4BCR"}],"key":"jwDzNNbbCI"}],"key":"QTZT5HOZWW"},{"type":"listItem","spread":true,"position":{"start":{"line":180,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Tauri:","position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"key":"e5uYhhORNu"}],"key":"RvIH2il8Eb"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":181,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":181,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"host OS dependency profiles, frontend + Rust dual cache strategy, bundling/signing stages","position":{"start":{"line":181,"column":1},"end":{"line":181,"column":1}},"key":"f2opWjtQCv"}],"key":"PqeksCM4pF"}],"key":"wSUheBoy23"}],"key":"I7Y4Bxmgrl"}],"key":"MclglrbSXj"}],"key":"OTvuWdRihQ"},{"type":"paragraph","position":{"start":{"line":183,"column":1},"end":{"line":183,"column":1}},"children":[{"type":"text","value":"Principle:","position":{"start":{"line":183,"column":1},"end":{"line":183,"column":1}},"key":"biR3MWaUnL"}],"key":"iXd0OBBVUx"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":185,"column":1},"end":{"line":186,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":185,"column":1},"end":{"line":186,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep 85-90% behavior in the core orchestrator; implement stack-specific logic as plugins/extensions.","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"key":"JC7eibjDZU"}],"key":"EnliBOzmE8"}],"key":"yUyvINmXLa"}],"key":"GDAH2zQpVd"},{"type":"heading","depth":3,"position":{"start":{"line":187,"column":1},"end":{"line":187,"column":1}},"children":[{"type":"text","value":"9) Generic ","key":"iGbL5Nf2d6"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"tbRivcahD0"}],"key":"WPfT9GaDwr"},{"type":"text","value":" Tool Design (Installable via Homebrew)","key":"WkVhqVIqs9"}],"identifier":"id-9-generic-cli-tool-design-installable-via-homebrew","label":"9) Generic CLI Tool Design (Installable via Homebrew)","html_id":"id-9-generic-cli-tool-design-installable-via-homebrew","implicit":true,"key":"zju0kFaphF"},{"type":"paragraph","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"children":[{"type":"text","value":"Proposed tool concept: a standalone Rust ","key":"EYLdXsawYg"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"ntb37XsUXK"}],"key":"sjUNfuMT1a"},{"type":"text","value":" named ","key":"w503rrtFbb"},{"type":"inlineCode","value":"devflow","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"vgJwj6NguJ"},{"type":"text","value":" (alias ","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"JPnlNpngNt"},{"type":"inlineCode","value":"dwf","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"mZdvlpwjtT"},{"type":"text","value":") that abstracts ","key":"skpxpwOrZw"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"YZvl29G1cq"}],"key":"f94sVZBQpM"},{"type":"text","value":"/container/caching complexity while preserving local developer UX.","key":"UzOmVPIwtP"}],"key":"o2C3Pwuqu9"},{"type":"paragraph","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"children":[{"type":"text","value":"Design goals:","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"key":"jTFrMmQC0I"}],"key":"dDysVlqQIg"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":193,"column":1},"end":{"line":197,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"One command surface across projects (","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"OrFExKhuQP"},{"type":"inlineCode","value":"devflow setup","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"arzdtjpUHs"},{"type":"text","value":", ","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"nnDLEMBGnh"},{"type":"inlineCode","value":"devflow verify","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"ElLS8JsJkY"},{"type":"text","value":", ","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"zgFAjhRyyw"},{"type":"inlineCode","value":"devflow ci plan","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"N6INeFuNir"},{"type":"text","value":", ","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"vEjTaprLuE"},{"type":"inlineCode","value":"devflow release","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"LXRDjqsO0i"},{"type":"text","value":").","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"kZbziZLIFt"}],"key":"Plh58yNqkb"}],"key":"USUdOBejaS"},{"type":"listItem","spread":true,"position":{"start":{"line":194,"column":1},"end":{"line":194,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Project-level config with minimal required fields and optional extensions.","position":{"start":{"line":194,"column":1},"end":{"line":194,"column":1}},"key":"rCdLJHlVD6"}],"key":"KlTTBOl3uj"}],"key":"FSGfMsTLPW"},{"type":"listItem","spread":true,"position":{"start":{"line":195,"column":1},"end":{"line":195,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Deterministic container-first workflows with portable local fallback.","position":{"start":{"line":195,"column":1},"end":{"line":195,"column":1}},"key":"v6JZtMuUAT"}],"key":"vaqRV2FdU6"}],"key":"IwtEDxE9mf"},{"type":"listItem","spread":true,"position":{"start":{"line":196,"column":1},"end":{"line":197,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Native integration with GitHub Actions generation and validation.","position":{"start":{"line":196,"column":1},"end":{"line":196,"column":1}},"key":"umIPLxH04i"}],"key":"QSSDIP8amE"}],"key":"zdxXaCyXZw"}],"key":"sWCK74oSfl"},{"type":"paragraph","position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"children":[{"type":"text","value":"Canonical command interface:","position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"key":"Hs6aZ2QixS"}],"key":"MGwYLTjCdi"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":200,"column":1},"end":{"line":203,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Long form: ","position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"key":"b44zK1CLqc"},{"type":"inlineCode","value":"devflow <command>","position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"key":"MzMTxqM4Ob"}],"key":"ZToFeNEUzs"}],"key":"GcyskrCHcZ"},{"type":"listItem","spread":true,"position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Short alias: ","position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"key":"HN577EZS9E"},{"type":"inlineCode","value":"dwf <command>","position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"key":"vJA635gwwY"}],"key":"q4cIzgZ6oq"}],"key":"wGyejpBPTN"},{"type":"listItem","spread":true,"position":{"start":{"line":202,"column":1},"end":{"line":203,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Examples: ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"OQBR5qUUEi"},{"type":"inlineCode","value":"dwf setup","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"YHp2WpbAT4"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"DPSsrjzDx6"},{"type":"inlineCode","value":"dwf lint","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"TLyNNU6O34"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"G9rOsOOaTJ"},{"type":"inlineCode","value":"dwf test","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"OMNad18LHW"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"M9sF4HyJAB"},{"type":"inlineCode","value":"dwf verify","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"KlZZG72Tjj"},{"type":"text","value":", ","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"GzN84gP1De"},{"type":"inlineCode","value":"dwf ci generate","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"QLM5zSI3WW"}],"key":"wEwCK0Qora"}],"key":"LLwMoxwHXQ"}],"key":"QKFb3IIOTc"},{"type":"paragraph","position":{"start":{"line":204,"column":1},"end":{"line":204,"column":1}},"children":[{"type":"text","value":"High-level architecture:","position":{"start":{"line":204,"column":1},"end":{"line":204,"column":1}},"key":"pCil0IWZqy"}],"key":"qQXuoWSDUN"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":206,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":206,"column":1},"end":{"line":210,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-core","position":{"start":{"line":206,"column":1},"end":{"line":206,"column":1}},"key":"nz3cb1fQin"},{"type":"text","value":":","position":{"start":{"line":206,"column":1},"end":{"line":206,"column":1}},"key":"LI3NtEU8K8"}],"key":"Oz6TW45SKo"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":207,"column":1},"end":{"line":210,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":207,"column":1},"end":{"line":207,"column":1}},"children":[{"type":"paragraph","children":[{"type":"abbreviation","title":"Directed Acyclic Graph.","children":[{"type":"text","value":"DAG","key":"hBkwjilOdt"}],"key":"RD6X3yXodf"},{"type":"text","value":"/task executor","key":"eeJYndLDFM"}],"key":"DaoYtGseEA"}],"key":"X4LMreYOnm"},{"type":"listItem","spread":true,"position":{"start":{"line":208,"column":1},"end":{"line":208,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cache key builder","position":{"start":{"line":208,"column":1},"end":{"line":208,"column":1}},"key":"AI3xpMmW5T"}],"key":"c2meIPXKjB"}],"key":"X3BisOiX1r"},{"type":"listItem","spread":true,"position":{"start":{"line":209,"column":1},"end":{"line":209,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"container resolver (local daemon, ","key":"Qb7Y8Pmtg2"},{"type":"abbreviation","title":"GitHub Container Registry.","children":[{"type":"text","value":"GHCR","key":"rq0ArPiaA5"}],"key":"NH8Bi7cgqk"},{"type":"text","value":")","key":"SBmrgnWOx8"}],"key":"Iee2444NO9"}],"key":"eJiYRv4FqG"},{"type":"listItem","spread":true,"position":{"start":{"line":210,"column":1},"end":{"line":210,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"status/check emitter abstraction","position":{"start":{"line":210,"column":1},"end":{"line":210,"column":1}},"key":"wkwhKpqrij"}],"key":"QC4vzIJt75"}],"key":"vQ3y4U8WuY"}],"key":"sw06AFMSyM"}],"key":"PGRh6kcWqH"},{"type":"listItem","spread":true,"position":{"start":{"line":211,"column":1},"end":{"line":217,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-ext-*","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"cXHqqO0BCr"},{"type":"text","value":":","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"gO5QGZb3v0"}],"key":"u9HddcRFu0"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":212,"column":1},"end":{"line":217,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":212,"column":1},"end":{"line":212,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-rust","position":{"start":{"line":212,"column":1},"end":{"line":212,"column":1}},"key":"WykNdbKpK4"}],"key":"RNWpOWAk7C"}],"key":"zlI2vP4ill"},{"type":"listItem","spread":true,"position":{"start":{"line":213,"column":1},"end":{"line":213,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-node","position":{"start":{"line":213,"column":1},"end":{"line":213,"column":1}},"key":"u2UmvRmJus"}],"key":"Nq6IcwQr2m"}],"key":"kNbBLNTMXp"},{"type":"listItem","spread":true,"position":{"start":{"line":214,"column":1},"end":{"line":214,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-frontend-react","position":{"start":{"line":214,"column":1},"end":{"line":214,"column":1}},"key":"C2sxSWGxCp"}],"key":"wIPLIa0qKX"}],"key":"HhzO5ZfpUW"},{"type":"listItem","spread":true,"position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-frontend-lit","position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"key":"q0sGaDihWv"}],"key":"ii5fgdEfXb"}],"key":"H7sDrzqP2o"},{"type":"listItem","spread":true,"position":{"start":{"line":216,"column":1},"end":{"line":216,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-vscode","position":{"start":{"line":216,"column":1},"end":{"line":216,"column":1}},"key":"oAk9aVRdc2"}],"key":"ysf3u2RlIB"}],"key":"W1DjGcJeSX"},{"type":"listItem","spread":true,"position":{"start":{"line":217,"column":1},"end":{"line":217,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ext-tauri","position":{"start":{"line":217,"column":1},"end":{"line":217,"column":1}},"key":"CbAKUpMYNx"}],"key":"UeyTqYZlfD"}],"key":"lzByMLDOnG"}],"key":"y7fXVx7pZI"}],"key":"XcNn2LIuqC"},{"type":"listItem","spread":true,"position":{"start":{"line":218,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-gh","position":{"start":{"line":218,"column":1},"end":{"line":218,"column":1}},"key":"jCRkaiPzFC"},{"type":"text","value":":","position":{"start":{"line":218,"column":1},"end":{"line":218,"column":1}},"key":"BHAZhgsnYk"}],"key":"Nv9hnAGdwh"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"workflow templating, required-check contract generation, cache strategy synthesis","position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"key":"SPmkSizPGx"}],"key":"R2WpjXQYcr"}],"key":"PRaesHxDvK"}],"key":"JMh7aCYX8O"}],"key":"pVrteCVfes"},{"type":"listItem","spread":true,"position":{"start":{"line":220,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"devflow-policy","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"zsTiJ4J18b"},{"type":"text","value":":","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"chMdzyH6c8"}],"key":"WtWkrK2Pvk"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":221,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":221,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"branch rules, ","key":"qQP3J8nwMG"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"gwJpvoKiPk"}],"key":"wbb3IHoefJ"},{"type":"text","value":" gates, release constraints, environment matrix policy","key":"V0qOQ2gKCY"}],"key":"lm3NhMaQ1R"}],"key":"HyyTsAEK2Q"}],"key":"HkJfT3w7Ga"}],"key":"Elleyuzo02"}],"key":"HvPPhfAuwH"},{"type":"paragraph","position":{"start":{"line":223,"column":1},"end":{"line":223,"column":1}},"children":[{"type":"text","value":"Configuration model (example):","position":{"start":{"line":223,"column":1},"end":{"line":223,"column":1}},"key":"N4v1oSTPGq"}],"key":"NXn2taHYZb"},{"type":"code","lang":"toml","value":"[project]\nname = \"kroki-rs\"\nstack = [\"rust\"]\n\n[container]\nimage = \"ghcr.io/org/repo-ci\"\nfingerprint_inputs = [\"Dockerfile\", \"Makefile\", \"src-scripts/**\", \"rust-toolchain.toml\"]\n\n[cache]\nroot = \".cache/devflow\"\nstrategy = \"layered\"\n\n[targets]\npr = [\"fmt\", \"lint\", \"build\", \"test\"]\nmain = [\"fmt\", \"lint\", \"build\", \"test\", \"smoke\", \"security\"]\n\n[extensions.rust]\nfeatures = [\"native-browser\"]\ntest_runner = \"nextest\"","position":{"start":{"line":225,"column":1},"end":{"line":245,"column":1}},"key":"AGBKPRGIsp"},{"type":"paragraph","position":{"start":{"line":247,"column":1},"end":{"line":247,"column":1}},"children":[{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"KQ0ygq3Ez4"}],"key":"m9t7yr7uj3"},{"type":"text","value":" capabilities:","key":"GT8A2UjtVa"}],"key":"vf2sg0eY0a"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":249,"column":1},"end":{"line":255,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"init","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"oESbl3rSZ1"},{"type":"text","value":": detect stack and scaffold config + make targets + workflow skeleton.","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"IAozlcSBQt"}],"key":"wAMq9RT5Rg"}],"key":"rFH1p5GhRN"},{"type":"listItem","spread":true,"position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"doctor","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"key":"jCXmigU4HG"},{"type":"text","value":": validate container engine, cache root permissions, toolchain drift.","position":{"start":{"line":250,"column":1},"end":{"line":250,"column":1}},"key":"fSBgEYpzB6"}],"key":"hC3VOpnpxH"}],"key":"DK4F0sOMKF"},{"type":"listItem","spread":true,"position":{"start":{"line":251,"column":1},"end":{"line":251,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"verify","position":{"start":{"line":251,"column":1},"end":{"line":251,"column":1}},"key":"pUUT7ac6Dt"},{"type":"text","value":": run the canonical local containerized pipeline.","position":{"start":{"line":251,"column":1},"end":{"line":251,"column":1}},"key":"oQjEeQXFJX"}],"key":"U3XmcQuMWw"}],"key":"onLCXpmkU7"},{"type":"listItem","spread":true,"position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ci generate","position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"key":"DqlPPvtOac"},{"type":"text","value":": generate/update GitHub Actions workflow from config.","position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"key":"K0AZ8NnziJ"}],"key":"sFV4Tg4Qio"}],"key":"teFwj6Dc9H"},{"type":"listItem","spread":true,"position":{"start":{"line":253,"column":1},"end":{"line":253,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"cache stats/prune","position":{"start":{"line":253,"column":1},"end":{"line":253,"column":1}},"key":"At4n3sAtVh"},{"type":"text","value":": inspect and clean cache by scope/age.","position":{"start":{"line":253,"column":1},"end":{"line":253,"column":1}},"key":"vR57bHGrHp"}],"key":"ib2W6KFFeA"}],"key":"dH6CXBP0nV"},{"type":"listItem","spread":true,"position":{"start":{"line":254,"column":1},"end":{"line":255,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"policy check","position":{"start":{"line":254,"column":1},"end":{"line":254,"column":1}},"key":"UtFHd6CZeC"},{"type":"text","value":": ensure repo protections and required checks match config.","position":{"start":{"line":254,"column":1},"end":{"line":254,"column":1}},"key":"M9vpfN03ze"}],"key":"wBUfdoPHpu"}],"key":"jVfSMDh735"}],"key":"RiFDeg0tVL"},{"type":"paragraph","position":{"start":{"line":256,"column":1},"end":{"line":256,"column":1}},"children":[{"type":"text","value":"Canonical command mapping by stack:","position":{"start":{"line":256,"column":1},"end":{"line":256,"column":1}},"key":"zpGPEEQuZN"}],"key":"hrxIUFObUR"},{"type":"table","position":{"start":{"line":258,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Canonical command","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"cEsGictB4u"}],"key":"TgQe6rkdCd"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Rust stack","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"ElPC1qJ27g"}],"key":"chTrVTLa3p"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Node/TypeScript (","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"SrpnHmijJv"},{"type":"inlineCode","value":"pnpm","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"Xq300LcCLm"},{"type":"text","value":")","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"sDsdu6tNr4"}],"key":"x96b7Smw78"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"React/Lit frontend","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"XcK0e1t9n5"}],"key":"wycNdsnk7f"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"VS Code extension","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"bUbZB3nNZi"}],"key":"ahf91Ot1KD"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"children":[{"type":"text","value":"Tauri","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"eXe2yljPiF"}],"key":"fEjIaUvleI"}],"key":"p7FmtymXmx"},{"type":"tableRow","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"dwf setup","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"uo0J495laR"}],"key":"co9aAKVhp8"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"rustup show","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"Sje7HvkCRq"},{"type":"text","value":", toolchain sync, container/image resolve","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"fZl8GRoVi7"}],"key":"NhxR07yX8K"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"pnpm install --frozen-lockfile","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"JaX4Jr7AIA"}],"key":"dc43FszhYH"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"pnpm install --frozen-lockfile","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"pr6byYg3wV"}],"key":"aKiWnVdkg8"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"inlineCode","value":"pnpm install --frozen-lockfile","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"a5ReCmnmhR"}],"key":"m8LDheZXvG"},{"type":"tableCell","align":"left","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"text","value":"Rust + ","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"sRU2u5d9yK"},{"type":"inlineCode","value":"pnpm install","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"x1nLX1RM9q"},{"type":"text","value":" + platform deps check","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"uv6m9MWX8r"}],"key":"OjRBsVMI6a"}],"key":"eX8Z4TkENy"},{"type":"tableRow","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"dwf fmt","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"OBT6wKVf3M"}],"key":"PVPPVTQf4F"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"YVhkyOZKcR"}],"key":"fjJgxwp7qY"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -w .","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"XQuDorfK9W"},{"type":"text","value":" (or repo formatter)","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"k20Q27WRDL"}],"key":"xMI62SadcQ"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -w .","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"W3cyVsRhsR"}],"key":"z9iC9SuA7u"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -w .","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"fICzLq72uP"}],"key":"dGFUdzGyoh"},{"type":"tableCell","align":"left","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"YnbqUOCbDx"},{"type":"text","value":" + frontend formatter","position":{"start":{"line":261,"column":1},"end":{"line":261,"column":1}},"key":"FgMYqbQOC9"}],"key":"uxBaak9QBe"}],"key":"n3CQOlrhMQ"},{"type":"tableRow","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"dwf fmt-check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"Swhr03PLzr"}],"key":"toim4bWKeJ"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all -- --check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"a2iuDzFR02"}],"key":"hB5oFhNG63"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -c .","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"HeReEAV4c8"}],"key":"hRVBB0vDoo"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -c .","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"ldcNKA40Ux"}],"key":"fOtzB7i5Vp"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"pnpm prettier -c .","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"u6llMZV4Wj"}],"key":"xeP8cBAJgf"},{"type":"tableCell","align":"left","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"inlineCode","value":"cargo fmt --all -- --check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"lYb4spgHtU"},{"type":"text","value":" + frontend fmt check","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"PMrksaZzTx"}],"key":"z7m1mjYdl5"}],"key":"GIXoZVVNdk"},{"type":"tableRow","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"dwf lint","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"WvhcoUhmcg"}],"key":"dWPTdYDFap"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"cargo clippy --all-targets -- -D warnings","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"ZAIX70h1xf"}],"key":"vpflh2lVwk"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"pnpm eslint .","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"K3mzxI3xHQ"},{"type":"text","value":" + ","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"HTw4TdevZA"},{"type":"inlineCode","value":"pnpm tsc --noEmit","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"h1nKHsF1SV"}],"key":"cvfL4hrO1v"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"pnpm eslint .","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"ahUuwIntsm"},{"type":"text","value":" + typecheck","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"umkLDiLRIc"}],"key":"cAWw5PFXDB"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"inlineCode","value":"pnpm eslint .","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"zZPdd7KxN2"},{"type":"text","value":" + extension typecheck","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"vbibyHj0NK"}],"key":"ko3lwcLoXO"},{"type":"tableCell","align":"left","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"children":[{"type":"text","value":"Rust clippy + frontend eslint/typecheck","position":{"start":{"line":263,"column":1},"end":{"line":263,"column":1}},"key":"kMoUTgZ947"}],"key":"JNtWTfLj0n"}],"key":"Tq3JjM7383"},{"type":"tableRow","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"dwf build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"FNqGzn6VqK"}],"key":"fC8Gv1HFVJ"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"cargo build --release","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"F2u97kLK1D"}],"key":"eDUW6NwdId"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"pnpm build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"Z3kh9AjX9O"}],"key":"W4lr4hSo46"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"pnpm build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"kHo81C13wP"}],"key":"mycO7KZytP"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"pnpm package","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"VHEjwPULeR"},{"type":"text","value":" / extension bundle","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"rVmORZXaLJ"}],"key":"IQlwLFgPBM"},{"type":"tableCell","align":"left","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"inlineCode","value":"cargo build --release","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"kzkZUxN1R1"},{"type":"text","value":" + frontend build","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"cZZ3unOxKx"}],"key":"GpUSyxhEEs"}],"key":"yuZdCYGzNl"},{"type":"tableRow","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"dwf test","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"IN2atVTlYm"}],"key":"b4Wzb5ixBL"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"cargo nextest run","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"ZKzpbsA5j1"}],"key":"olPfaoiQGz"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"pnpm test","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"lETVZRBHbN"},{"type":"text","value":" (vitest/jest)","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"j38v8OUsic"}],"key":"aOgBRHNmSy"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"pnpm test","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"k1tIq6FUXG"}],"key":"QL8UwFQfR5"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"text","value":"extension host tests","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"YwK7HqnRyL"}],"key":"zxt7rPhF2k"},{"type":"tableCell","align":"left","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"inlineCode","value":"cargo nextest run","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"DGP7VxjMEn"},{"type":"text","value":" + frontend tests","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"xDJsrB9iNc"}],"key":"s45SmPGLLc"}],"key":"dYboiq4A5s"},{"type":"tableRow","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"inlineCode","value":"dwf smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"vpvBVS0GwK"}],"key":"tRJDKErt5N"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"app health/","key":"OVEgivBUml"},{"type":"abbreviation","title":"Command Line Interface.","children":[{"type":"text","value":"CLI","key":"MlEtFnZZ0z"}],"key":"vR0DTfQrky"},{"type":"text","value":" smoke script","key":"ElxOfPcp5r"}],"key":"QgHTfLGxHG"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"app startup + HTTP smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"FwRrQ2sBC5"}],"key":"UPeqa0bRN5"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"preview/build smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"BwQTHjAt4u"}],"key":"ho0QD53Kr3"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"install/package smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"zPmcnF800j"}],"key":"nKuOFtDE37"},{"type":"tableCell","align":"left","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"text","value":"app startup/bundle smoke","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"YKhq55zGyA"}],"key":"lvcCxLGY19"}],"key":"GtGjrhdyzf"},{"type":"tableRow","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"inlineCode","value":"dwf verify","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"ONO7CdU9n4"}],"key":"PQq5UQ6VQi"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"inlineCode","value":"fmt-check + lint + build + test + smoke","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"M2fiuYUyeK"}],"key":"vfCNGWBbH7"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence mapped to JS toolchain","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"g7MsKtfPwQ"}],"key":"tADq3OvpT7"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"QUQ9WSSuFK"}],"key":"ityi2CNfqv"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"oZAmyf8xJb"}],"key":"ADgkvpmoAp"},{"type":"tableCell","align":"left","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"same canonical sequence","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"U2bhviR76K"}],"key":"P5quIpCHy2"}],"key":"DJHfuGpeq1"},{"type":"tableRow","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"inlineCode","value":"dwf ci generate","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"bXlBmq5JgU"}],"key":"bBSeKDDaDj"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"generate Rust-oriented ","key":"NhMLbrYcQQ"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"kk76ZK0HbQ"}],"key":"A9Gpzvlmbx"},{"type":"text","value":" jobs/cache keys","key":"leZp7yh8oA"}],"key":"G7cCf4tb7K"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"generate pnpm/node ","key":"nzpxQf7K2J"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"C2hkAUG1n9"}],"key":"xQl8Kq1NhN"},{"type":"text","value":" jobs/cache keys","key":"UnEroZp8cd"}],"key":"YJvW3FySKE"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"add frontend/e2e job templates","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"kwR1h45LWQ"}],"key":"vhzypwW8cr"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"add extension packaging jobs","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"SMzJe2ySNY"}],"key":"fOdFNmhKkx"},{"type":"tableCell","align":"left","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"children":[{"type":"text","value":"add OS matrix + bundling/signing jobs","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"UrxB9ZE2XO"}],"key":"XTqVWdUPWP"}],"key":"p6dpYnFg6G"}],"key":"iBPaCCoAWW"},{"type":"paragraph","position":{"start":{"line":270,"column":1},"end":{"line":270,"column":1}},"children":[{"type":"text","value":"Notes:","position":{"start":{"line":270,"column":1},"end":{"line":270,"column":1}},"key":"JNeVT05HlC"}],"key":"d32CLg3zNv"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":272,"column":1},"end":{"line":274,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":272,"column":1},"end":{"line":272,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The canonical command names are stable for developers; stack-specific executors are resolved from config extensions.","position":{"start":{"line":272,"column":1},"end":{"line":272,"column":1}},"key":"xlSCMxZ3fA"}],"key":"uVXb7C8WUa"}],"key":"PGuq8G2ToZ"},{"type":"listItem","spread":true,"position":{"start":{"line":273,"column":1},"end":{"line":274,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"dwf verify","position":{"start":{"line":273,"column":1},"end":{"line":273,"column":1}},"key":"sYB4Shb9mM"},{"type":"text","value":" should always run inside the configured fingerprinted container in ","key":"zJYLQHx0bv"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"xI4jPDYDdc"}],"key":"gDNFQrVG5J"},{"type":"text","value":", and optionally locally via containerized mode.","key":"BLXbQp3qsg"}],"key":"GBIo971kZs"}],"key":"cLNMPStd9S"}],"key":"ceW5ebuZCK"},{"type":"paragraph","position":{"start":{"line":275,"column":1},"end":{"line":275,"column":1}},"children":[{"type":"text","value":"Rollout path for this project:","position":{"start":{"line":275,"column":1},"end":{"line":275,"column":1}},"key":"ocxObFWMiv"}],"key":"tiAOVdza2l"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":277,"column":1},"end":{"line":280,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Phase A: treat current ","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"YSqysVKDEP"},{"type":"inlineCode","value":"dflow","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"Rbdh6HOQU9"},{"type":"text","value":" as compatibility facade and map it to ","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"Wba76I5K5O"},{"type":"inlineCode","value":"devflow","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"SLRsbF9H9m"},{"type":"text","value":"/","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"o8JguVY7dp"},{"type":"inlineCode","value":"dwf","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"GFH8LEJ9SR"},{"type":"text","value":" commands.","position":{"start":{"line":277,"column":1},"end":{"line":277,"column":1}},"key":"rF8SZdQg4B"}],"key":"Re8DLWUulv"}],"key":"j3qFmRXSu7"},{"type":"listItem","spread":true,"position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Phase B: move cache/image/check contracts into typed config.","position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"key":"rTFXPU7hjS"}],"key":"CjLdRXPVps"}],"key":"tHHAkhrDWd"},{"type":"listItem","spread":true,"position":{"start":{"line":279,"column":1},"end":{"line":280,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Phase C: keep project-specific extensions only for diagram-tool dependencies and release packaging nuances.","position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"key":"ek7xdiD4Mp"}],"key":"xbLNVWrJPP"}],"key":"mEbpQ7T1OJ"}],"key":"rCFXpIfINq"},{"type":"heading","depth":2,"position":{"start":{"line":281,"column":1},"end":{"line":281,"column":1}},"children":[{"type":"text","value":"Required Repo Changes","position":{"start":{"line":281,"column":1},"end":{"line":281,"column":1}},"key":"cgIpD96CfU"}],"identifier":"required-repo-changes","label":"Required Repo Changes","html_id":"required-repo-changes","implicit":true,"key":"Vdj2zP4bOH"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":283,"column":1},"end":{"line":298,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Standardize fingerprint algorithm docs + scripts to one input set.","position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"key":"O4hOkdeOUI"}],"key":"nAF30Mj7yN"}],"key":"FOn4RSeSuC"},{"type":"listItem","spread":true,"position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Introduce ","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"jl250Jt3pT"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"jy5r6TeSYB"},{"type":"text","value":" and replace hardcoded ","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"NiGC1WpE0p"},{"type":"inlineCode","value":".cargo-cache","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"Zeqn6FoZ7H"},{"type":"text","value":"/","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"nqF0l9pqsY"},{"type":"inlineCode","value":"target/ci","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"xRs9yJ4W8j"},{"type":"text","value":" paths in scripts and make fragments.","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"pJJjAhrftu"}],"key":"NfdpVNbztC"}],"key":"XzXmzTdQz8"},{"type":"listItem","spread":true,"position":{"start":{"line":285,"column":1},"end":{"line":289,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add explicit ","key":"r2w1t2HNho"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"foeCuROjZd"}],"key":"y5fvwwCmhE"},{"type":"text","value":"-tier targets:","key":"CFXO2VQp0T"}],"key":"ep2Pn2PMDq"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":286,"column":1},"end":{"line":289,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":286,"column":1},"end":{"line":286,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"fmt-check","position":{"start":{"line":286,"column":1},"end":{"line":286,"column":1}},"key":"AXkfFgTEvo"}],"key":"WeKCoZMJA1"}],"key":"nky0Vf9EWI"},{"type":"listItem","spread":true,"position":{"start":{"line":287,"column":1},"end":{"line":287,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"lint-clippy","position":{"start":{"line":287,"column":1},"end":{"line":287,"column":1}},"key":"etS7kC07FB"}],"key":"xP7jPiNSNc"}],"key":"Wau6dDn0GV"},{"type":"listItem","spread":true,"position":{"start":{"line":288,"column":1},"end":{"line":288,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"test-pr","position":{"start":{"line":288,"column":1},"end":{"line":288,"column":1}},"key":"iO89iopYmq"}],"key":"Fp0plK6v1H"}],"key":"VuKnrDGa6f"},{"type":"listItem","spread":true,"position":{"start":{"line":289,"column":1},"end":{"line":289,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"test-full","position":{"start":{"line":289,"column":1},"end":{"line":289,"column":1}},"key":"QTtfcfXseO"}],"key":"CxeHj8ZrUc"}],"key":"cVhKwFgE5K"}],"key":"V4iVb3GDMz"}],"key":"CvJ3fuYoxm"},{"type":"listItem","spread":true,"position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Consolidate ","key":"BlsmKjisiX"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"uK4812syG4"}],"key":"keyT1LZRyE"},{"type":"text","value":" triggers into one workflow (","key":"GfCnVTSnF3"},{"type":"inlineCode","value":"main","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"bL8KzRfW08"},{"type":"text","value":", ","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"BU9vhusXuO"},{"type":"inlineCode","value":"develop","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"Lxp7NKYX7s"},{"type":"text","value":") and keep release/package workflows separate.","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"QjJapkiaNP"}],"key":"TyfFACiN5J"}],"key":"Ua3rGkT6xW"},{"type":"listItem","spread":true,"position":{"start":{"line":291,"column":1},"end":{"line":291,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add cache key normalization helper (script or make target) reused by both local diagnostics and GHA.","position":{"start":{"line":291,"column":1},"end":{"line":291,"column":1}},"key":"hUY7L1euMV"}],"key":"i6TlTVArlO"}],"key":"ybyQk8iHuH"},{"type":"listItem","spread":true,"position":{"start":{"line":292,"column":1},"end":{"line":295,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add ","key":"xuMxvRjsnD"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"rYNBzTtv54"}],"key":"nQiQMddsbP"},{"type":"text","value":" observability summary:","key":"gj2fbObg6B"}],"key":"DIaazkpQPx"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":293,"column":1},"end":{"line":295,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":293,"column":1},"end":{"line":293,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"fingerprint used","position":{"start":{"line":293,"column":1},"end":{"line":293,"column":1}},"key":"awTtyOwJwf"}],"key":"GOkWePMYlg"}],"key":"EIK1vodIDE"},{"type":"listItem","spread":true,"position":{"start":{"line":294,"column":1},"end":{"line":294,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"cache hit/miss stats","position":{"start":{"line":294,"column":1},"end":{"line":294,"column":1}},"key":"Tnx7zhyQ1n"}],"key":"obqYo5G8mx"}],"key":"MaxoE8Dcbl"},{"type":"listItem","spread":true,"position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"sccache","position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"key":"QYTESzHPTy"},{"type":"text","value":" hit ratio per run","position":{"start":{"line":295,"column":1},"end":{"line":295,"column":1}},"key":"u4Iy7fYwXW"}],"key":"qpodoCyOpR"}],"key":"Fi9CVWk9Gw"}],"key":"xx9eQ581cH"}],"key":"WeFokdEaru"},{"type":"listItem","spread":true,"position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add explicit note in workflow docs that ","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"JKuitcAhMm"},{"type":"inlineCode","value":"build","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"qnNuq4e25P"},{"type":"text","value":" and all ","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"xdb6GACq8N"},{"type":"inlineCode","value":"verify-*","position":{"start":{"line":296,"column":1},"end":{"line":296,"column":1}},"key":"PHW8Z0JtmO"},{"type":"text","value":" jobs execute in the fingerprinted ","key":"j04TCuDmsE"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"PZr34IGe20"}],"key":"OcYAFrSKY8"},{"type":"text","value":" container.","key":"X793b3jcfG"}],"key":"hNYwSszi1G"}],"key":"JKjzZq9P0d"},{"type":"listItem","spread":true,"position":{"start":{"line":297,"column":1},"end":{"line":298,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add extension points in docs/config for future multi-surface and multi-stack orchestration.","position":{"start":{"line":297,"column":1},"end":{"line":297,"column":1}},"key":"Gw51MszB3e"}],"key":"MzWRPFtX9x"}],"key":"BKWLxu0BIM"}],"key":"jT5guQvV4V"},{"type":"heading","depth":2,"position":{"start":{"line":299,"column":1},"end":{"line":299,"column":1}},"children":[{"type":"text","value":"Suggested Implementation Plan (v0.1.0)","position":{"start":{"line":299,"column":1},"end":{"line":299,"column":1}},"key":"IyhFf3W6qy"}],"identifier":"suggested-implementation-plan-v0-1-0","label":"Suggested Implementation Plan (v0.1.0)","html_id":"suggested-implementation-plan-v0-1-0","implicit":true,"key":"WU9AUWjRmQ"},{"type":"heading","depth":3,"position":{"start":{"line":301,"column":1},"end":{"line":301,"column":1}},"children":[{"type":"text","value":"Phase 1: Cache Contract and Fingerprint Consistency","position":{"start":{"line":301,"column":1},"end":{"line":301,"column":1}},"key":"jLP9xuWURy"}],"identifier":"phase-1-cache-contract-and-fingerprint-consistency","label":"Phase 1: Cache Contract and Fingerprint Consistency","html_id":"phase-1-cache-contract-and-fingerprint-consistency","implicit":true,"key":"WJZw8493ps"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":303,"column":1},"end":{"line":306,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add ","position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"key":"DkHVIOylGw"},{"type":"inlineCode","value":"KROKI_CACHE_ROOT","position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"key":"wsuNtQTf7F"},{"type":"text","value":" contract and migrate mounts/env vars.","position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"key":"cTy0EMbCKy"}],"key":"qynZqRIBoV"}],"key":"ReR23EJD9j"},{"type":"listItem","spread":true,"position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Align fingerprint implementation and documentation.","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"key":"SuLCMJe1Xy"}],"key":"C4mEA4eO3L"}],"key":"HEwEhzuv28"},{"type":"listItem","spread":true,"position":{"start":{"line":305,"column":1},"end":{"line":306,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Validate no regression in ","position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"key":"fDxtbIyr4x"},{"type":"inlineCode","value":"./dflow ci-verify","position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"key":"B7W5ZXFtrH"},{"type":"text","value":".","position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"key":"GqP5aHcPQI"}],"key":"pQlqxUksBP"}],"key":"RWTitAWIdd"}],"key":"DPMz3L1YeX"},{"type":"heading","depth":3,"position":{"start":{"line":307,"column":1},"end":{"line":307,"column":1}},"children":[{"type":"text","value":"Phase 2: ","key":"QRkppn1lFo"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"srMIP8t9HC"}],"key":"TXFJWwB945"},{"type":"text","value":" Job Contract Refactor","key":"zCPCdS9KeU"}],"identifier":"phase-2-ci-job-contract-refactor","label":"Phase 2: CI Job Contract Refactor","html_id":"phase-2-ci-job-contract-refactor","implicit":true,"key":"QGZYDl6qE1"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":309,"column":1},"end":{"line":312,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":309,"column":1},"end":{"line":309,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Create/adjust make targets for granular checks.","position":{"start":{"line":309,"column":1},"end":{"line":309,"column":1}},"key":"hxDmKQ7UQW"}],"key":"Teo0rgWwu9"}],"key":"QTorEUy261"},{"type":"listItem","spread":true,"position":{"start":{"line":310,"column":1},"end":{"line":310,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Refactor ","key":"sL7Ssguz8P"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"JzwopNK4vU"}],"key":"iY1TchnwsP"},{"type":"text","value":" workflow into prep/build/parallel-verify jobs.","key":"WAsJo0lRXI"}],"key":"ym8iPn0jnh"}],"key":"M7Mh6pGAq1"},{"type":"listItem","spread":true,"position":{"start":{"line":311,"column":1},"end":{"line":312,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep required checks mapped to the same stable names.","position":{"start":{"line":311,"column":1},"end":{"line":311,"column":1}},"key":"aQlvq4UW7J"}],"key":"RLAHAZmMg7"}],"key":"ITCTxrZygS"}],"key":"YkPkE8DPdJ"},{"type":"heading","depth":3,"position":{"start":{"line":313,"column":1},"end":{"line":313,"column":1}},"children":[{"type":"text","value":"Phase 3: Test Tiering + Runtime Optimization","position":{"start":{"line":313,"column":1},"end":{"line":313,"column":1}},"key":"lAgH9ZD8mE"}],"identifier":"phase-3-test-tiering-runtime-optimization","label":"Phase 3: Test Tiering + Runtime Optimization","html_id":"phase-3-test-tiering-runtime-optimization","implicit":true,"key":"eHv1YnTWmM"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":315,"column":1},"end":{"line":318,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":315,"column":1},"end":{"line":315,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Formalize ","key":"uRw8gjuW3D"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"ISosFs5nwB"}],"key":"CS7Vf82ZRZ"},{"type":"text","value":" vs full test tiers.","key":"dB76uNZD5I"}],"key":"hLPZwjiSw8"}],"key":"tAUPXPKerA"},{"type":"listItem","spread":true,"position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Tune ","position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"key":"fRq3cUYm1G"},{"type":"inlineCode","value":"nextest","position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"key":"J7WO7cUCp2"},{"type":"text","value":" profile and retries for flaky integration suites.","position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"key":"N9rDzB6wvm"}],"key":"B7mpHsqsoO"}],"key":"tfvK16XF7f"},{"type":"listItem","spread":true,"position":{"start":{"line":317,"column":1},"end":{"line":318,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add run summaries with cache and compile diagnostics.","position":{"start":{"line":317,"column":1},"end":{"line":317,"column":1}},"key":"nHwAuAI2bv"}],"key":"KMTBLwrWEw"}],"key":"FHftbpOhjT"}],"key":"jVl7PNgyrc"},{"type":"heading","depth":3,"position":{"start":{"line":319,"column":1},"end":{"line":319,"column":1}},"children":[{"type":"text","value":"Phase 4: Hardening (Optional, Recommended)","position":{"start":{"line":319,"column":1},"end":{"line":319,"column":1}},"key":"kHCF68FDQH"}],"identifier":"phase-4-hardening-optional-recommended","label":"Phase 4: Hardening (Optional, Recommended)","html_id":"phase-4-hardening-optional-recommended","implicit":true,"key":"khVB2thuV4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":321,"column":1},"end":{"line":324,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":321,"column":1},"end":{"line":321,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add SBOM + image scan gates.","position":{"start":{"line":321,"column":1},"end":{"line":321,"column":1}},"key":"vqEbmRAH4u"}],"key":"e7YsIKgifp"}],"key":"KalQpCm3qn"},{"type":"listItem","spread":true,"position":{"start":{"line":322,"column":1},"end":{"line":322,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add provenance/signing for release images.","position":{"start":{"line":322,"column":1},"end":{"line":322,"column":1}},"key":"Sr72oqEdsx"}],"key":"hzGCGV8Mx1"}],"key":"szBfIdeJQs"},{"type":"listItem","spread":true,"position":{"start":{"line":323,"column":1},"end":{"line":324,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Add periodic cache hygiene workflow.","position":{"start":{"line":323,"column":1},"end":{"line":323,"column":1}},"key":"gv5Pp45A5Q"}],"key":"GsacgkwUrS"}],"key":"oGvbhsuN2Z"}],"key":"jxxHL4GOzq"},{"type":"heading","depth":2,"position":{"start":{"line":325,"column":1},"end":{"line":325,"column":1}},"children":[{"type":"text","value":"Risks and Mitigations","position":{"start":{"line":325,"column":1},"end":{"line":325,"column":1}},"key":"qQ3RXUlU3V"}],"identifier":"risks-and-mitigations","label":"Risks and Mitigations","html_id":"risks-and-mitigations","implicit":true,"key":"smtQCWa4yq"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":327,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":327,"column":1},"end":{"line":328,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Risk: over-broad target cache reuse can cause stale artifacts.","position":{"start":{"line":327,"column":1},"end":{"line":327,"column":1}},"key":"pk9JM48EFB"}],"key":"Tka9f4mDBp"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":328,"column":1},"end":{"line":328,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":328,"column":1},"end":{"line":328,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mitigation: include fingerprint + toolchain + feature mode in cache key.","position":{"start":{"line":328,"column":1},"end":{"line":328,"column":1}},"key":"jYwTRgM6i7"}],"key":"ufz4IQ0v58"}],"key":"Kzjgl9wgT1"}],"key":"vFFWcUaTUy"}],"key":"dbuMjxulSn"},{"type":"listItem","spread":true,"position":{"start":{"line":329,"column":1},"end":{"line":330,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Risk: too many parallel jobs increase image pull overhead.","position":{"start":{"line":329,"column":1},"end":{"line":329,"column":1}},"key":"Kr5467GFpW"}],"key":"NtAc7RriPJ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":330,"column":1},"end":{"line":330,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":330,"column":1},"end":{"line":330,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mitigation: keep verify jobs lightweight and rely on prep/build warm cache.","position":{"start":{"line":330,"column":1},"end":{"line":330,"column":1}},"key":"Q9HtdrNxGx"}],"key":"rxyVXTtECD"}],"key":"sxfUx6MQdU"}],"key":"SuBrP0ZwvB"}],"key":"HiaS8Vm0C7"},{"type":"listItem","spread":true,"position":{"start":{"line":331,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Risk: local cache growth on macOS.","position":{"start":{"line":331,"column":1},"end":{"line":331,"column":1}},"key":"QhUmFuxMmZ"}],"key":"CK0THQgbQ6"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":332,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":332,"column":1},"end":{"line":333,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mitigation: configurable cache root + retention/prune targets.","position":{"start":{"line":332,"column":1},"end":{"line":332,"column":1}},"key":"RWDV5BdK2U"}],"key":"Y3MwTfzIhx"}],"key":"HNjWWCFo4x"}],"key":"tOhrGCHxmr"}],"key":"sUFTr6xoFz"}],"key":"nzGPLjjK6A"},{"type":"heading","depth":2,"position":{"start":{"line":334,"column":1},"end":{"line":334,"column":1}},"children":[{"type":"text","value":"Decision Notes on Requested Strategies","position":{"start":{"line":334,"column":1},"end":{"line":334,"column":1}},"key":"t3y7x8jNk1"}],"identifier":"decision-notes-on-requested-strategies","label":"Decision Notes on Requested Strategies","html_id":"decision-notes-on-requested-strategies","implicit":true,"key":"T9akrJ5KdD"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":336,"column":1},"end":{"line":340,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":336,"column":1},"end":{"line":336,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Mounting cargo registry/git/target caches is correct and should remain, with stronger key scoping and a configurable root.","position":{"start":{"line":336,"column":1},"end":{"line":336,"column":1}},"key":"vcCXEsHHCD"}],"key":"vafE1DkwPK"}],"key":"HD10nGFM3a"},{"type":"listItem","spread":true,"position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"cargo nextest","position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"key":"BuJTCrUTFj"},{"type":"text","value":" is the right default for ","key":"avx697YO2h"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"MUBnYCrtxN"}],"key":"AIJBcEByRT"},{"type":"text","value":"; keep it as the primary ","key":"zd3mdnvf7D"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"ko5nkrRlss"}],"key":"cMB4PPOfyp"},{"type":"text","value":" test executor.","key":"KFxIVQdkXX"}],"key":"dUQr5oFmGG"}],"key":"wu1Lh1JhxT"},{"type":"listItem","spread":true,"position":{"start":{"line":338,"column":1},"end":{"line":338,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Granular checks should remain visible as separate required statuses/check-runs.","position":{"start":{"line":338,"column":1},"end":{"line":338,"column":1}},"key":"KxKwm7Oz7c"}],"key":"iiGICDgNU1"}],"key":"PTN1N7ujA4"},{"type":"listItem","spread":true,"position":{"start":{"line":339,"column":1},"end":{"line":340,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Single ","key":"C3hoi3dPJJ"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"H7uSZxL14V"}],"key":"HpIyoZom9E"},{"type":"text","value":" workflow for ","key":"OgnTUKbkfV"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"q90rvTqhc5"}],"key":"i43GH1ABjj"},{"type":"text","value":"/push on ","key":"j63WgwKYJ9"},{"type":"inlineCode","value":"main","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"Yiz5HdQesr"},{"type":"text","value":" and ","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"kHASLArYDK"},{"type":"inlineCode","value":"develop","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"vgC2r9Rpe7"},{"type":"text","value":" is recommended; keep release/publish workflows independent.","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"gofbw86hZP"}],"key":"XaDeRmJShu"}],"key":"JeP3ifqime"}],"key":"igxBQP48Nw"},{"type":"heading","depth":2,"position":{"start":{"line":341,"column":1},"end":{"line":341,"column":1}},"children":[{"type":"text","value":"Success Criteria","position":{"start":{"line":341,"column":1},"end":{"line":341,"column":1}},"key":"iRflxZXPP8"}],"identifier":"success-criteria","label":"Success Criteria","html_id":"success-criteria","implicit":true,"key":"sx5GiX3woY"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":343,"column":1},"end":{"line":346,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Local ","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"key":"GqZVc636nO"},{"type":"inlineCode","value":"./dflow ci-verify","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"key":"EZBjdiYjx9"},{"type":"text","value":" and ","key":"cEn8Z6z4EI"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"ExBlwtCBxA"}],"key":"EfAgUCwkNe"},{"type":"text","value":" ","key":"bC7SV0V2zt"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"VFqnG3XTQb"}],"key":"r9fgLX4PKz"},{"type":"text","value":" run identical targets in the same image identity.","key":"bBn7lZ4cSg"}],"key":"viEUVzlyPM"}],"key":"maUNREvWUf"},{"type":"listItem","spread":true,"position":{"start":{"line":344,"column":1},"end":{"line":344,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Warm ","key":"okWYbdFD7O"},{"type":"abbreviation","title":"Pull Request.","children":[{"type":"text","value":"PR","key":"zazjsmXYWL"}],"key":"R73yo5KKLY"},{"type":"text","value":" rerun latency significantly lower than cold runs, with measurable ","key":"e2CWmf2jMC"},{"type":"inlineCode","value":"sccache","position":{"start":{"line":344,"column":1},"end":{"line":344,"column":1}},"key":"ILWXe8dvRp"},{"type":"text","value":" and cache hit ratios.","position":{"start":{"line":344,"column":1},"end":{"line":344,"column":1}},"key":"jvxKZVdJbC"}],"key":"dK4W1H43ym"}],"key":"Q6GStlx4rC"},{"type":"listItem","spread":true,"position":{"start":{"line":345,"column":1},"end":{"line":345,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Reviewers can identify failure domain immediately from independent check status names.","position":{"start":{"line":345,"column":1},"end":{"line":345,"column":1}},"key":"tFRLz69TR1"}],"key":"IC5cAlhCaZ"}],"key":"sHnNXnyCd3"},{"type":"listItem","spread":true,"position":{"start":{"line":346,"column":1},"end":{"line":346,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Pipeline logic remains modular and centralized in scripts/make targets, not duplicated in YAML.","position":{"start":{"line":346,"column":1},"end":{"line":346,"column":1}},"key":"xH9UWckT0g"}],"key":"wwo1w3quH2"}],"key":"COrb0SmxoF"}],"key":"jJI7IDsPYx"}],"key":"GX223shZf1"}],"key":"ESQ3UzwnSP"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"v0.1.0 Implementation Execution Plan","url":"/v0-1-0-implementation-execution-plan","group":"06 Roadmap"},"next":{"title":"v0.1.0 Critical Architecture and Implementation Review","url":"/v0-1-0-critical-review","group":"06 Roadmap"}}},"domain":"http://localhost:3000"}