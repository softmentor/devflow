{"version":3,"kind":"Article","sha256":"24d6441d6b6d5ac198e498f4dac2e83a520b39f09d352839c919139c6f19865b","slug":"adr-0002-cache-strategy","location":"/developer-guide/02-design/adr/adr-0002-cache-strategy.md","dependencies":[],"frontmatter":{"title":"ADR-0002 Cache Strategy Across Host, Container, and CI","label":"devflow.adr.0002.cache-strategy","content_includes_title":false,"authors":[{"nameParsed":{"literal":"Soft Mentor","given":"Soft","family":"Mentor"},"name":"Soft Mentor","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/softmentor/devflow","abbreviations":{"ADR":"Architecture Decision Record.","API":"Application Programming Interface.","CI":"Continuous Integration.","CLI":"Command Line Interface.","DAG":"Directed Acyclic Graph.","GHCR":"GitHub Container Registry.","PR":"Pull Request."},"numbering":{"title":{"offset":3}},"source_url":"https://github.com/softmentor/devflow/blob/main/docs/developer-guide/02-design/adr/adr-0002-cache-strategy.md","edit_url":"https://github.com/softmentor/devflow/edit/main/docs/developer-guide/02-design/adr/adr-0002-cache-strategy.md","exports":[{"format":"md","filename":"adr-0002-cache-strategy.md","url":"/devflow/build/adr-0002-cache-strat-158dc6a7b0491d4f1a85e265309ead52.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Status","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"VyCihXRCT6"}],"identifier":"status","label":"Status","html_id":"status","implicit":true,"key":"WNCxYqrssN"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Accepted","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"CNUkxypmyd"}],"key":"iosXyECKdQ"},{"type":"heading","depth":2,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Decision","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"GF5I4Zwoaf"}],"identifier":"decision","label":"Decision","html_id":"decision","implicit":true,"key":"CFBDY50jYo"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Adopt profile-aware cache partitioning where cache keys and directories are isolated by runtime profile (","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"WAPzUa9zIq"},{"type":"inlineCode","value":"host","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"s7WmRQWEjF"},{"type":"text","value":" vs ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"X67D2xH7FS"},{"type":"inlineCode","value":"container","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"jfN2NhxWsC"},{"type":"text","value":") and environment dimensions (","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"jFMEKDkNW5"},{"type":"inlineCode","value":"os","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"alLS6fky6e"},{"type":"text","value":", ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"KUbq4ZKSwT"},{"type":"inlineCode","value":"arch","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"LMkjsTg1pn"},{"type":"text","value":", toolchain lock).","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"KrLGQY644d"}],"key":"FpyUJtc7gZ"},{"type":"heading","depth":2,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Rationale","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"qZi4QVRImm"}],"identifier":"rationale","label":"Rationale","html_id":"rationale","implicit":true,"key":"sH98Lt9Gpa"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":17,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Prevent artifact contamination across heterogeneous runtimes.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"JHw0HWQSXl"}],"key":"IQWJHdscub"}],"key":"KBhEDowhTT"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Keep cache as optimization only; correctness must not rely on hits.","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"IKo56Psw5w"}],"key":"nrDAExAyxb"}],"key":"Xe3Z7K9f3R"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Align local and ","key":"o4C1MlbSmR"},{"type":"abbreviation","title":"Continuous Integration.","children":[{"type":"text","value":"CI","key":"mgJszL1mgQ"}],"key":"FKvwTvphu0"},{"type":"text","value":" cache behavior with explicit boundaries.","key":"ZOKGkE6J5T"}],"key":"j3wUBd15uj"}],"key":"GvLCUuiaRf"}],"key":"ad8ElX0mBe"},{"type":"heading","depth":2,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Consequences","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"KkfVwRiaXl"}],"identifier":"consequences","label":"Consequences","html_id":"consequences","implicit":true,"key":"vfRKj2zX9Z"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":23,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"More cache directories/keys to manage.","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"V5lkf8RKrs"}],"key":"jgBOLKeeO0"}],"key":"ZlBJLzvZlC"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Higher storage usage, but significantly lower risk of false positives/negatives in builds and tests.","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"V4Y5Vnkb9w"}],"key":"T8VPXhpTnn"}],"key":"Ez4jY4kY8Y"}],"key":"ymYsUo7XSD"}],"key":"HUULJYCQYp"}],"key":"BSFHQ426Rg"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"ADR-0001 Canonical Command Contract","url":"/adr-0001-command-contract","group":"02 Design"},"next":{"title":"ADR-0003 Dynamic Extension Wiring and Subprocess Execution","url":"/adr-0003-dynamic-extension-wiring","group":"02 Design"}}},"domain":"http://localhost:3000"}